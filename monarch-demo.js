(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){module.exports=function deepFreeze(o){Object.freeze(o);Object.getOwnPropertyNames(o).forEach(function(prop){if(o.hasOwnProperty(prop)&&o[prop]!==null&&(typeof o[prop]==="object"||typeof o[prop]==="function")&&!Object.isFrozen(o[prop])){deepFreeze(o[prop])}});return o}},{}],2:[function(require,module,exports){(function(global){(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?factory(exports,require("preact"),require("mobx")):typeof define==="function"&&define.amd?define(["exports","preact","mobx"],factory):factory(global.mobxPreact={},global.preact,global.mobx)})(this,function(exports,preact,mobx){"use strict";function isStateless(component){return!(component.prototype&&component.prototype.render)&&!preact.Component.isPrototypeOf(component)}function makeDisplayName(component){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$prefix=_ref.prefix,prefix=_ref$prefix===undefined?"":_ref$prefix,_ref$suffix=_ref.suffix,suffix=_ref$suffix===undefined?"":_ref$suffix;var displayName=component.displayName||component.name||component.constructor&&component.constructor.name||"<component>";return prefix+displayName+suffix}var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var classCallCheck=function(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}};var createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var inherits=function(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass};var possibleConstructorReturn=function(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self};var isUsingStaticRendering=false;var logger=console;function useStaticRendering(useStaticRendering){isUsingStaticRendering=useStaticRendering}function allowStateChangesStart(allowStateChanges){var prev=mobx._getGlobalState().allowStateChanges;mobx._getGlobalState().allowStateChanges=allowStateChanges;return prev}function allowStateChangesEnd(prev){mobx._getGlobalState().allowStateChanges=prev}function allowStateChanges(allowStateChanges,func,props,state,context){var prev=allowStateChangesStart(allowStateChanges);var res=void 0;try{res=func(props,state,context)}finally{allowStateChangesEnd(prev)}return res}function patch(target,funcName){var runMixinFirst=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var base=target[funcName];var mixinFunc=reactiveMixin[funcName];var f=!base?mixinFunc:runMixinFirst===true?function(){mixinFunc.apply(this,arguments);base.apply(this,arguments)}:function(){base.apply(this,arguments);mixinFunc.apply(this,arguments)};target[funcName]=f}function isObjectShallowModified(prev,next){if(null==prev||null==next||(typeof prev==="undefined"?"undefined":_typeof(prev))!=="object"||(typeof next==="undefined"?"undefined":_typeof(next))!=="object"){return prev!==next}var keys=Object.keys(prev);if(keys.length!==Object.keys(next).length){return true}var key=void 0;for(var i=keys.length-1;key=keys[i];i--){if(next[key]!==prev[key]){return true}}return false}var reactiveMixin={componentWillMount:function componentWillMount(){var _this=this;if(isUsingStaticRendering===true){return}var initialName=makeDisplayName(this);var skipRender=false;var isForcingUpdate=false;function makePropertyObservableReference(propName){var valueHolder=this[propName];var atom=mobx.createAtom("reactive "+propName);Object.defineProperty(this,propName,{configurable:true,enumerable:true,get:function get$$1(){atom.reportObserved();return valueHolder},set:function set$$1(v){if(!isForcingUpdate&&isObjectShallowModified(valueHolder,v)){valueHolder=v;skipRender=true;atom.reportChanged();skipRender=false}else{valueHolder=v}}})}makePropertyObservableReference.call(this,"props");makePropertyObservableReference.call(this,"state");var baseRender=this.render.bind(this);var reaction=null;var isRenderingPending=false;var initialRender=function initialRender(){reaction=new mobx.Reaction(initialName+".render()",function(){if(!isRenderingPending){isRenderingPending=true;if(typeof _this.componentWillReact==="function"){_this.componentWillReact()}if(_this.__$mobxIsUnmounted!==true){var hasError=true;try{isForcingUpdate=true;if(!skipRender){preact.Component.prototype.forceUpdate.call(_this)}hasError=false}finally{isForcingUpdate=false;if(hasError){reaction.dispose()}}}}});reaction.reactComponent=_this;reactiveRender.$mobx=reaction;_this.render=reactiveRender;return reactiveRender(_this.props,_this.state,_this.context)};var reactiveRender=function reactiveRender(props,state,context){isRenderingPending=false;var exception=undefined;var rendering=undefined;reaction.track(function(){try{rendering=allowStateChanges(false,baseRender,props,state,context)}catch(e){exception=e}});if(exception){throw exception}return rendering};this.render=initialRender},componentWillUnmount:function componentWillUnmount(){if(isUsingStaticRendering===true){return}this.render.$mobx&&this.render.$mobx.dispose();this.__$mobxIsUnmounted=true},componentDidMount:function componentDidMount(){},componentDidUpdate:function componentDidUpdate(){},shouldComponentUpdate:function shouldComponentUpdate(nextProps,nextState){if(isUsingStaticRendering){logger.warn("[mobx-preact] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side.")}if(this.state!==nextState){return true}return isObjectShallowModified(this.props,nextProps)}};function observer(componentClass){if(arguments.length>1){logger.warn('Mobx observer: Using observer to inject stores is not supported. Use `@connect(["store1", "store2"]) ComponentClass instead or preferably, use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))``')}if(componentClass.isMobxInjector===true){logger.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'")}if(isStateless(componentClass)){var _class,_temp;return observer((_temp=_class=function(_Component){inherits(_class,_Component);function _class(){classCallCheck(this,_class);return possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments))}createClass(_class,[{key:"render",value:function render(){return componentClass.call(this,this.props,this.context)}}]);return _class}(preact.Component),_class.displayName=makeDisplayName(componentClass),_temp))}if(!componentClass){throw new Error("Please pass a valid component to 'observer'")}var target=componentClass.prototype||componentClass;mixinLifecycleEvents(target);componentClass.isMobXReactObserver=true;return componentClass}function mixinLifecycleEvents(target){patch(target,"componentWillMount",true);patch(target,"componentDidMount");if(!target.shouldComponentUpdate){target.shouldComponentUpdate=reactiveMixin.shouldComponentUpdate}}var Observer=observer(function(_ref){var children=_ref.children;return children[0]()});Observer.displayName="Observer";var commonjsGlobal=typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports}var hoistNonReactStatics=createCommonjsModule(function(module,exports){(function(global,factory){module.exports=factory()})(commonjsGlobal,function(){var REACT_STATICS={childContextTypes:true,contextTypes:true,defaultProps:true,displayName:true,getDefaultProps:true,getDerivedStateFromProps:true,mixins:true,propTypes:true,type:true};var KNOWN_STATICS={name:true,length:true,prototype:true,caller:true,callee:true,arguments:true,arity:true};var defineProperty=Object.defineProperty;var getOwnPropertyNames=Object.getOwnPropertyNames;var getOwnPropertySymbols=Object.getOwnPropertySymbols;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var getPrototypeOf=Object.getPrototypeOf;var objectPrototype=getPrototypeOf&&getPrototypeOf(Object);return function hoistNonReactStatics(targetComponent,sourceComponent,blacklist){if(typeof sourceComponent!=="string"){if(objectPrototype){var inheritedComponent=getPrototypeOf(sourceComponent);if(inheritedComponent&&inheritedComponent!==objectPrototype){hoistNonReactStatics(targetComponent,inheritedComponent,blacklist)}}var keys=getOwnPropertyNames(sourceComponent);if(getOwnPropertySymbols){keys=keys.concat(getOwnPropertySymbols(sourceComponent))}for(var i=0;i<keys.length;++i){var key=keys[i];if(!REACT_STATICS[key]&&!KNOWN_STATICS[key]&&(!blacklist||!blacklist[key])){var descriptor=getOwnPropertyDescriptor(sourceComponent,key);try{defineProperty(targetComponent,key,descriptor)}catch(e){}}}return targetComponent}return targetComponent}})});var proxiedInjectorProps={isMobxInjector:{value:true,writable:true,configurable:true,enumerable:true}};function createStoreInjector(grabStoresFn,component,injectNames){var _class,_temp;var prefix="inject-";var suffix=injectNames?"-with-"+injectNames:"";var displayName=makeDisplayName(component,{prefix:prefix,suffix:suffix});var Injector=(_temp=_class=function(_Component){inherits(Injector,_Component);function Injector(){classCallCheck(this,Injector);return possibleConstructorReturn(this,(Injector.__proto__||Object.getPrototypeOf(Injector)).apply(this,arguments))}createClass(Injector,[{key:"render",value:function render(){var newProps={};for(var key in this.props){if(this.props.hasOwnProperty(key)){newProps[key]=this.props[key]}}var additionalProps=grabStoresFn(this.context.mobxStores||{},newProps,this.context)||{};for(var _key in additionalProps){newProps[_key]=additionalProps[_key]}return preact.h(component,newProps)}}]);return Injector}(preact.Component),_class.displayName=displayName,_temp);hoistNonReactStatics(Injector,component);Injector.wrappedComponent=component;Object.defineProperties(Injector,proxiedInjectorProps);return Injector}function grabStoresByName(storeNames){return function(baseStores,nextProps){storeNames.forEach(function(storeName){if(storeName in nextProps){return}if(!(storeName in baseStores)){throw new Error("MobX injector: Store '"+storeName+"' is not available! Make sure it is provided by some Provider")}nextProps[storeName]=baseStores[storeName]});return nextProps}}function inject(){var grabStoresFn=void 0;if(typeof arguments[0]==="function"){grabStoresFn=arguments[0];return function(componentClass){var injected=createStoreInjector(grabStoresFn,componentClass);injected.isMobxInjector=false;injected=observer(injected);injected.isMobxInjector=true;return injected}}else{var storeNames=[];for(var i=0;i<arguments.length;i++){storeNames[i]=arguments[i]}grabStoresFn=grabStoresByName(storeNames);return function(componentClass){return createStoreInjector(grabStoresFn,componentClass,storeNames.join("-"))}}}function connect(arg1,arg2){if(typeof arg1==="string"){throw new Error("Store names should be provided as array")}if(Array.isArray(arg1)){if(!arg2){return function(componentClass){return connect(arg1,componentClass)}}else{return inject.apply(null,arg1)(connect(arg2))}}return observer(arg1)}var specialReactKeys={children:true,key:true,ref:true};var logger$1=console;var Provider=function(_Component){inherits(Provider,_Component);function Provider(){classCallCheck(this,Provider);return possibleConstructorReturn(this,(Provider.__proto__||Object.getPrototypeOf(Provider)).apply(this,arguments))}createClass(Provider,[{key:"render",value:function render(_ref){var children=_ref.children;return children.length>1?preact.h("div",null," ",children," "):children[0]}},{key:"getChildContext",value:function getChildContext(){var stores={};var baseStores=this.context.mobxStores;if(baseStores){for(var key in baseStores){stores[key]=baseStores[key]}}for(var _key in this.props){if(!specialReactKeys[_key]&&_key!=="suppressChangedStoreWarning"){stores[_key]=this.props[_key]}}return{mobxStores:stores}}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(nextProps){if(Object.keys(nextProps).length!==Object.keys(this.props).length){logger$1.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children")}if(!nextProps.suppressChangedStoreWarning){for(var key in nextProps){if(!specialReactKeys[key]&&this.props[key]!==nextProps[key]){logger$1.warn("MobX Provider: Provided store '"+key+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}}}}]);return Provider}(preact.Component);if(!preact.Component){throw new Error("mobx-preact requires Preact to be available")}exports.observer=observer;exports.Observer=Observer;exports.useStaticRendering=useStaticRendering;exports.connect=connect;exports.inject=inject;exports.Provider=Provider;Object.defineProperty(exports,"__esModule",{value:true})})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{mobx:3,preact:6}],3:[function(require,module,exports){(function(process,global){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};function __values(o){var m=typeof Symbol==="function"&&o[Symbol.iterator],i=0;if(m)return m.call(o);return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}}}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-- >0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}var OBFUSCATED_ERROR$$1="An invariant failed, however the error is obfuscated because this is an production build.";var EMPTY_ARRAY$$1=[];Object.freeze(EMPTY_ARRAY$$1);var EMPTY_OBJECT$$1={};Object.freeze(EMPTY_OBJECT$$1);function getNextId$$1(){return++globalState$$1.mobxGuid}function fail$$1(message){invariant$$1(false,message);throw"X"}function invariant$$1(check,message){if(!check)throw new Error("[mobx] "+(message||OBFUSCATED_ERROR$$1))}var deprecatedMessages=[];function deprecated$$1(msg,thing){if(process.env.NODE_ENV==="production")return false;if(thing){return deprecated$$1("'"+msg+"', use '"+thing+"' instead.")}if(deprecatedMessages.indexOf(msg)!==-1)return false;deprecatedMessages.push(msg);console.error("[mobx] Deprecated: "+msg);return true}function once$$1(func){var invoked=false;return function(){if(invoked)return;invoked=true;return func.apply(this,arguments)}}var noop$$1=function(){};function unique$$1(list){var res=[];list.forEach(function(item){if(res.indexOf(item)===-1)res.push(item)});return res}function isObject$$1(value){return value!==null&&typeof value==="object"}function isPlainObject$$1(value){if(value===null||typeof value!=="object")return false;var proto=Object.getPrototypeOf(value);return proto===Object.prototype||proto===null}function addHiddenProp$$1(object,propName,value){Object.defineProperty(object,propName,{enumerable:false,writable:true,configurable:true,value:value})}function addHiddenFinalProp$$1(object,propName,value){Object.defineProperty(object,propName,{enumerable:false,writable:false,configurable:true,value:value})}function isPropertyConfigurable$$1(object,prop){var descriptor=Object.getOwnPropertyDescriptor(object,prop);return!descriptor||descriptor.configurable!==false&&descriptor.writable!==false}function assertPropertyConfigurable$$1(object,prop){if(process.env.NODE_ENV!=="production"&&!isPropertyConfigurable$$1(object,prop))fail$$1("Cannot make property '"+prop.toString()+"' observable, it is not configurable and writable in the target object")}function createInstanceofPredicate$$1(name,clazz){var propName="isMobX"+name;clazz.prototype[propName]=true;return function(x){return isObject$$1(x)&&x[propName]===true}}function isArrayLike$$1(x){return Array.isArray(x)||isObservableArray$$1(x)}function isES6Map$$1(thing){return thing instanceof Map}function isES6Set$$1(thing){return thing instanceof Set}function getMapLikeKeys$$1(map){if(isPlainObject$$1(map))return Object.keys(map);if(Array.isArray(map))return map.map(function(_a){var _b=__read(_a,1),key=_b[0];return key});if(isES6Map$$1(map)||isObservableMap$$1(map))return Array.from(map.keys());return fail$$1("Cannot get keys from '"+map+"'")}function toPrimitive$$1(value){return value===null?null:typeof value==="object"?""+value:value}var $mobx$$1=Symbol("mobx administration");var Atom$$1=function(){function Atom$$1(name){if(name===void 0){name="Atom@"+getNextId$$1()}this.name=name;this.isPendingUnobservation=false;this.isBeingObserved=false;this.observers=new Set;this.diffValue=0;this.lastAccessedBy=0;this.lowestObserverState=exports.IDerivationState.NOT_TRACKING}Atom$$1.prototype.onBecomeObserved=function(){if(this.onBecomeObservedListeners){this.onBecomeObservedListeners.forEach(function(listener){return listener()})}};Atom$$1.prototype.onBecomeUnobserved=function(){if(this.onBecomeUnobservedListeners){this.onBecomeUnobservedListeners.forEach(function(listener){return listener()})}};Atom$$1.prototype.reportObserved=function(){return reportObserved$$1(this)};Atom$$1.prototype.reportChanged=function(){startBatch$$1();propagateChanged$$1(this);endBatch$$1()};Atom$$1.prototype.toString=function(){return this.name};return Atom$$1}();var isAtom$$1=createInstanceofPredicate$$1("Atom",Atom$$1);function createAtom$$1(name,onBecomeObservedHandler,onBecomeUnobservedHandler){if(onBecomeObservedHandler===void 0){onBecomeObservedHandler=noop$$1}if(onBecomeUnobservedHandler===void 0){onBecomeUnobservedHandler=noop$$1}var atom=new Atom$$1(name);if(onBecomeObservedHandler!==noop$$1){onBecomeObserved$$1(atom,onBecomeObservedHandler)}if(onBecomeUnobservedHandler!==noop$$1){onBecomeUnobserved$$1(atom,onBecomeUnobservedHandler)}return atom}function identityComparer(a,b){return a===b}function structuralComparer(a,b){return deepEqual$$1(a,b)}function defaultComparer(a,b){return Object.is(a,b)}var comparer$$1={identity:identityComparer,structural:structuralComparer,default:defaultComparer};var mobxDidRunLazyInitializersSymbol$$1=Symbol("mobx did run lazy initializers");var mobxPendingDecorators$$1=Symbol("mobx pending decorators");var enumerableDescriptorCache={};var nonEnumerableDescriptorCache={};function createPropertyInitializerDescriptor(prop,enumerable){var cache=enumerable?enumerableDescriptorCache:nonEnumerableDescriptorCache;return cache[prop]||(cache[prop]={configurable:true,enumerable:enumerable,get:function(){initializeInstance$$1(this);return this[prop]},set:function(value){initializeInstance$$1(this);this[prop]=value}})}function initializeInstance$$1(target){if(target[mobxDidRunLazyInitializersSymbol$$1]===true)return;var decorators=target[mobxPendingDecorators$$1];if(decorators){addHiddenProp$$1(target,mobxDidRunLazyInitializersSymbol$$1,true);for(var key in decorators){var d=decorators[key];d.propertyCreator(target,d.prop,d.descriptor,d.decoratorTarget,d.decoratorArguments)}}}function createPropDecorator$$1(propertyInitiallyEnumerable,propertyCreator){return function decoratorFactory(){var decoratorArguments;var decorator=function decorate$$1(target,prop,descriptor,applyImmediately){if(applyImmediately===true){propertyCreator(target,prop,descriptor,target,decoratorArguments);return null}if(process.env.NODE_ENV!=="production"&&!quacksLikeADecorator$$1(arguments))fail$$1("This function is a decorator, but it wasn't invoked like a decorator");if(!Object.prototype.hasOwnProperty.call(target,mobxPendingDecorators$$1)){var inheritedDecorators=target[mobxPendingDecorators$$1];addHiddenProp$$1(target,mobxPendingDecorators$$1,__assign({},inheritedDecorators))}target[mobxPendingDecorators$$1][prop]={prop:prop,propertyCreator:propertyCreator,descriptor:descriptor,decoratorTarget:target,decoratorArguments:decoratorArguments};return createPropertyInitializerDescriptor(prop,propertyInitiallyEnumerable)};if(quacksLikeADecorator$$1(arguments)){decoratorArguments=EMPTY_ARRAY$$1;return decorator.apply(null,arguments)}else{decoratorArguments=Array.prototype.slice.call(arguments);return decorator}}}function quacksLikeADecorator$$1(args){return(args.length===2||args.length===3)&&typeof args[1]==="string"||args.length===4&&args[3]===true}function deepEnhancer$$1(v,_,name){if(isObservable$$1(v))return v;if(Array.isArray(v))return observable$$1.array(v,{name:name});if(isPlainObject$$1(v))return observable$$1.object(v,undefined,{name:name});if(isES6Map$$1(v))return observable$$1.map(v,{name:name});if(isES6Set$$1(v))return observable$$1.set(v,{name:name});return v}function shallowEnhancer$$1(v,_,name){if(v===undefined||v===null)return v;if(isObservableObject$$1(v)||isObservableArray$$1(v)||isObservableMap$$1(v)||isObservableSet$$1(v))return v;if(Array.isArray(v))return observable$$1.array(v,{name:name,deep:false});if(isPlainObject$$1(v))return observable$$1.object(v,undefined,{name:name,deep:false});if(isES6Map$$1(v))return observable$$1.map(v,{name:name,deep:false});if(isES6Set$$1(v))return observable$$1.set(v,{name:name,deep:false});return fail$$1(process.env.NODE_ENV!=="production"&&"The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets")}function referenceEnhancer$$1(newValue){return newValue}function refStructEnhancer$$1(v,oldValue,name){if(process.env.NODE_ENV!=="production"&&isObservable$$1(v))throw"observable.struct should not be used with observable values";if(deepEqual$$1(v,oldValue))return oldValue;return v}function createDecoratorForEnhancer$$1(enhancer){invariant$$1(enhancer);var decorator=createPropDecorator$$1(true,function(target,propertyName,descriptor,_decoratorTarget,decoratorArgs){if(process.env.NODE_ENV!=="production"){invariant$$1(!descriptor||!descriptor.get,'@observable cannot be used on getter (property "'+propertyName+'"), use @computed instead.')}var initialValue=descriptor?descriptor.initializer?descriptor.initializer.call(target):descriptor.value:undefined;asObservableObject$$1(target).addObservableProp(propertyName,initialValue,enhancer)});var res=typeof process!=="undefined"&&process.env&&process.env.NODE_ENV!=="production"?function observableDecorator(){if(arguments.length<2)return fail$$1("Incorrect decorator invocation. @observable decorator doesn't expect any arguments");return decorator.apply(null,arguments)}:decorator;res.enhancer=enhancer;return res}var defaultCreateObservableOptions$$1={deep:true,name:undefined,defaultDecorator:undefined,proxy:true};Object.freeze(defaultCreateObservableOptions$$1);function assertValidOption(key){if(!/^(deep|name|equals|defaultDecorator|proxy)$/.test(key))fail$$1("invalid option for (extend)observable: "+key)}function asCreateObservableOptions$$1(thing){if(thing===null||thing===undefined)return defaultCreateObservableOptions$$1;if(typeof thing==="string")return{name:thing,deep:true,proxy:true};if(process.env.NODE_ENV!=="production"){if(typeof thing!=="object")return fail$$1("expected options object");Object.keys(thing).forEach(assertValidOption)}return thing}var deepDecorator$$1=createDecoratorForEnhancer$$1(deepEnhancer$$1);var shallowDecorator=createDecoratorForEnhancer$$1(shallowEnhancer$$1);var refDecorator$$1=createDecoratorForEnhancer$$1(referenceEnhancer$$1);var refStructDecorator=createDecoratorForEnhancer$$1(refStructEnhancer$$1);function getEnhancerFromOptions(options){return options.defaultDecorator?options.defaultDecorator.enhancer:options.deep===false?referenceEnhancer$$1:deepEnhancer$$1}function createObservable(v,arg2,arg3){if(typeof arguments[1]==="string"){return deepDecorator$$1.apply(null,arguments)}if(isObservable$$1(v))return v;var res=isPlainObject$$1(v)?observable$$1.object(v,arg2,arg3):Array.isArray(v)?observable$$1.array(v,arg2):isES6Map$$1(v)?observable$$1.map(v,arg2):isES6Set$$1(v)?observable$$1.set(v,arg2):v;if(res!==v)return res;fail$$1(process.env.NODE_ENV!=="production"&&"The provided value could not be converted into an observable. If you want just create an observable reference to the object use 'observable.box(value)'")}var observableFactories={box:function(value,options){if(arguments.length>2)incorrectlyUsedAsDecorator("box");var o=asCreateObservableOptions$$1(options);return new ObservableValue$$1(value,getEnhancerFromOptions(o),o.name,true,o.equals)},array:function(initialValues,options){if(arguments.length>2)incorrectlyUsedAsDecorator("array");var o=asCreateObservableOptions$$1(options);return createObservableArray$$1(initialValues,getEnhancerFromOptions(o),o.name)},map:function(initialValues,options){if(arguments.length>2)incorrectlyUsedAsDecorator("map");var o=asCreateObservableOptions$$1(options);return new ObservableMap$$1(initialValues,getEnhancerFromOptions(o),o.name)},set:function(initialValues,options){if(arguments.length>2)incorrectlyUsedAsDecorator("set");var o=asCreateObservableOptions$$1(options);return new ObservableSet$$1(initialValues,getEnhancerFromOptions(o),o.name)},object:function(props,decorators,options){if(typeof arguments[1]==="string")incorrectlyUsedAsDecorator("object");var o=asCreateObservableOptions$$1(options);if(o.proxy===false){return extendObservable$$1({},props,decorators,o)}else{var defaultDecorator=getDefaultDecoratorFromObjectOptions$$1(o);var base=extendObservable$$1({},undefined,undefined,o);var proxy=createDynamicObservableObject$$1(base);extendObservableObjectWithProperties$$1(proxy,props,decorators,defaultDecorator);return proxy}},ref:refDecorator$$1,shallow:shallowDecorator,deep:deepDecorator$$1,struct:refStructDecorator};var observable$$1=createObservable;Object.keys(observableFactories).forEach(function(name){return observable$$1[name]=observableFactories[name]});function incorrectlyUsedAsDecorator(methodName){fail$$1("Expected one or two arguments to observable."+methodName+". Did you accidentally try to use observable."+methodName+" as decorator?")}var computedDecorator$$1=createPropDecorator$$1(false,function(instance,propertyName,descriptor,decoratorTarget,decoratorArgs){var get$$1=descriptor.get,set$$1=descriptor.set;var options=decoratorArgs[0]||{};asObservableObject$$1(instance).addComputedProp(instance,propertyName,__assign({get:get$$1,set:set$$1,context:instance},options))});var computedStructDecorator=computedDecorator$$1({equals:comparer$$1.structural});var computed$$1=function computed$$1(arg1,arg2,arg3){if(typeof arg2==="string"){return computedDecorator$$1.apply(null,arguments)}if(arg1!==null&&typeof arg1==="object"&&arguments.length===1){return computedDecorator$$1.apply(null,arguments)}if(process.env.NODE_ENV!=="production"){invariant$$1(typeof arg1==="function","First argument to `computed` should be an expression.");invariant$$1(arguments.length<3,"Computed takes one or two arguments if used as function")}var opts=typeof arg2==="object"?arg2:{};opts.get=arg1;opts.set=typeof arg2==="function"?arg2:opts.set;opts.name=opts.name||arg1.name||"";return new ComputedValue$$1(opts)};computed$$1.struct=computedStructDecorator;function createAction$$1(actionName,fn){if(process.env.NODE_ENV!=="production"){invariant$$1(typeof fn==="function","`action` can only be invoked on functions");if(typeof actionName!=="string"||!actionName)fail$$1("actions should have valid names, got: '"+actionName+"'")}var res=function(){return executeAction$$1(actionName,fn,this,arguments)};res.isMobxAction=true;return res}function executeAction$$1(actionName,fn,scope,args){var runInfo=startAction(actionName,fn,scope,args);var shouldSupressReactionError=true;try{var res=fn.apply(scope,args);shouldSupressReactionError=false;return res}finally{if(shouldSupressReactionError){globalState$$1.suppressReactionErrors=shouldSupressReactionError;endAction(runInfo);globalState$$1.suppressReactionErrors=false}else{endAction(runInfo)}}}function startAction(actionName,fn,scope,args){var notifySpy=isSpyEnabled$$1()&&!!actionName;var startTime=0;if(notifySpy&&process.env.NODE_ENV!=="production"){startTime=Date.now();var l=args&&args.length||0;var flattendArgs=new Array(l);if(l>0)for(var i=0;i<l;i++)flattendArgs[i]=args[i];spyReportStart$$1({type:"action",name:actionName,object:scope,arguments:flattendArgs})}var prevDerivation=untrackedStart$$1();startBatch$$1();var prevAllowStateChanges=allowStateChangesStart$$1(true);return{prevDerivation:prevDerivation,prevAllowStateChanges:prevAllowStateChanges,notifySpy:notifySpy,startTime:startTime}}function endAction(runInfo){allowStateChangesEnd$$1(runInfo.prevAllowStateChanges);endBatch$$1();untrackedEnd$$1(runInfo.prevDerivation);if(runInfo.notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1({time:Date.now()-runInfo.startTime})}function allowStateChanges$$1(allowStateChanges$$1,func){var prev=allowStateChangesStart$$1(allowStateChanges$$1);var res;try{res=func()}finally{allowStateChangesEnd$$1(prev)}return res}function allowStateChangesStart$$1(allowStateChanges$$1){var prev=globalState$$1.allowStateChanges;globalState$$1.allowStateChanges=allowStateChanges$$1;return prev}function allowStateChangesEnd$$1(prev){globalState$$1.allowStateChanges=prev}function allowStateChangesInsideComputed$$1(func){var prev=globalState$$1.computationDepth;globalState$$1.computationDepth=0;var res;try{res=func()}finally{globalState$$1.computationDepth=prev}return res}var ObservableValue$$1=function(_super){__extends(ObservableValue$$1,_super);function ObservableValue$$1(value,enhancer,name,notifySpy,equals){if(name===void 0){name="ObservableValue@"+getNextId$$1()}if(notifySpy===void 0){notifySpy=true}if(equals===void 0){equals=comparer$$1.default}var _this=_super.call(this,name)||this;_this.enhancer=enhancer;_this.name=name;_this.equals=equals;_this.hasUnreportedChange=false;_this.value=enhancer(value,undefined,name);if(notifySpy&&isSpyEnabled$$1()&&process.env.NODE_ENV!=="production"){spyReport$$1({type:"create",name:_this.name,newValue:""+_this.value})}return _this}ObservableValue$$1.prototype.dehanceValue=function(value){if(this.dehancer!==undefined)return this.dehancer(value);return value};ObservableValue$$1.prototype.set=function(newValue){var oldValue=this.value;newValue=this.prepareNewValue(newValue);if(newValue!==globalState$$1.UNCHANGED){var notifySpy=isSpyEnabled$$1();if(notifySpy&&process.env.NODE_ENV!=="production"){spyReportStart$$1({type:"update",name:this.name,newValue:newValue,oldValue:oldValue})}this.setNewValue(newValue);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()}};ObservableValue$$1.prototype.prepareNewValue=function(newValue){checkIfStateModificationsAreAllowed$$1(this);if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{object:this,type:"update",newValue:newValue});if(!change)return globalState$$1.UNCHANGED;newValue=change.newValue}newValue=this.enhancer(newValue,this.value,this.name);return this.equals(this.value,newValue)?globalState$$1.UNCHANGED:newValue};ObservableValue$$1.prototype.setNewValue=function(newValue){var oldValue=this.value;this.value=newValue;this.reportChanged();if(hasListeners$$1(this)){notifyListeners$$1(this,{type:"update",object:this,newValue:newValue,oldValue:oldValue})}};ObservableValue$$1.prototype.get=function(){this.reportObserved();return this.dehanceValue(this.value)};ObservableValue$$1.prototype.intercept=function(handler){return registerInterceptor$$1(this,handler)};ObservableValue$$1.prototype.observe=function(listener,fireImmediately){if(fireImmediately)listener({object:this,type:"update",newValue:this.value,oldValue:undefined});return registerListener$$1(this,listener)};ObservableValue$$1.prototype.toJSON=function(){return this.get()};ObservableValue$$1.prototype.toString=function(){return this.name+"["+this.value+"]"};ObservableValue$$1.prototype.valueOf=function(){return toPrimitive$$1(this.get())};ObservableValue$$1.prototype[Symbol.toPrimitive]=function(){return this.valueOf()};return ObservableValue$$1}(Atom$$1);var isObservableValue$$1=createInstanceofPredicate$$1("ObservableValue",ObservableValue$$1);var ComputedValue$$1=function(){function ComputedValue$$1(options){this.dependenciesState=exports.IDerivationState.NOT_TRACKING;this.observing=[];this.newObserving=null;this.isBeingObserved=false;this.isPendingUnobservation=false;this.observers=new Set;this.diffValue=0;this.runId=0;this.lastAccessedBy=0;this.lowestObserverState=exports.IDerivationState.UP_TO_DATE;this.unboundDepsCount=0;this.__mapid="#"+getNextId$$1();this.value=new CaughtException$$1(null);this.isComputing=false;this.isRunningSetter=false;this.isTracing=TraceMode$$1.NONE;if(process.env.NODE_ENV!=="production"&&!options.get)throw"[mobx] missing option for computed: get";this.derivation=options.get;this.name=options.name||"ComputedValue@"+getNextId$$1();if(options.set)this.setter=createAction$$1(this.name+"-setter",options.set);this.equals=options.equals||(options.compareStructural||options.struct?comparer$$1.structural:comparer$$1.default);this.scope=options.context;this.requiresReaction=!!options.requiresReaction;this.keepAlive=!!options.keepAlive}ComputedValue$$1.prototype.onBecomeStale=function(){propagateMaybeChanged$$1(this)};ComputedValue$$1.prototype.onBecomeObserved=function(){if(this.onBecomeObservedListeners){this.onBecomeObservedListeners.forEach(function(listener){return listener()})}};ComputedValue$$1.prototype.onBecomeUnobserved=function(){if(this.onBecomeUnobservedListeners){this.onBecomeUnobservedListeners.forEach(function(listener){return listener()})}};ComputedValue$$1.prototype.get=function(){if(this.isComputing)fail$$1("Cycle detected in computation "+this.name+": "+this.derivation);if(globalState$$1.inBatch===0&&this.observers.size===0&&!this.keepAlive){if(shouldCompute$$1(this)){this.warnAboutUntrackedRead();startBatch$$1();this.value=this.computeValue(false);endBatch$$1()}}else{reportObserved$$1(this);if(shouldCompute$$1(this))if(this.trackAndCompute())propagateChangeConfirmed$$1(this)}var result=this.value;if(isCaughtException$$1(result))throw result.cause;return result};ComputedValue$$1.prototype.peek=function(){var res=this.computeValue(false);if(isCaughtException$$1(res))throw res.cause;return res};ComputedValue$$1.prototype.set=function(value){if(this.setter){invariant$$1(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?");this.isRunningSetter=true;try{this.setter.call(this.scope,value)}finally{this.isRunningSetter=false}}else invariant$$1(false,process.env.NODE_ENV!=="production"&&"[ComputedValue '"+this.name+"'] It is not possible to assign a new value to a computed value.")};ComputedValue$$1.prototype.trackAndCompute=function(){if(isSpyEnabled$$1()&&process.env.NODE_ENV!=="production"){spyReport$$1({object:this.scope,type:"compute",name:this.name})}var oldValue=this.value;var wasSuspended=this.dependenciesState===exports.IDerivationState.NOT_TRACKING;var newValue=this.computeValue(true);var changed=wasSuspended||isCaughtException$$1(oldValue)||isCaughtException$$1(newValue)||!this.equals(oldValue,newValue);if(changed){this.value=newValue}return changed};ComputedValue$$1.prototype.computeValue=function(track){this.isComputing=true;globalState$$1.computationDepth++;var res;if(track){res=trackDerivedFunction$$1(this,this.derivation,this.scope)}else{if(globalState$$1.disableErrorBoundaries===true){res=this.derivation.call(this.scope)}else{try{res=this.derivation.call(this.scope)}catch(e){res=new CaughtException$$1(e)}}}globalState$$1.computationDepth--;this.isComputing=false;return res};ComputedValue$$1.prototype.suspend=function(){if(!this.keepAlive){clearObserving$$1(this);this.value=undefined}};ComputedValue$$1.prototype.observe=function(listener,fireImmediately){var _this=this;var firstTime=true;var prevValue=undefined;return autorun$$1(function(){var newValue=_this.get();if(!firstTime||fireImmediately){var prevU=untrackedStart$$1();listener({type:"update",object:_this,newValue:newValue,oldValue:prevValue});untrackedEnd$$1(prevU)}firstTime=false;prevValue=newValue})};ComputedValue$$1.prototype.warnAboutUntrackedRead=function(){if(process.env.NODE_ENV==="production")return;if(this.requiresReaction===true){fail$$1("[mobx] Computed value "+this.name+" is read outside a reactive context")}if(this.isTracing!==TraceMode$$1.NONE){console.log("[mobx.trace] '"+this.name+"' is being read outside a reactive context. Doing a full recompute")}if(globalState$$1.computedRequiresReaction){console.warn("[mobx] Computed value "+this.name+" is being read outside a reactive context. Doing a full recompute")}};ComputedValue$$1.prototype.toJSON=function(){return this.get()};ComputedValue$$1.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"};ComputedValue$$1.prototype.valueOf=function(){return toPrimitive$$1(this.get())};ComputedValue$$1.prototype[Symbol.toPrimitive]=function(){return this.valueOf()};return ComputedValue$$1}();var isComputedValue$$1=createInstanceofPredicate$$1("ComputedValue",ComputedValue$$1);(function(IDerivationState$$1){IDerivationState$$1[IDerivationState$$1["NOT_TRACKING"]=-1]="NOT_TRACKING";IDerivationState$$1[IDerivationState$$1["UP_TO_DATE"]=0]="UP_TO_DATE";IDerivationState$$1[IDerivationState$$1["POSSIBLY_STALE"]=1]="POSSIBLY_STALE";IDerivationState$$1[IDerivationState$$1["STALE"]=2]="STALE"})(exports.IDerivationState||(exports.IDerivationState={}));var TraceMode$$1;(function(TraceMode$$1){TraceMode$$1[TraceMode$$1["NONE"]=0]="NONE";TraceMode$$1[TraceMode$$1["LOG"]=1]="LOG";TraceMode$$1[TraceMode$$1["BREAK"]=2]="BREAK"})(TraceMode$$1||(TraceMode$$1={}));var CaughtException$$1=function(){function CaughtException$$1(cause){this.cause=cause}return CaughtException$$1}();function isCaughtException$$1(e){return e instanceof CaughtException$$1}function shouldCompute$$1(derivation){switch(derivation.dependenciesState){case exports.IDerivationState.UP_TO_DATE:return false;case exports.IDerivationState.NOT_TRACKING:case exports.IDerivationState.STALE:return true;case exports.IDerivationState.POSSIBLY_STALE:{var prevUntracked=untrackedStart$$1();var obs=derivation.observing,l=obs.length;for(var i=0;i<l;i++){var obj=obs[i];if(isComputedValue$$1(obj)){if(globalState$$1.disableErrorBoundaries){obj.get()}else{try{obj.get()}catch(e){untrackedEnd$$1(prevUntracked);return true}}if(derivation.dependenciesState===exports.IDerivationState.STALE){untrackedEnd$$1(prevUntracked);return true}}}changeDependenciesStateTo0$$1(derivation);untrackedEnd$$1(prevUntracked);return false}}}function isComputingDerivation$$1(){return globalState$$1.trackingDerivation!==null}function checkIfStateModificationsAreAllowed$$1(atom){var hasObservers$$1=atom.observers.size>0;if(globalState$$1.computationDepth>0&&hasObservers$$1)fail$$1(process.env.NODE_ENV!=="production"&&"Computed values are not allowed to cause side effects by changing observables that are already being observed. Tried to modify: "+atom.name);if(!globalState$$1.allowStateChanges&&(hasObservers$$1||globalState$$1.enforceActions==="strict"))fail$$1(process.env.NODE_ENV!=="production"&&(globalState$$1.enforceActions?"Since strict-mode is enabled, changing observed observable values outside actions is not allowed. Please wrap the code in an `action` if this change is intended. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, the render function of a React component? Tried to modify: ")+atom.name)}function trackDerivedFunction$$1(derivation,f,context){changeDependenciesStateTo0$$1(derivation);derivation.newObserving=new Array(derivation.observing.length+100);derivation.unboundDepsCount=0;derivation.runId=++globalState$$1.runId;var prevTracking=globalState$$1.trackingDerivation;globalState$$1.trackingDerivation=derivation;var result;if(globalState$$1.disableErrorBoundaries===true){result=f.call(context)}else{try{result=f.call(context)}catch(e){result=new CaughtException$$1(e)}}globalState$$1.trackingDerivation=prevTracking;bindDependencies(derivation);return result}function bindDependencies(derivation){var prevObserving=derivation.observing;var observing=derivation.observing=derivation.newObserving;var lowestNewObservingDerivationState=exports.IDerivationState.UP_TO_DATE;var i0=0,l=derivation.unboundDepsCount;for(var i=0;i<l;i++){var dep=observing[i];if(dep.diffValue===0){dep.diffValue=1;if(i0!==i)observing[i0]=dep;i0++}if(dep.dependenciesState>lowestNewObservingDerivationState){lowestNewObservingDerivationState=dep.dependenciesState}}observing.length=i0;derivation.newObserving=null;l=prevObserving.length;while(l--){var dep=prevObserving[l];if(dep.diffValue===0){removeObserver$$1(dep,derivation)}dep.diffValue=0}while(i0--){var dep=observing[i0];if(dep.diffValue===1){dep.diffValue=0;addObserver$$1(dep,derivation)}}if(lowestNewObservingDerivationState!==exports.IDerivationState.UP_TO_DATE){derivation.dependenciesState=lowestNewObservingDerivationState;derivation.onBecomeStale()}}function clearObserving$$1(derivation){var obs=derivation.observing;derivation.observing=[];var i=obs.length;while(i--)removeObserver$$1(obs[i],derivation);derivation.dependenciesState=exports.IDerivationState.NOT_TRACKING}function untracked$$1(action$$1){var prev=untrackedStart$$1();try{return action$$1()}finally{untrackedEnd$$1(prev)}}function untrackedStart$$1(){var prev=globalState$$1.trackingDerivation;globalState$$1.trackingDerivation=null;return prev}function untrackedEnd$$1(prev){globalState$$1.trackingDerivation=prev}function changeDependenciesStateTo0$$1(derivation){if(derivation.dependenciesState===exports.IDerivationState.UP_TO_DATE)return;derivation.dependenciesState=exports.IDerivationState.UP_TO_DATE;var obs=derivation.observing;var i=obs.length;while(i--)obs[i].lowestObserverState=exports.IDerivationState.UP_TO_DATE}var persistentKeys=["mobxGuid","spyListeners","enforceActions","computedRequiresReaction","disableErrorBoundaries","runId","UNCHANGED"];var MobXGlobals$$1=function(){function MobXGlobals$$1(){this.version=5;this.UNCHANGED={};this.trackingDerivation=null;this.computationDepth=0;this.runId=0;this.mobxGuid=0;this.inBatch=0;this.pendingUnobservations=[];this.pendingReactions=[];this.isRunningReactions=false;this.allowStateChanges=true;this.enforceActions=false;this.spyListeners=[];this.globalReactionErrorHandlers=[];this.computedRequiresReaction=false;this.disableErrorBoundaries=false;this.suppressReactionErrors=false}return MobXGlobals$$1}();var canMergeGlobalState=true;var isolateCalled=false;var globalState$$1=function(){var global=getGlobal$$1();if(global.__mobxInstanceCount>0&&!global.__mobxGlobals)canMergeGlobalState=false;if(global.__mobxGlobals&&global.__mobxGlobals.version!==(new MobXGlobals$$1).version)canMergeGlobalState=false;if(!canMergeGlobalState){setTimeout(function(){if(!isolateCalled){fail$$1("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}},1);return new MobXGlobals$$1}else if(global.__mobxGlobals){global.__mobxInstanceCount+=1;if(!global.__mobxGlobals.UNCHANGED)global.__mobxGlobals.UNCHANGED={};return global.__mobxGlobals}else{global.__mobxInstanceCount=1;return global.__mobxGlobals=new MobXGlobals$$1}}();function isolateGlobalState$$1(){if(globalState$$1.pendingReactions.length||globalState$$1.inBatch||globalState$$1.isRunningReactions)fail$$1("isolateGlobalState should be called before MobX is running any reactions");isolateCalled=true;if(canMergeGlobalState){if(--getGlobal$$1().__mobxInstanceCount===0)getGlobal$$1().__mobxGlobals=undefined;globalState$$1=new MobXGlobals$$1}}function getGlobalState$$1(){return globalState$$1}function resetGlobalState$$1(){var defaultGlobals=new MobXGlobals$$1;for(var key in defaultGlobals)if(persistentKeys.indexOf(key)===-1)globalState$$1[key]=defaultGlobals[key];globalState$$1.allowStateChanges=!globalState$$1.enforceActions}function getGlobal$$1(){return typeof window!=="undefined"?window:global}function hasObservers$$1(observable$$1){return observable$$1.observers&&observable$$1.observers.size>0}function getObservers$$1(observable$$1){return observable$$1.observers}function addObserver$$1(observable$$1,node){observable$$1.observers.add(node);if(observable$$1.lowestObserverState>node.dependenciesState)observable$$1.lowestObserverState=node.dependenciesState}function removeObserver$$1(observable$$1,node){observable$$1.observers.delete(node);if(observable$$1.observers.size===0){queueForUnobservation$$1(observable$$1)}}function queueForUnobservation$$1(observable$$1){if(observable$$1.isPendingUnobservation===false){observable$$1.isPendingUnobservation=true;globalState$$1.pendingUnobservations.push(observable$$1)}}function startBatch$$1(){globalState$$1.inBatch++}function endBatch$$1(){if(--globalState$$1.inBatch===0){runReactions$$1();var list=globalState$$1.pendingUnobservations;for(var i=0;i<list.length;i++){var observable$$1=list[i];observable$$1.isPendingUnobservation=false;if(observable$$1.observers.size===0){if(observable$$1.isBeingObserved){observable$$1.isBeingObserved=false;observable$$1.onBecomeUnobserved()}if(observable$$1 instanceof ComputedValue$$1){observable$$1.suspend()}}}globalState$$1.pendingUnobservations=[]}}function reportObserved$$1(observable$$1){var derivation=globalState$$1.trackingDerivation;if(derivation!==null){if(derivation.runId!==observable$$1.lastAccessedBy){observable$$1.lastAccessedBy=derivation.runId;derivation.newObserving[derivation.unboundDepsCount++]=observable$$1;if(!observable$$1.isBeingObserved){observable$$1.isBeingObserved=true;observable$$1.onBecomeObserved()}}return true}else if(observable$$1.observers.size===0&&globalState$$1.inBatch>0){queueForUnobservation$$1(observable$$1)}return false}function propagateChanged$$1(observable$$1){if(observable$$1.lowestObserverState===exports.IDerivationState.STALE)return;observable$$1.lowestObserverState=exports.IDerivationState.STALE;observable$$1.observers.forEach(function(d){if(d.dependenciesState===exports.IDerivationState.UP_TO_DATE){if(d.isTracing!==TraceMode$$1.NONE){logTraceInfo(d,observable$$1)}d.onBecomeStale()}d.dependenciesState=exports.IDerivationState.STALE})}function propagateChangeConfirmed$$1(observable$$1){if(observable$$1.lowestObserverState===exports.IDerivationState.STALE)return;observable$$1.lowestObserverState=exports.IDerivationState.STALE;observable$$1.observers.forEach(function(d){if(d.dependenciesState===exports.IDerivationState.POSSIBLY_STALE)d.dependenciesState=exports.IDerivationState.STALE;else if(d.dependenciesState===exports.IDerivationState.UP_TO_DATE)observable$$1.lowestObserverState=exports.IDerivationState.UP_TO_DATE})}function propagateMaybeChanged$$1(observable$$1){if(observable$$1.lowestObserverState!==exports.IDerivationState.UP_TO_DATE)return;observable$$1.lowestObserverState=exports.IDerivationState.POSSIBLY_STALE;observable$$1.observers.forEach(function(d){if(d.dependenciesState===exports.IDerivationState.UP_TO_DATE){d.dependenciesState=exports.IDerivationState.POSSIBLY_STALE;if(d.isTracing!==TraceMode$$1.NONE){logTraceInfo(d,observable$$1)}d.onBecomeStale()}})}function logTraceInfo(derivation,observable$$1){console.log("[mobx.trace] '"+derivation.name+"' is invalidated due to a change in: '"+observable$$1.name+"'");if(derivation.isTracing===TraceMode$$1.BREAK){var lines=[];printDepTree(getDependencyTree$$1(derivation),lines,1);new Function("debugger;\n/*\nTracing '"+derivation.name+"'\n\nYou are entering this break point because derivation '"+derivation.name+"' is being traced and '"+observable$$1.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(derivation instanceof ComputedValue$$1?derivation.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+lines.join("\n")+"\n*/\n    ")()}}function printDepTree(tree,lines,depth){if(lines.length>=1e3){lines.push("(and many more)");return}lines.push(""+new Array(depth).join("\t")+tree.name);if(tree.dependencies)tree.dependencies.forEach(function(child){return printDepTree(child,lines,depth+1)})}var Reaction$$1=function(){function Reaction$$1(name,onInvalidate,errorHandler){if(name===void 0){name="Reaction@"+getNextId$$1()}this.name=name;this.onInvalidate=onInvalidate;this.errorHandler=errorHandler;this.observing=[];this.newObserving=[];this.dependenciesState=exports.IDerivationState.NOT_TRACKING;this.diffValue=0;this.runId=0;this.unboundDepsCount=0;this.__mapid="#"+getNextId$$1();this.isDisposed=false;this._isScheduled=false;this._isTrackPending=false;this._isRunning=false;this.isTracing=TraceMode$$1.NONE}Reaction$$1.prototype.onBecomeStale=function(){this.schedule()};Reaction$$1.prototype.schedule=function(){if(!this._isScheduled){this._isScheduled=true;globalState$$1.pendingReactions.push(this);runReactions$$1()}};Reaction$$1.prototype.isScheduled=function(){return this._isScheduled};Reaction$$1.prototype.runReaction=function(){if(!this.isDisposed){startBatch$$1();this._isScheduled=false;if(shouldCompute$$1(this)){this._isTrackPending=true;try{this.onInvalidate();if(this._isTrackPending&&isSpyEnabled$$1()&&process.env.NODE_ENV!=="production"){spyReport$$1({name:this.name,type:"scheduled-reaction"})}}catch(e){this.reportExceptionInDerivation(e)}}endBatch$$1()}};Reaction$$1.prototype.track=function(fn){startBatch$$1();var notify=isSpyEnabled$$1();var startTime;if(notify&&process.env.NODE_ENV!=="production"){startTime=Date.now();spyReportStart$$1({name:this.name,type:"reaction"})}this._isRunning=true;var result=trackDerivedFunction$$1(this,fn,undefined);this._isRunning=false;this._isTrackPending=false;if(this.isDisposed){clearObserving$$1(this)}if(isCaughtException$$1(result))this.reportExceptionInDerivation(result.cause);if(notify&&process.env.NODE_ENV!=="production"){spyReportEnd$$1({time:Date.now()-startTime})}endBatch$$1()};Reaction$$1.prototype.reportExceptionInDerivation=function(error){var _this=this;if(this.errorHandler){this.errorHandler(error,this);return}if(globalState$$1.disableErrorBoundaries)throw error;var message="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";if(globalState$$1.suppressReactionErrors){console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)")}else{console.error(message,error)}if(isSpyEnabled$$1()){spyReport$$1({type:"error",name:this.name,message:message,error:""+error})}globalState$$1.globalReactionErrorHandlers.forEach(function(f){return f(error,_this)})};Reaction$$1.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=true;if(!this._isRunning){startBatch$$1();clearObserving$$1(this);endBatch$$1()}}};Reaction$$1.prototype.getDisposer=function(){var r=this.dispose.bind(this);r[$mobx$$1]=this;return r};Reaction$$1.prototype.toString=function(){return"Reaction["+this.name+"]"};Reaction$$1.prototype.trace=function(enterBreakPoint){if(enterBreakPoint===void 0){enterBreakPoint=false}trace$$1(this,enterBreakPoint)};return Reaction$$1}();function onReactionError$$1(handler){globalState$$1.globalReactionErrorHandlers.push(handler);return function(){var idx=globalState$$1.globalReactionErrorHandlers.indexOf(handler);if(idx>=0)globalState$$1.globalReactionErrorHandlers.splice(idx,1)}}var MAX_REACTION_ITERATIONS=100;var reactionScheduler=function(f){return f()};function runReactions$$1(){if(globalState$$1.inBatch>0||globalState$$1.isRunningReactions)return;reactionScheduler(runReactionsHelper)}function runReactionsHelper(){globalState$$1.isRunningReactions=true;var allReactions=globalState$$1.pendingReactions;var iterations=0;while(allReactions.length>0){if(++iterations===MAX_REACTION_ITERATIONS){console.error("Reaction doesn't converge to a stable state after "+MAX_REACTION_ITERATIONS+" iterations."+(" Probably there is a cycle in the reactive function: "+allReactions[0]));allReactions.splice(0)}var remainingReactions=allReactions.splice(0);for(var i=0,l=remainingReactions.length;i<l;i++)remainingReactions[i].runReaction()}globalState$$1.isRunningReactions=false}var isReaction$$1=createInstanceofPredicate$$1("Reaction",Reaction$$1);function setReactionScheduler$$1(fn){var baseScheduler=reactionScheduler;reactionScheduler=function(f){return fn(function(){return baseScheduler(f)})}}function isSpyEnabled$$1(){return process.env.NODE_ENV!=="production"&&!!globalState$$1.spyListeners.length}function spyReport$$1(event){if(process.env.NODE_ENV==="production")return;if(!globalState$$1.spyListeners.length)return;var listeners=globalState$$1.spyListeners;for(var i=0,l=listeners.length;i<l;i++)listeners[i](event)}function spyReportStart$$1(event){if(process.env.NODE_ENV==="production")return;var change=__assign({},event,{spyReportStart:true});spyReport$$1(change)}var END_EVENT={spyReportEnd:true};function spyReportEnd$$1(change){if(process.env.NODE_ENV==="production")return;if(change)spyReport$$1(__assign({},change,{spyReportEnd:true}));else spyReport$$1(END_EVENT)}function spy$$1(listener){if(process.env.NODE_ENV==="production"){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}else{globalState$$1.spyListeners.push(listener);return once$$1(function(){globalState$$1.spyListeners=globalState$$1.spyListeners.filter(function(l){return l!==listener})})}}function dontReassignFields(){fail$$1(process.env.NODE_ENV!=="production"&&"@action fields are not reassignable")}function namedActionDecorator$$1(name){return function(target,prop,descriptor){if(descriptor){if(process.env.NODE_ENV!=="production"&&descriptor.get!==undefined){return fail$$1("@action cannot be used with getters")}if(descriptor.value){return{value:createAction$$1(name,descriptor.value),enumerable:false,configurable:true,writable:true}}var initializer_1=descriptor.initializer;return{enumerable:false,configurable:true,writable:true,initializer:function(){return createAction$$1(name,initializer_1.call(this))}}}return actionFieldDecorator$$1(name).apply(this,arguments)}}function actionFieldDecorator$$1(name){return function(target,prop,descriptor){Object.defineProperty(target,prop,{configurable:true,enumerable:false,get:function(){return undefined},set:function(value){addHiddenProp$$1(this,prop,action$$1(name,value))}})}}function boundActionDecorator$$1(target,propertyName,descriptor,applyToInstance){if(applyToInstance===true){defineBoundAction$$1(target,propertyName,descriptor.value);return null}if(descriptor){return{configurable:true,enumerable:false,get:function(){defineBoundAction$$1(this,propertyName,descriptor.value||descriptor.initializer.call(this));return this[propertyName]},set:dontReassignFields}}return{enumerable:false,configurable:true,set:function(v){defineBoundAction$$1(this,propertyName,v)},get:function(){return undefined}}}var action$$1=function action$$1(arg1,arg2,arg3,arg4){if(arguments.length===1&&typeof arg1==="function")return createAction$$1(arg1.name||"<unnamed action>",arg1);if(arguments.length===2&&typeof arg2==="function")return createAction$$1(arg1,arg2);if(arguments.length===1&&typeof arg1==="string")return namedActionDecorator$$1(arg1);if(arg4===true){addHiddenProp$$1(arg1,arg2,createAction$$1(arg1.name||arg2,arg3.value))}else{return namedActionDecorator$$1(arg2).apply(null,arguments)}};action$$1.bound=boundActionDecorator$$1;function runInAction$$1(arg1,arg2){var actionName=typeof arg1==="string"?arg1:arg1.name||"<unnamed action>";var fn=typeof arg1==="function"?arg1:arg2;if(process.env.NODE_ENV!=="production"){invariant$$1(typeof fn==="function"&&fn.length===0,"`runInAction` expects a function without arguments");if(typeof actionName!=="string"||!actionName)fail$$1("actions should have valid names, got: '"+actionName+"'")}return executeAction$$1(actionName,fn,this,undefined)}function isAction$$1(thing){return typeof thing==="function"&&thing.isMobxAction===true}function defineBoundAction$$1(target,propertyName,fn){addHiddenProp$$1(target,propertyName,createAction$$1(propertyName,fn.bind(target)))}function autorun$$1(view,opts){if(opts===void 0){opts=EMPTY_OBJECT$$1}if(process.env.NODE_ENV!=="production"){invariant$$1(typeof view==="function","Autorun expects a function as first argument");invariant$$1(isAction$$1(view)===false,"Autorun does not accept actions since actions are untrackable")}var name=opts&&opts.name||view.name||"Autorun@"+getNextId$$1();var runSync=!opts.scheduler&&!opts.delay;var reaction$$1;if(runSync){reaction$$1=new Reaction$$1(name,function(){this.track(reactionRunner)},opts.onError)}else{var scheduler_1=createSchedulerFromOptions(opts);var isScheduled_1=false;reaction$$1=new Reaction$$1(name,function(){if(!isScheduled_1){isScheduled_1=true;scheduler_1(function(){isScheduled_1=false;if(!reaction$$1.isDisposed)reaction$$1.track(reactionRunner)})}},opts.onError)}function reactionRunner(){view(reaction$$1)}reaction$$1.schedule();return reaction$$1.getDisposer()}var run=function(f){return f()};function createSchedulerFromOptions(opts){return opts.scheduler?opts.scheduler:opts.delay?function(f){return setTimeout(f,opts.delay)}:run}function reaction$$1(expression,effect,opts){if(opts===void 0){opts=EMPTY_OBJECT$$1}if(process.env.NODE_ENV!=="production"){invariant$$1(typeof expression==="function","First argument to reaction should be a function");invariant$$1(typeof opts==="object","Third argument of reactions should be an object")}var name=opts.name||"Reaction@"+getNextId$$1();var effectAction=action$$1(name,opts.onError?wrapErrorHandler(opts.onError,effect):effect);var runSync=!opts.scheduler&&!opts.delay;var scheduler=createSchedulerFromOptions(opts);var firstTime=true;var isScheduled=false;var value;var equals=opts.compareStructural?comparer$$1.structural:opts.equals||comparer$$1.default;var r=new Reaction$$1(name,function(){if(firstTime||runSync){reactionRunner()}else if(!isScheduled){isScheduled=true;scheduler(reactionRunner)}},opts.onError);function reactionRunner(){isScheduled=false;if(r.isDisposed)return;var changed=false;r.track(function(){var nextValue=expression(r);changed=firstTime||!equals(value,nextValue);value=nextValue});if(firstTime&&opts.fireImmediately)effectAction(value,r);if(!firstTime&&changed===true)effectAction(value,r);if(firstTime)firstTime=false}r.schedule();return r.getDisposer()}function wrapErrorHandler(errorHandler,baseFn){return function(){try{return baseFn.apply(this,arguments)}catch(e){errorHandler.call(this,e)}}}function onBecomeObserved$$1(thing,arg2,arg3){return interceptHook("onBecomeObserved",thing,arg2,arg3)}function onBecomeUnobserved$$1(thing,arg2,arg3){return interceptHook("onBecomeUnobserved",thing,arg2,arg3)}function interceptHook(hook,thing,arg2,arg3){var atom=typeof arg2==="string"?getAtom$$1(thing,arg2):getAtom$$1(thing);var cb=typeof arg2==="string"?arg3:arg2;var listenersKey=hook+"Listeners";if(atom[listenersKey]){atom[listenersKey].add(cb)}else{atom[listenersKey]=new Set([cb])}var orig=atom[hook];if(typeof orig!=="function")return fail$$1(process.env.NODE_ENV!=="production"&&"Not an atom that can be (un)observed");return function(){var hookListeners=atom[listenersKey];if(hookListeners){hookListeners.delete(cb);if(hookListeners.size===0){delete atom[listenersKey]}}}}function configure$$1(options){var enforceActions=options.enforceActions,computedRequiresReaction=options.computedRequiresReaction,disableErrorBoundaries=options.disableErrorBoundaries,reactionScheduler=options.reactionScheduler;if(options.isolateGlobalState===true){isolateGlobalState$$1()}if(enforceActions!==undefined){if(typeof enforceActions==="boolean"||enforceActions==="strict")deprecated$$1("Deprecated value for 'enforceActions', use 'false' => '\"never\"', 'true' => '\"observed\"', '\"strict\"' => \"'always'\" instead");var ea=void 0;switch(enforceActions){case true:case"observed":ea=true;break;case false:case"never":ea=false;break;case"strict":case"always":ea="strict";break;default:fail$$1("Invalid value for 'enforceActions': '"+enforceActions+"', expected 'never', 'always' or 'observed'")}globalState$$1.enforceActions=ea;globalState$$1.allowStateChanges=ea===true||ea==="strict"?false:true}if(computedRequiresReaction!==undefined){globalState$$1.computedRequiresReaction=!!computedRequiresReaction}if(disableErrorBoundaries!==undefined){if(disableErrorBoundaries===true)console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled.");globalState$$1.disableErrorBoundaries=!!disableErrorBoundaries}if(reactionScheduler){setReactionScheduler$$1(reactionScheduler)}}function decorate$$1(thing,decorators){process.env.NODE_ENV!=="production"&&invariant$$1(isPlainObject$$1(decorators),"Decorators should be a key value map");var target=typeof thing==="function"?thing.prototype:thing;var _loop_1=function(prop){var propertyDecorators=decorators[prop];if(!Array.isArray(propertyDecorators)){propertyDecorators=[propertyDecorators]}process.env.NODE_ENV!=="production"&&invariant$$1(propertyDecorators.every(function(decorator){return typeof decorator==="function"}),"Decorate: expected a decorator function or array of decorator functions for '"+prop+"'");var descriptor=Object.getOwnPropertyDescriptor(target,prop);var newDescriptor=propertyDecorators.reduce(function(accDescriptor,decorator){return decorator(target,prop,accDescriptor)},descriptor);if(newDescriptor)Object.defineProperty(target,prop,newDescriptor)};for(var prop in decorators){_loop_1(prop)}return thing}function extendObservable$$1(target,properties,decorators,options){if(process.env.NODE_ENV!=="production"){invariant$$1(arguments.length>=2&&arguments.length<=4,"'extendObservable' expected 2-4 arguments");invariant$$1(typeof target==="object","'extendObservable' expects an object as first argument");invariant$$1(!isObservableMap$$1(target),"'extendObservable' should not be used on maps, use map.merge instead")}options=asCreateObservableOptions$$1(options);var defaultDecorator=getDefaultDecoratorFromObjectOptions$$1(options);initializeInstance$$1(target);asObservableObject$$1(target,options.name,defaultDecorator.enhancer);if(properties)extendObservableObjectWithProperties$$1(target,properties,decorators,defaultDecorator);return target}function getDefaultDecoratorFromObjectOptions$$1(options){return options.defaultDecorator||(options.deep===false?refDecorator$$1:deepDecorator$$1)}function extendObservableObjectWithProperties$$1(target,properties,decorators,defaultDecorator){if(process.env.NODE_ENV!=="production"){invariant$$1(!isObservable$$1(properties),"Extending an object with another observable (object) is not supported. Please construct an explicit propertymap, using `toJS` if need. See issue #540");if(decorators)for(var key in decorators)if(!(key in properties))fail$$1("Trying to declare a decorator for unspecified property '"+key+"'")}startBatch$$1();try{for(var key in properties){var descriptor=Object.getOwnPropertyDescriptor(properties,key);if(process.env.NODE_ENV!=="production"){if(Object.getOwnPropertyDescriptor(target,key))fail$$1("'extendObservable' can only be used to introduce new properties. Use 'set' or 'decorate' instead. The property '"+key+"' already exists on '"+target+"'");if(isComputed$$1(descriptor.value))fail$$1("Passing a 'computed' as initial property value is no longer supported by extendObservable. Use a getter or decorator instead")}var decorator=decorators&&key in decorators?decorators[key]:descriptor.get?computedDecorator$$1:defaultDecorator;if(process.env.NODE_ENV!=="production"&&typeof decorator!=="function")fail$$1("Not a valid decorator for '"+key+"', got: "+decorator);var resultDescriptor=decorator(target,key,descriptor,true);if(resultDescriptor)Object.defineProperty(target,key,resultDescriptor)}}finally{endBatch$$1()}}function getDependencyTree$$1(thing,property){return nodeToDependencyTree(getAtom$$1(thing,property))}function nodeToDependencyTree(node){var result={name:node.name};if(node.observing&&node.observing.length>0)result.dependencies=unique$$1(node.observing).map(nodeToDependencyTree);return result}function getObserverTree$$1(thing,property){return nodeToObserverTree(getAtom$$1(thing,property))}function nodeToObserverTree(node){var result={name:node.name};if(hasObservers$$1(node))result.observers=Array.from(getObservers$$1(node)).map(nodeToObserverTree);return result}var generatorId=0;function flow$$1(generator){if(arguments.length!==1)fail$$1(process.env.NODE_ENV&&"Flow expects one 1 argument and cannot be used as decorator");var name=generator.name||"<unnamed flow>";return function(){var ctx=this;var args=arguments;var runId=++generatorId;var gen=action$$1(name+" - runid: "+runId+" - init",generator).apply(ctx,args);var rejector;var pendingPromise=undefined;var promise=new Promise(function(resolve,reject){var stepId=0;rejector=reject;function onFulfilled(res){pendingPromise=undefined;var ret;try{ret=action$$1(name+" - runid: "+runId+" - yield "+stepId++,gen.next).call(gen,res)}catch(e){return reject(e)}next(ret)}function onRejected(err){pendingPromise=undefined;var ret;try{ret=action$$1(name+" - runid: "+runId+" - yield "+stepId++,gen.throw).call(gen,err)}catch(e){return reject(e)}next(ret)}function next(ret){if(ret&&typeof ret.then==="function"){ret.then(next,reject);return}if(ret.done)return resolve(ret.value);pendingPromise=Promise.resolve(ret.value);return pendingPromise.then(onFulfilled,onRejected)}onFulfilled(undefined)});promise.cancel=action$$1(name+" - runid: "+runId+" - cancel",function(){try{if(pendingPromise)cancelPromise(pendingPromise);var res=gen.return();var yieldedPromise=Promise.resolve(res.value);yieldedPromise.then(noop$$1,noop$$1);cancelPromise(yieldedPromise);rejector(new Error("FLOW_CANCELLED"))}catch(e){rejector(e)}});return promise}}function cancelPromise(promise){if(typeof promise.cancel==="function")promise.cancel()}function interceptReads$$1(thing,propOrHandler,handler){var target;if(isObservableMap$$1(thing)||isObservableArray$$1(thing)||isObservableValue$$1(thing)){target=getAdministration$$1(thing)}else if(isObservableObject$$1(thing)){if(typeof propOrHandler!=="string")return fail$$1(process.env.NODE_ENV!=="production"&&"InterceptReads can only be used with a specific property, not with an object in general");target=getAdministration$$1(thing,propOrHandler)}else{return fail$$1(process.env.NODE_ENV!=="production"&&"Expected observable map, object or array as first array")}if(target.dehancer!==undefined)return fail$$1(process.env.NODE_ENV!=="production"&&"An intercept reader was already established");target.dehancer=typeof propOrHandler==="function"?propOrHandler:handler;return function(){target.dehancer=undefined}}function intercept$$1(thing,propOrHandler,handler){if(typeof handler==="function")return interceptProperty(thing,propOrHandler,handler);else return interceptInterceptable(thing,propOrHandler)}function interceptInterceptable(thing,handler){return getAdministration$$1(thing).intercept(handler)}function interceptProperty(thing,property,handler){return getAdministration$$1(thing,property).intercept(handler)}function _isComputed$$1(value,property){if(value===null||value===undefined)return false;if(property!==undefined){if(isObservableObject$$1(value)===false)return false;if(!value[$mobx$$1].values.has(property))return false;var atom=getAtom$$1(value,property);return isComputedValue$$1(atom)}return isComputedValue$$1(value)}function isComputed$$1(value){if(arguments.length>1)return fail$$1(process.env.NODE_ENV!=="production"&&"isComputed expects only 1 argument. Use isObservableProp to inspect the observability of a property");return _isComputed$$1(value)}function isComputedProp$$1(value,propName){if(typeof propName!=="string")return fail$$1(process.env.NODE_ENV!=="production"&&"isComputed expected a property name as second argument");return _isComputed$$1(value,propName)}function _isObservable(value,property){if(value===null||value===undefined)return false;if(property!==undefined){if(process.env.NODE_ENV!=="production"&&(isObservableMap$$1(value)||isObservableArray$$1(value)))return fail$$1("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead.");if(isObservableObject$$1(value)){return value[$mobx$$1].values.has(property)}return false}return isObservableObject$$1(value)||!!value[$mobx$$1]||isAtom$$1(value)||isReaction$$1(value)||isComputedValue$$1(value)}function isObservable$$1(value){if(arguments.length!==1)fail$$1(process.env.NODE_ENV!=="production"&&"isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property");return _isObservable(value)}function isObservableProp$$1(value,propName){if(typeof propName!=="string")return fail$$1(process.env.NODE_ENV!=="production"&&"expected a property name as second argument");return _isObservable(value,propName)}function keys$$1(obj){if(isObservableObject$$1(obj)){return obj[$mobx$$1].getKeys()}if(isObservableMap$$1(obj)){return Array.from(obj.keys())}if(isObservableSet$$1(obj)){return Array.from(obj.keys())}if(isObservableArray$$1(obj)){return obj.map(function(_,index){return index})}return fail$$1(process.env.NODE_ENV!=="production"&&"'keys()' can only be used on observable objects, arrays, sets and maps")}function values$$1(obj){if(isObservableObject$$1(obj)){return keys$$1(obj).map(function(key){return obj[key]})}if(isObservableMap$$1(obj)){return keys$$1(obj).map(function(key){return obj.get(key)})}if(isObservableSet$$1(obj)){return Array.from(obj.values())}if(isObservableArray$$1(obj)){return obj.slice()}return fail$$1(process.env.NODE_ENV!=="production"&&"'values()' can only be used on observable objects, arrays, sets and maps")}function entries$$1(obj){if(isObservableObject$$1(obj)){return keys$$1(obj).map(function(key){return[key,obj[key]]})}if(isObservableMap$$1(obj)){return keys$$1(obj).map(function(key){return[key,obj.get(key)]})}if(isObservableSet$$1(obj)){return Array.from(obj.entries())}if(isObservableArray$$1(obj)){return obj.map(function(key,index){return[index,key]})}return fail$$1(process.env.NODE_ENV!=="production"&&"'entries()' can only be used on observable objects, arrays and maps")}function set$$1(obj,key,value){if(arguments.length===2){startBatch$$1();var values_1=key;try{for(var key_1 in values_1)set$$1(obj,key_1,values_1[key_1])}finally{endBatch$$1()}return}if(isObservableObject$$1(obj)){var adm=obj[$mobx$$1];var existingObservable=adm.values.get(key);if(existingObservable){adm.write(key,value)}else{adm.addObservableProp(key,value,adm.defaultEnhancer)}}else if(isObservableMap$$1(obj)){obj.set(key,value)}else if(isObservableArray$$1(obj)){if(typeof key!=="number")key=parseInt(key,10);invariant$$1(key>=0,"Not a valid index: '"+key+"'");startBatch$$1();if(key>=obj.length)obj.length=key+1;obj[key]=value;endBatch$$1()}else{return fail$$1(process.env.NODE_ENV!=="production"&&"'set()' can only be used on observable objects, arrays and maps")}}function remove$$1(obj,key){if(isObservableObject$$1(obj)){obj[$mobx$$1].remove(key)}else if(isObservableMap$$1(obj)){obj.delete(key)}else if(isObservableSet$$1(obj)){obj.delete(key)}else if(isObservableArray$$1(obj)){if(typeof key!=="number")key=parseInt(key,10);invariant$$1(key>=0,"Not a valid index: '"+key+"'");obj.splice(key,1)}else{return fail$$1(process.env.NODE_ENV!=="production"&&"'remove()' can only be used on observable objects, arrays and maps")}}function has$$1(obj,key){if(isObservableObject$$1(obj)){var adm=getAdministration$$1(obj);return adm.has(key)}else if(isObservableMap$$1(obj)){return obj.has(key)}else if(isObservableSet$$1(obj)){return obj.has(key)}else if(isObservableArray$$1(obj)){return key>=0&&key<obj.length}else{return fail$$1(process.env.NODE_ENV!=="production"&&"'has()' can only be used on observable objects, arrays and maps")}}function get$$1(obj,key){if(!has$$1(obj,key))return undefined;if(isObservableObject$$1(obj)){return obj[key]}else if(isObservableMap$$1(obj)){return obj.get(key)}else if(isObservableArray$$1(obj)){return obj[key]}else{return fail$$1(process.env.NODE_ENV!=="production"&&"'get()' can only be used on observable objects, arrays and maps")}}function observe$$1(thing,propOrCb,cbOrFire,fireImmediately){if(typeof cbOrFire==="function")return observeObservableProperty(thing,propOrCb,cbOrFire,fireImmediately);else return observeObservable(thing,propOrCb,cbOrFire)}function observeObservable(thing,listener,fireImmediately){return getAdministration$$1(thing).observe(listener,fireImmediately)}function observeObservableProperty(thing,property,listener,fireImmediately){return getAdministration$$1(thing,property).observe(listener,fireImmediately)}var defaultOptions={detectCycles:true,exportMapsAsObjects:true,recurseEverything:false};function cache(map,key,value,options){if(options.detectCycles)map.set(key,value);return value}function toJSHelper(source,options,__alreadySeen){if(!options.recurseEverything&&!isObservable$$1(source))return source;if(typeof source!=="object")return source;if(source===null)return null;if(source instanceof Date)return source;if(isObservableValue$$1(source))return toJSHelper(source.get(),options,__alreadySeen);if(isObservable$$1(source))keys$$1(source);var detectCycles=options.detectCycles===true;if(detectCycles&&source!==null&&__alreadySeen.has(source)){return __alreadySeen.get(source)}if(isObservableArray$$1(source)||Array.isArray(source)){var res_1=cache(__alreadySeen,source,[],options);var toAdd=source.map(function(value){return toJSHelper(value,options,__alreadySeen)});res_1.length=toAdd.length;for(var i=0,l=toAdd.length;i<l;i++)res_1[i]=toAdd[i];return res_1}if(isObservableSet$$1(source)||Object.getPrototypeOf(source)===Set.prototype){if(options.exportMapsAsObjects===false){var res_2=cache(__alreadySeen,source,new Set,options);source.forEach(function(value){res_2.add(toJSHelper(value,options,__alreadySeen))});return res_2}else{var res_3=cache(__alreadySeen,source,[],options);source.forEach(function(value){res_3.push(toJSHelper(value,options,__alreadySeen))});return res_3}}if(isObservableMap$$1(source)||Object.getPrototypeOf(source)===Map.prototype){if(options.exportMapsAsObjects===false){var res_4=cache(__alreadySeen,source,new Map,options);source.forEach(function(value,key){res_4.set(key,toJSHelper(value,options,__alreadySeen))});return res_4}else{var res_5=cache(__alreadySeen,source,{},options);source.forEach(function(value,key){res_5[key]=toJSHelper(value,options,__alreadySeen)});return res_5}}var res=cache(__alreadySeen,source,{},options);for(var key in source){res[key]=toJSHelper(source[key],options,__alreadySeen)}return res}function toJS$$1(source,options){if(typeof options==="boolean")options={detectCycles:options};if(!options)options=defaultOptions;options.detectCycles=options.detectCycles===undefined?options.recurseEverything===true:options.detectCycles===true;var __alreadySeen;if(options.detectCycles)__alreadySeen=new Map;return toJSHelper(source,options,__alreadySeen)}function trace$$1(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}var enterBreakPoint=false;if(typeof args[args.length-1]==="boolean")enterBreakPoint=args.pop();var derivation=getAtomFromArgs(args);if(!derivation){return fail$$1(process.env.NODE_ENV!=="production"&&"'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly")}if(derivation.isTracing===TraceMode$$1.NONE){console.log("[mobx.trace] '"+derivation.name+"' tracing enabled")}derivation.isTracing=enterBreakPoint?TraceMode$$1.BREAK:TraceMode$$1.LOG}function getAtomFromArgs(args){switch(args.length){case 0:return globalState$$1.trackingDerivation;case 1:return getAtom$$1(args[0]);case 2:return getAtom$$1(args[0],args[1])}}function transaction$$1(action$$1,thisArg){if(thisArg===void 0){thisArg=undefined}startBatch$$1();try{return action$$1.apply(thisArg)}finally{endBatch$$1()}}function when$$1(predicate,arg1,arg2){if(arguments.length===1||arg1&&typeof arg1==="object")return whenPromise(predicate,arg1);return _when(predicate,arg1,arg2||{})}function _when(predicate,effect,opts){var timeoutHandle;if(typeof opts.timeout==="number"){timeoutHandle=setTimeout(function(){if(!disposer[$mobx$$1].isDisposed){disposer();var error=new Error("WHEN_TIMEOUT");if(opts.onError)opts.onError(error);else throw error}},opts.timeout)}opts.name=opts.name||"When@"+getNextId$$1();var effectAction=createAction$$1(opts.name+"-effect",effect);var disposer=autorun$$1(function(r){if(predicate()){r.dispose();if(timeoutHandle)clearTimeout(timeoutHandle);effectAction()}},opts);return disposer}function whenPromise(predicate,opts){if(process.env.NODE_ENV!=="production"&&opts&&opts.onError)return fail$$1("the options 'onError' and 'promise' cannot be combined");var cancel;var res=new Promise(function(resolve,reject){var disposer=_when(predicate,resolve,__assign({},opts,{onError:reject}));cancel=function(){disposer();reject("WHEN_CANCELLED")}});res.cancel=cancel;return res}function getAdm(target){return target[$mobx$$1]}var objectProxyTraps={has:function(target,name){if(name===$mobx$$1||name==="constructor"||name===mobxDidRunLazyInitializersSymbol$$1)return true;var adm=getAdm(target);if(typeof name==="string")return adm.has(name);return name in target},get:function(target,name){if(name===$mobx$$1||name==="constructor"||name===mobxDidRunLazyInitializersSymbol$$1)return target[name];var adm=getAdm(target);var observable$$1=adm.values.get(name);if(observable$$1 instanceof Atom$$1){var result=observable$$1.get();if(result===undefined){adm.has(name)}return result}if(typeof name==="string")adm.has(name);return target[name]},set:function(target,name,value){if(typeof name!=="string")return false;set$$1(target,name,value);return true},deleteProperty:function(target,name){if(typeof name!=="string")return false;var adm=getAdm(target);adm.remove(name);return true},ownKeys:function(target){var adm=getAdm(target);adm.keysAtom.reportObserved();return Reflect.ownKeys(target)},preventExtensions:function(target){fail$$1("Dynamic observable objects cannot be frozen");return false}};function createDynamicObservableObject$$1(base){var proxy=new Proxy(base,objectProxyTraps);base[$mobx$$1].proxy=proxy;return proxy}function hasInterceptors$$1(interceptable){return interceptable.interceptors!==undefined&&interceptable.interceptors.length>0}function registerInterceptor$$1(interceptable,handler){var interceptors=interceptable.interceptors||(interceptable.interceptors=[]);interceptors.push(handler);return once$$1(function(){var idx=interceptors.indexOf(handler);if(idx!==-1)interceptors.splice(idx,1)})}function interceptChange$$1(interceptable,change){var prevU=untrackedStart$$1();try{var interceptors=interceptable.interceptors;if(interceptors)for(var i=0,l=interceptors.length;i<l;i++){change=interceptors[i](change);invariant$$1(!change||change.type,"Intercept handlers should return nothing or a change object");if(!change)break}return change}finally{untrackedEnd$$1(prevU)}}function hasListeners$$1(listenable){return listenable.changeListeners!==undefined&&listenable.changeListeners.length>0}function registerListener$$1(listenable,handler){var listeners=listenable.changeListeners||(listenable.changeListeners=[]);listeners.push(handler);return once$$1(function(){var idx=listeners.indexOf(handler);if(idx!==-1)listeners.splice(idx,1)})}function notifyListeners$$1(listenable,change){var prevU=untrackedStart$$1();var listeners=listenable.changeListeners;if(!listeners)return;listeners=listeners.slice();for(var i=0,l=listeners.length;i<l;i++){listeners[i](change)}untrackedEnd$$1(prevU)}var MAX_SPLICE_SIZE=1e4;var arrayTraps={get:function(target,name){if(name===$mobx$$1)return target[$mobx$$1];if(name==="length")return target[$mobx$$1].getArrayLength();if(typeof name==="number"){return arrayExtensions.get.call(target,name)}if(typeof name==="string"&&!isNaN(name)){return arrayExtensions.get.call(target,parseInt(name))}if(arrayExtensions.hasOwnProperty(name)){return arrayExtensions[name]}return target[name]},set:function(target,name,value){if(name==="length"){target[$mobx$$1].setArrayLength(value);return true}if(typeof name==="number"){arrayExtensions.set.call(target,name,value);return true}if(!isNaN(name)){arrayExtensions.set.call(target,parseInt(name),value);return true}return false},preventExtensions:function(target){fail$$1("Observable arrays cannot be frozen");return false}};function createObservableArray$$1(initialValues,enhancer,name,owned){if(name===void 0){name="ObservableArray@"+getNextId$$1()}if(owned===void 0){owned=false}var adm=new ObservableArrayAdministration(name,enhancer,owned);addHiddenFinalProp$$1(adm.values,$mobx$$1,adm);var proxy=new Proxy(adm.values,arrayTraps);adm.proxy=proxy;if(initialValues&&initialValues.length){var prev=allowStateChangesStart$$1(true);adm.spliceWithArray(0,0,initialValues);allowStateChangesEnd$$1(prev)}return proxy}var ObservableArrayAdministration=function(){function ObservableArrayAdministration(name,enhancer,owned){this.owned=owned;this.values=[];this.proxy=undefined;this.lastKnownLength=0;this.atom=new Atom$$1(name||"ObservableArray@"+getNextId$$1());this.enhancer=function(newV,oldV){return enhancer(newV,oldV,name+"[..]")}}ObservableArrayAdministration.prototype.dehanceValue=function(value){if(this.dehancer!==undefined)return this.dehancer(value);return value};ObservableArrayAdministration.prototype.dehanceValues=function(values$$1){if(this.dehancer!==undefined&&values$$1.length>0)return values$$1.map(this.dehancer);return values$$1};ObservableArrayAdministration.prototype.intercept=function(handler){return registerInterceptor$$1(this,handler)};ObservableArrayAdministration.prototype.observe=function(listener,fireImmediately){if(fireImmediately===void 0){fireImmediately=false}if(fireImmediately){listener({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0})}return registerListener$$1(this,listener)};ObservableArrayAdministration.prototype.getArrayLength=function(){this.atom.reportObserved();return this.values.length};ObservableArrayAdministration.prototype.setArrayLength=function(newLength){if(typeof newLength!=="number"||newLength<0)throw new Error("[mobx.array] Out of range: "+newLength);var currentLength=this.values.length;if(newLength===currentLength)return;else if(newLength>currentLength){var newItems=new Array(newLength-currentLength);for(var i=0;i<newLength-currentLength;i++)newItems[i]=undefined;this.spliceWithArray(currentLength,0,newItems)}else this.spliceWithArray(newLength,currentLength-newLength)};ObservableArrayAdministration.prototype.updateArrayLength=function(oldLength,delta){if(oldLength!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=delta};ObservableArrayAdministration.prototype.spliceWithArray=function(index,deleteCount,newItems){var _this=this;checkIfStateModificationsAreAllowed$$1(this.atom);var length=this.values.length;if(index===undefined)index=0;else if(index>length)index=length;else if(index<0)index=Math.max(0,length+index);if(arguments.length===1)deleteCount=length-index;else if(deleteCount===undefined||deleteCount===null)deleteCount=0;else deleteCount=Math.max(0,Math.min(deleteCount,length-index));if(newItems===undefined)newItems=EMPTY_ARRAY$$1;if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{object:this.proxy,type:"splice",index:index,removedCount:deleteCount,added:newItems});if(!change)return EMPTY_ARRAY$$1;deleteCount=change.removedCount;newItems=change.added}newItems=newItems.length===0?newItems:newItems.map(function(v){return _this.enhancer(v,undefined)});if(process.env.NODE_ENV!=="production"){var lengthDelta=newItems.length-deleteCount;this.updateArrayLength(length,lengthDelta)}var res=this.spliceItemsIntoValues(index,deleteCount,newItems);if(deleteCount!==0||newItems.length!==0)this.notifyArraySplice(index,newItems,res);return this.dehanceValues(res)};ObservableArrayAdministration.prototype.spliceItemsIntoValues=function(index,deleteCount,newItems){var _a;if(newItems.length<MAX_SPLICE_SIZE){return(_a=this.values).splice.apply(_a,__spread([index,deleteCount],newItems))}else{var res=this.values.slice(index,index+deleteCount);this.values=this.values.slice(0,index).concat(newItems,this.values.slice(index+deleteCount));return res}};ObservableArrayAdministration.prototype.notifyArrayChildUpdate=function(index,newValue,oldValue){var notifySpy=!this.owned&&isSpyEnabled$$1();var notify=hasListeners$$1(this);var change=notify||notifySpy?{object:this.proxy,type:"update",index:index,newValue:newValue,oldValue:oldValue}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.atom.name}));this.atom.reportChanged();if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()};ObservableArrayAdministration.prototype.notifyArraySplice=function(index,added,removed){var notifySpy=!this.owned&&isSpyEnabled$$1();var notify=hasListeners$$1(this);var change=notify||notifySpy?{object:this.proxy,type:"splice",index:index,removed:removed,added:added,removedCount:removed.length,addedCount:added.length}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.atom.name}));this.atom.reportChanged();if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()};return ObservableArrayAdministration}();var arrayExtensions={intercept:function(handler){return this[$mobx$$1].intercept(handler)},observe:function(listener,fireImmediately){if(fireImmediately===void 0){fireImmediately=false}var adm=this[$mobx$$1];return adm.observe(listener,fireImmediately)},clear:function(){return this.splice(0)},replace:function(newItems){var adm=this[$mobx$$1];return adm.spliceWithArray(0,adm.values.length,newItems)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(index,deleteCount){var newItems=[];for(var _i=2;_i<arguments.length;_i++){newItems[_i-2]=arguments[_i]}var adm=this[$mobx$$1];switch(arguments.length){case 0:return[];case 1:return adm.spliceWithArray(index);case 2:return adm.spliceWithArray(index,deleteCount)}return adm.spliceWithArray(index,deleteCount,newItems)},spliceWithArray:function(index,deleteCount,newItems){var adm=this[$mobx$$1];return adm.spliceWithArray(index,deleteCount,newItems)},push:function(){var items=[];for(var _i=0;_i<arguments.length;_i++){items[_i]=arguments[_i]}var adm=this[$mobx$$1];adm.spliceWithArray(adm.values.length,0,items);return adm.values.length},pop:function(){return this.splice(Math.max(this[$mobx$$1].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){var items=[];for(var _i=0;_i<arguments.length;_i++){items[_i]=arguments[_i]}var adm=this[$mobx$$1];adm.spliceWithArray(0,0,items);return adm.values.length},reverse:function(){if(process.env.NODE_ENV!=="production"){console.warn("[mobx] `observableArray.reverse()` will not update the array in place. Use `observableArray.slice().reverse()` to supress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().reverse())` to reverse & update in place")}var clone=this.slice();return clone.reverse.apply(clone,arguments)},sort:function(compareFn){if(process.env.NODE_ENV!=="production"){console.warn("[mobx] `observableArray.sort()` will not update the array in place. Use `observableArray.slice().sort()` to supress this warning and perform the operation on a copy, or `observableArray.replace(observableArray.slice().sort())` to sort & update in place")}var clone=this.slice();return clone.sort.apply(clone,arguments)},remove:function(value){var adm=this[$mobx$$1];var idx=adm.dehanceValues(adm.values).indexOf(value);if(idx>-1){this.splice(idx,1);return true}return false},get:function(index){var adm=this[$mobx$$1];if(adm){if(index<adm.values.length){adm.atom.reportObserved();return adm.dehanceValue(adm.values[index])}console.warn("[mobx.array] Attempt to read an array index ("+index+") that is out of bounds ("+adm.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}return undefined},set:function(index,newValue){var adm=this[$mobx$$1];var values$$1=adm.values;if(index<values$$1.length){checkIfStateModificationsAreAllowed$$1(adm.atom);var oldValue=values$$1[index];if(hasInterceptors$$1(adm)){var change=interceptChange$$1(adm,{type:"update",object:this,index:index,newValue:newValue});if(!change)return;newValue=change.newValue}newValue=adm.enhancer(newValue,oldValue);var changed=newValue!==oldValue;if(changed){values$$1[index]=newValue;adm.notifyArrayChildUpdate(index,newValue,oldValue)}}else if(index===values$$1.length){adm.spliceWithArray(index,0,[newValue])}else{throw new Error("[mobx.array] Index out of bounds, "+index+" is larger than "+values$$1.length)}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach(function(funcName){arrayExtensions[funcName]=function(){var adm=this[$mobx$$1];adm.atom.reportObserved();var res=adm.dehanceValues(adm.values);return res[funcName].apply(res,arguments)}});var isObservableArrayAdministration=createInstanceofPredicate$$1("ObservableArrayAdministration",ObservableArrayAdministration);function isObservableArray$$1(thing){return isObject$$1(thing)&&isObservableArrayAdministration(thing[$mobx$$1])}var _a;var ObservableMapMarker={};var ObservableMap$$1=function(){function ObservableMap$$1(initialData,enhancer,name){if(enhancer===void 0){enhancer=deepEnhancer$$1}if(name===void 0){name="ObservableMap@"+getNextId$$1()}this.enhancer=enhancer;this.name=name;this[_a]=ObservableMapMarker;this._keysAtom=createAtom$$1(this.name+".keys()");this[Symbol.toStringTag]="Map";if(typeof Map!=="function"){throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js")}this._data=new Map;this._hasMap=new Map;this.merge(initialData)}ObservableMap$$1.prototype._has=function(key){return this._data.has(key)};ObservableMap$$1.prototype.has=function(key){if(this._hasMap.has(key))return this._hasMap.get(key).get();return this._updateHasMapEntry(key,false).get()};ObservableMap$$1.prototype.set=function(key,value){var hasKey=this._has(key);if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{type:hasKey?"update":"add",object:this,newValue:value,name:key});if(!change)return this;value=change.newValue}if(hasKey){this._updateValue(key,value)}else{this._addValue(key,value)}return this};ObservableMap$$1.prototype.delete=function(key){var _this=this;if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{type:"delete",object:this,name:key});if(!change)return false}if(this._has(key)){var notifySpy=isSpyEnabled$$1();var notify=hasListeners$$1(this);var change=notify||notifySpy?{type:"delete",object:this,oldValue:this._data.get(key).value,name:key}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.name,key:key}));transaction$$1(function(){_this._keysAtom.reportChanged();_this._updateHasMapEntry(key,false);var observable$$1=_this._data.get(key);observable$$1.setNewValue(undefined);_this._data.delete(key)});if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1();return true}return false};ObservableMap$$1.prototype._updateHasMapEntry=function(key,value){var entry=this._hasMap.get(key);if(entry){entry.setNewValue(value)}else{entry=new ObservableValue$$1(value,referenceEnhancer$$1,this.name+"."+key+"?",false);this._hasMap.set(key,entry)}return entry};ObservableMap$$1.prototype._updateValue=function(key,newValue){var observable$$1=this._data.get(key);newValue=observable$$1.prepareNewValue(newValue);if(newValue!==globalState$$1.UNCHANGED){var notifySpy=isSpyEnabled$$1();var notify=hasListeners$$1(this);var change=notify||notifySpy?{type:"update",object:this,oldValue:observable$$1.value,name:key,newValue:newValue}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.name,key:key}));observable$$1.setNewValue(newValue);if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()}};ObservableMap$$1.prototype._addValue=function(key,newValue){var _this=this;checkIfStateModificationsAreAllowed$$1(this._keysAtom);transaction$$1(function(){var observable$$1=new ObservableValue$$1(newValue,_this.enhancer,_this.name+"."+key,false);_this._data.set(key,observable$$1);newValue=observable$$1.value;_this._updateHasMapEntry(key,true);_this._keysAtom.reportChanged()});var notifySpy=isSpyEnabled$$1();var notify=hasListeners$$1(this);var change=notify||notifySpy?{type:"add",object:this,name:key,newValue:newValue}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.name,key:key}));if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()};ObservableMap$$1.prototype.get=function(key){if(this.has(key))return this.dehanceValue(this._data.get(key).get());return this.dehanceValue(undefined)};ObservableMap$$1.prototype.dehanceValue=function(value){if(this.dehancer!==undefined){return this.dehancer(value)}return value};ObservableMap$$1.prototype.keys=function(){this._keysAtom.reportObserved();return this._data.keys()};ObservableMap$$1.prototype.values=function(){var self=this;var nextIndex=0;var keys$$1=Array.from(this.keys());return makeIterable({next:function(){return nextIndex<keys$$1.length?{value:self.get(keys$$1[nextIndex++]),done:false}:{done:true}}})};ObservableMap$$1.prototype.entries=function(){var self=this;var nextIndex=0;var keys$$1=Array.from(this.keys());return makeIterable({next:function(){if(nextIndex<keys$$1.length){var key=keys$$1[nextIndex++];return{value:[key,self.get(key)],done:false}}return{done:true}}})};ObservableMap$$1.prototype[(_a=$mobx$$1,Symbol.iterator)]=function(){return this.entries()};ObservableMap$$1.prototype.forEach=function(callback,thisArg){var e_1,_a;try{for(var _b=__values(this),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read(_c.value,2),key=_d[0],value=_d[1];callback.call(thisArg,value,key,this)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}};ObservableMap$$1.prototype.merge=function(other){var _this=this;if(isObservableMap$$1(other)){other=other.toJS()}transaction$$1(function(){if(isPlainObject$$1(other))Object.keys(other).forEach(function(key){return _this.set(key,other[key])});else if(Array.isArray(other))other.forEach(function(_a){var _b=__read(_a,2),key=_b[0],value=_b[1];return _this.set(key,value)});else if(isES6Map$$1(other)){if(other.constructor!==Map)return fail$$1("Cannot initialize from classes that inherit from Map: "+other.constructor.name);other.forEach(function(value,key){return _this.set(key,value)})}else if(other!==null&&other!==undefined)fail$$1("Cannot initialize map from "+other)});return this};ObservableMap$$1.prototype.clear=function(){var _this=this;transaction$$1(function(){untracked$$1(function(){var e_2,_a;try{for(var _b=__values(_this.keys()),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value;_this.delete(key)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_2)throw e_2.error}}})})};ObservableMap$$1.prototype.replace=function(values$$1){var _this=this;transaction$$1(function(){var newKeys=getMapLikeKeys$$1(values$$1);var oldKeys=Array.from(_this.keys());var missingKeys=oldKeys.filter(function(k){return newKeys.indexOf(k)===-1});missingKeys.forEach(function(k){return _this.delete(k)});_this.merge(values$$1)});return this};Object.defineProperty(ObservableMap$$1.prototype,"size",{get:function(){this._keysAtom.reportObserved();return this._data.size},enumerable:true,configurable:true});ObservableMap$$1.prototype.toPOJO=function(){var e_3,_a;var res={};try{for(var _b=__values(this),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read(_c.value,2),key=_d[0],value=_d[1];res[""+key]=value}}catch(e_3_1){e_3={error:e_3_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_3)throw e_3.error}}return res};ObservableMap$$1.prototype.toJS=function(){return new Map(this)};ObservableMap$$1.prototype.toJSON=function(){return this.toPOJO()};ObservableMap$$1.prototype.toString=function(){var _this=this;return this.name+"[{ "+Array.from(this.keys()).map(function(key){return key+": "+(""+_this.get(key))}).join(", ")+" }]"};ObservableMap$$1.prototype.observe=function(listener,fireImmediately){process.env.NODE_ENV!=="production"&&invariant$$1(fireImmediately!==true,"`observe` doesn't support fireImmediately=true in combination with maps.");return registerListener$$1(this,listener)};ObservableMap$$1.prototype.intercept=function(handler){return registerInterceptor$$1(this,handler)};return ObservableMap$$1}();var isObservableMap$$1=createInstanceofPredicate$$1("ObservableMap",ObservableMap$$1);var _a$1;var ObservableSetMarker={};var ObservableSet$$1=function(){function ObservableSet$$1(initialData,enhancer,name){if(enhancer===void 0){enhancer=deepEnhancer$$1}if(name===void 0){name="ObservableSet@"+getNextId$$1()}this.name=name;this[_a$1]=ObservableSetMarker;this._data=new Set;this._atom=createAtom$$1(this.name);this[Symbol.toStringTag]="Set";if(typeof Set!=="function"){throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js")}this.enhancer=function(newV,oldV){return enhancer(newV,oldV,name)};if(initialData){this.replace(initialData)}}ObservableSet$$1.prototype.dehanceValue=function(value){if(this.dehancer!==undefined){return this.dehancer(value)}return value};ObservableSet$$1.prototype.clear=function(){var _this=this;transaction$$1(function(){untracked$$1(function(){var e_1,_a;try{for(var _b=__values(_this._data.values()),_c=_b.next();!_c.done;_c=_b.next()){var value=_c.value;_this.delete(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}})})};ObservableSet$$1.prototype.forEach=function(callbackFn,thisArg){var e_2,_a;try{for(var _b=__values(this),_c=_b.next();!_c.done;_c=_b.next()){var value=_c.value;callbackFn.call(thisArg,value,value,this)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_2)throw e_2.error}}};Object.defineProperty(ObservableSet$$1.prototype,"size",{get:function(){this._atom.reportObserved();return this._data.size},enumerable:true,configurable:true});ObservableSet$$1.prototype.add=function(value){var _this=this;checkIfStateModificationsAreAllowed$$1(this._atom);if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{type:"add",object:this,newValue:value});if(!change)return this}if(!this.has(value)){transaction$$1(function(){_this._data.add(_this.enhancer(value,undefined));_this._atom.reportChanged()});var notifySpy=isSpyEnabled$$1();var notify=hasListeners$$1(this);var change=notify||notifySpy?{type:"add",object:this,newValue:value}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(change);if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()}return this};ObservableSet$$1.prototype.delete=function(value){var _this=this;if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{type:"delete",object:this,oldValue:value});if(!change)return false}if(this.has(value)){var notifySpy=isSpyEnabled$$1();var notify=hasListeners$$1(this);var change=notify||notifySpy?{type:"delete",object:this,oldValue:value}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.name}));transaction$$1(function(){_this._atom.reportChanged();_this._data.delete(value)});if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1();return true}return false};ObservableSet$$1.prototype.has=function(value){this._atom.reportObserved();return this._data.has(this.dehanceValue(value))};ObservableSet$$1.prototype.entries=function(){var nextIndex=0;var keys$$1=Array.from(this.keys());var values$$1=Array.from(this.values());return makeIterable({next:function(){var index=nextIndex;nextIndex+=1;return index<values$$1.length?{value:[keys$$1[index],values$$1[index]],done:false}:{done:true}}})};ObservableSet$$1.prototype.keys=function(){return this.values()};ObservableSet$$1.prototype.values=function(){this._atom.reportObserved();var self=this;var nextIndex=0;var observableValues=Array.from(this._data.values());return makeIterable({next:function(){return nextIndex<observableValues.length?{value:self.dehanceValue(observableValues[nextIndex++]),done:false}:{done:true}}})};ObservableSet$$1.prototype.replace=function(other){var _this=this;if(isObservableSet$$1(other)){other=other.toJS()}transaction$$1(function(){if(Array.isArray(other)){_this.clear();other.forEach(function(value){return _this.add(value)})}else if(isES6Set$$1(other)){_this.clear();other.forEach(function(value){return _this.add(value)})}else if(other!==null&&other!==undefined){fail$$1("Cannot initialize set from "+other)}});return this};ObservableSet$$1.prototype.observe=function(listener,fireImmediately){process.env.NODE_ENV!=="production"&&invariant$$1(fireImmediately!==true,"`observe` doesn't support fireImmediately=true in combination with sets.");return registerListener$$1(this,listener)};ObservableSet$$1.prototype.intercept=function(handler){return registerInterceptor$$1(this,handler)};ObservableSet$$1.prototype.toJS=function(){return new Set(this)};ObservableSet$$1.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"};ObservableSet$$1.prototype[(_a$1=$mobx$$1,Symbol.iterator)]=function(){return this.values()};return ObservableSet$$1}();var isObservableSet$$1=createInstanceofPredicate$$1("ObservableSet",ObservableSet$$1);var ObservableObjectAdministration$$1=function(){function ObservableObjectAdministration$$1(target,values$$1,name,defaultEnhancer){if(values$$1===void 0){values$$1=new Map}this.target=target;this.values=values$$1;this.name=name;this.defaultEnhancer=defaultEnhancer;this.keysAtom=new Atom$$1(name+".keys")}ObservableObjectAdministration$$1.prototype.read=function(key){return this.values.get(key).get()};ObservableObjectAdministration$$1.prototype.write=function(key,newValue){var instance=this.target;var observable$$1=this.values.get(key);if(observable$$1 instanceof ComputedValue$$1){observable$$1.set(newValue);return}if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{type:"update",object:this.proxy||instance,name:key,newValue:newValue});if(!change)return;newValue=change.newValue}newValue=observable$$1.prepareNewValue(newValue);if(newValue!==globalState$$1.UNCHANGED){var notify=hasListeners$$1(this);var notifySpy=isSpyEnabled$$1();var change=notify||notifySpy?{type:"update",object:this.proxy||instance,oldValue:observable$$1.value,name:key,newValue:newValue}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.name,key:key}));observable$$1.setNewValue(newValue);if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()}};ObservableObjectAdministration$$1.prototype.has=function(key){var map=this.pendingKeys||(this.pendingKeys=new Map);var entry=map.get(key);if(entry)return entry.get();else{var exists=!!this.values.get(key);entry=new ObservableValue$$1(exists,referenceEnhancer$$1,this.name+"."+key.toString()+"?",false);map.set(key,entry);return entry.get()}};ObservableObjectAdministration$$1.prototype.addObservableProp=function(propName,newValue,enhancer){if(enhancer===void 0){enhancer=this.defaultEnhancer}var target=this.target;assertPropertyConfigurable$$1(target,propName);if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{object:this.proxy||target,name:propName,type:"add",newValue:newValue});if(!change)return;newValue=change.newValue}var observable$$1=new ObservableValue$$1(newValue,enhancer,this.name+"."+propName,false);this.values.set(propName,observable$$1);newValue=observable$$1.value;Object.defineProperty(target,propName,generateObservablePropConfig$$1(propName));this.notifyPropertyAddition(propName,newValue)};ObservableObjectAdministration$$1.prototype.addComputedProp=function(propertyOwner,propName,options){var target=this.target;options.name=options.name||this.name+"."+propName;this.values.set(propName,new ComputedValue$$1(options));if(propertyOwner===target||isPropertyConfigurable$$1(propertyOwner,propName))Object.defineProperty(propertyOwner,propName,generateComputedPropConfig$$1(propName))};ObservableObjectAdministration$$1.prototype.remove=function(key){if(!this.values.has(key))return;var target=this.target;if(hasInterceptors$$1(this)){var change=interceptChange$$1(this,{object:this.proxy||target,name:key,type:"remove"});if(!change)return}try{startBatch$$1();var notify=hasListeners$$1(this);var notifySpy=isSpyEnabled$$1();var oldObservable=this.values.get(key);var oldValue=oldObservable&&oldObservable.get();oldObservable&&oldObservable.set(undefined);this.keysAtom.reportChanged();this.values.delete(key);if(this.pendingKeys){var entry=this.pendingKeys.get(key);if(entry)entry.set(false)}delete this.target[key];var change=notify||notifySpy?{type:"remove",object:this.proxy||target,oldValue:oldValue,name:key}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.name,key:key}));if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1()}finally{endBatch$$1()}};ObservableObjectAdministration$$1.prototype.illegalAccess=function(owner,propName){console.warn("Property '"+propName+"' of '"+owner+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")};ObservableObjectAdministration$$1.prototype.observe=function(callback,fireImmediately){process.env.NODE_ENV!=="production"&&invariant$$1(fireImmediately!==true,"`observe` doesn't support the fire immediately property for observable objects.");return registerListener$$1(this,callback)};ObservableObjectAdministration$$1.prototype.intercept=function(handler){return registerInterceptor$$1(this,handler)};ObservableObjectAdministration$$1.prototype.notifyPropertyAddition=function(key,newValue){var notify=hasListeners$$1(this);var notifySpy=isSpyEnabled$$1();var change=notify||notifySpy?{type:"add",object:this.proxy||this.target,name:key,newValue:newValue}:null;if(notifySpy&&process.env.NODE_ENV!=="production")spyReportStart$$1(__assign({},change,{name:this.name,key:key}));if(notify)notifyListeners$$1(this,change);if(notifySpy&&process.env.NODE_ENV!=="production")spyReportEnd$$1();if(this.pendingKeys){var entry=this.pendingKeys.get(key);if(entry)entry.set(true)}this.keysAtom.reportChanged()};ObservableObjectAdministration$$1.prototype.getKeys=function(){var e_1,_a;this.keysAtom.reportObserved();var res=[];try{for(var _b=__values(this.values),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read(_c.value,2),key=_d[0],value=_d[1];if(value instanceof ObservableValue$$1)res.push(key)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{if(_c&&!_c.done&&(_a=_b.return))_a.call(_b)}finally{if(e_1)throw e_1.error}}return res};return ObservableObjectAdministration$$1}();function asObservableObject$$1(target,name,defaultEnhancer){if(name===void 0){name=""}if(defaultEnhancer===void 0){defaultEnhancer=deepEnhancer$$1}if(Object.prototype.hasOwnProperty.call(target,$mobx$$1))return target[$mobx$$1];process.env.NODE_ENV!=="production"&&invariant$$1(Object.isExtensible(target),"Cannot make the designated object observable; it is not extensible");if(!isPlainObject$$1(target))name=(target.constructor.name||"ObservableObject")+"@"+getNextId$$1();if(!name)name="ObservableObject@"+getNextId$$1();var adm=new ObservableObjectAdministration$$1(target,new Map,name,defaultEnhancer);addHiddenProp$$1(target,$mobx$$1,adm);return adm}var observablePropertyConfigs=Object.create(null);var computedPropertyConfigs=Object.create(null);function generateObservablePropConfig$$1(propName){return observablePropertyConfigs[propName]||(observablePropertyConfigs[propName]={configurable:true,enumerable:true,get:function(){return this[$mobx$$1].read(propName)},set:function(v){this[$mobx$$1].write(propName,v)}})}function getAdministrationForComputedPropOwner(owner){var adm=owner[$mobx$$1];if(!adm){initializeInstance$$1(owner);return owner[$mobx$$1]}return adm}function generateComputedPropConfig$$1(propName){return computedPropertyConfigs[propName]||(computedPropertyConfigs[propName]={configurable:false,enumerable:false,get:function(){return getAdministrationForComputedPropOwner(this).read(propName)},set:function(v){getAdministrationForComputedPropOwner(this).write(propName,v)}})}var isObservableObjectAdministration=createInstanceofPredicate$$1("ObservableObjectAdministration",ObservableObjectAdministration$$1);function isObservableObject$$1(thing){if(isObject$$1(thing)){initializeInstance$$1(thing);return isObservableObjectAdministration(thing[$mobx$$1])}return false}function getAtom$$1(thing,property){if(typeof thing==="object"&&thing!==null){if(isObservableArray$$1(thing)){if(property!==undefined)fail$$1(process.env.NODE_ENV!=="production"&&"It is not possible to get index atoms from arrays");return thing[$mobx$$1].atom}if(isObservableSet$$1(thing)){return thing[$mobx$$1]}if(isObservableMap$$1(thing)){var anyThing=thing;if(property===undefined)return anyThing._keysAtom;var observable$$1=anyThing._data.get(property)||anyThing._hasMap.get(property);if(!observable$$1)fail$$1(process.env.NODE_ENV!=="production"&&"the entry '"+property+"' does not exist in the observable map '"+getDebugName$$1(thing)+"'");return observable$$1}initializeInstance$$1(thing);if(property&&!thing[$mobx$$1])thing[property];if(isObservableObject$$1(thing)){if(!property)return fail$$1(process.env.NODE_ENV!=="production"&&"please specify a property");var observable$$1=thing[$mobx$$1].values.get(property);if(!observable$$1)fail$$1(process.env.NODE_ENV!=="production"&&"no observable property '"+property+"' found on the observable object '"+getDebugName$$1(thing)+"'");return observable$$1}if(isAtom$$1(thing)||isComputedValue$$1(thing)||isReaction$$1(thing)){return thing}}else if(typeof thing==="function"){if(isReaction$$1(thing[$mobx$$1])){return thing[$mobx$$1]}}return fail$$1(process.env.NODE_ENV!=="production"&&"Cannot obtain atom from "+thing)}function getAdministration$$1(thing,property){if(!thing)fail$$1("Expecting some object");if(property!==undefined)return getAdministration$$1(getAtom$$1(thing,property));if(isAtom$$1(thing)||isComputedValue$$1(thing)||isReaction$$1(thing))return thing;if(isObservableMap$$1(thing)||isObservableSet$$1(thing))return thing;initializeInstance$$1(thing);if(thing[$mobx$$1])return thing[$mobx$$1];fail$$1(process.env.NODE_ENV!=="production"&&"Cannot obtain administration from "+thing)}function getDebugName$$1(thing,property){var named;if(property!==undefined)named=getAtom$$1(thing,property);else if(isObservableObject$$1(thing)||isObservableMap$$1(thing)||isObservableSet$$1(thing))named=getAdministration$$1(thing);else named=getAtom$$1(thing);return named.name}var toString=Object.prototype.toString;function deepEqual$$1(a,b){return eq(a,b)}function eq(a,b,aStack,bStack){if(a===b)return a!==0||1/a===1/b;if(a==null||b==null)return false;if(a!==a)return b!==b;var type=typeof a;if(type!=="function"&&type!=="object"&&typeof b!="object")return false;return deepEq(a,b,aStack,bStack)}function deepEq(a,b,aStack,bStack){a=unwrap(a);b=unwrap(b);var className=toString.call(a);if(className!==toString.call(b))return false;switch(className){case"[object RegExp]":case"[object String]":return""+a===""+b;case"[object Number]":if(+a!==+a)return+b!==+b;return+a===0?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b;case"[object Symbol]":return typeof Symbol!=="undefined"&&Symbol.valueOf.call(a)===Symbol.valueOf.call(b)}var areArrays=className==="[object Array]";if(!areArrays){if(typeof a!="object"||typeof b!="object")return false;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&!(typeof aCtor==="function"&&aCtor instanceof aCtor&&typeof bCtor==="function"&&bCtor instanceof bCtor)&&("constructor"in a&&"constructor"in b)){return false}}aStack=aStack||[];bStack=bStack||[];var length=aStack.length;while(length--){if(aStack[length]===a)return bStack[length]===b}aStack.push(a);bStack.push(b);if(areArrays){length=a.length;if(length!==b.length)return false;while(length--){if(!eq(a[length],b[length],aStack,bStack))return false}}else{var keys$$1=Object.keys(a),key;length=keys$$1.length;if(Object.keys(b).length!==length)return false;while(length--){key=keys$$1[length];if(!(has$1(b,key)&&eq(a[key],b[key],aStack,bStack)))return false}}aStack.pop();bStack.pop();return true}function unwrap(a){if(isObservableArray$$1(a))return a.slice();if(isES6Map$$1(a)||isObservableMap$$1(a))return Array.from(a.entries());if(isES6Set$$1(a)||isObservableSet$$1(a))return Array.from(a.entries());return a}function has$1(a,key){return Object.prototype.hasOwnProperty.call(a,key)}function makeIterable(iterator){iterator[Symbol.iterator]=self;return iterator}function self(){return this}if(typeof Proxy==="undefined"||typeof Symbol==="undefined"){throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.")}try{process.env.NODE_ENV}catch(e){var g=typeof window!=="undefined"?window:global;if(typeof process==="undefined")g.process={};g.process.env={}}(function(){function testCodeMinification(){}if(testCodeMinification.name!=="testCodeMinification"&&process.env.NODE_ENV!=="production"&&process.env.IGNORE_MOBX_MINIFY_WARNING!=="true"){console.warn("[mobx] you are running a minified build, but 'process.env.NODE_ENV' was not set to 'production' in your bundler. This results in an unnecessarily large and slow bundle")}})();if(typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__==="object"){__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:spy$$1,extras:{getDebugName:getDebugName$$1},$mobx:$mobx$$1})}exports.Reaction=Reaction$$1;exports.untracked=untracked$$1;exports.createAtom=createAtom$$1;exports.spy=spy$$1;exports.comparer=comparer$$1;exports.isObservableObject=isObservableObject$$1;exports.isBoxedObservable=isObservableValue$$1;exports.isObservableArray=isObservableArray$$1;exports.ObservableMap=ObservableMap$$1;exports.isObservableMap=isObservableMap$$1;exports.ObservableSet=ObservableSet$$1;exports.isObservableSet=isObservableSet$$1;exports.transaction=transaction$$1;exports.observable=observable$$1;exports.computed=computed$$1;exports.isObservable=isObservable$$1;exports.isObservableProp=isObservableProp$$1;exports.isComputed=isComputed$$1;exports.isComputedProp=isComputedProp$$1;exports.extendObservable=extendObservable$$1;exports.observe=observe$$1;exports.intercept=intercept$$1;exports.autorun=autorun$$1;exports.reaction=reaction$$1;exports.when=when$$1;exports.action=action$$1;exports.isAction=isAction$$1;exports.runInAction=runInAction$$1;exports.keys=keys$$1;exports.values=values$$1;exports.entries=entries$$1;exports.set=set$$1;exports.remove=remove$$1;exports.has=has$$1;exports.get=get$$1;exports.decorate=decorate$$1;exports.configure=configure$$1;exports.onBecomeObserved=onBecomeObserved$$1;exports.onBecomeUnobserved=onBecomeUnobserved$$1;exports.flow=flow$$1;exports.toJS=toJS$$1;exports.trace=trace$$1;exports.getDependencyTree=getDependencyTree$$1;exports.getObserverTree=getObserverTree$$1;exports._resetGlobalState=resetGlobalState$$1;exports._getGlobalState=getGlobalState$$1;exports.getDebugName=getDebugName$$1;exports.getAtom=getAtom$$1;exports._getAdministration=getAdministration$$1;exports._allowStateChanges=allowStateChanges$$1;exports._allowStateChangesInsideComputed=allowStateChangesInsideComputed$$1;exports.isArrayLike=isArrayLike$$1;exports.$mobx=$mobx$$1;exports._isComputingDerivation=isComputingDerivation$$1;exports.onReactionError=onReactionError$$1;exports._interceptReads=interceptReads$$1}).call(this,require("_process"),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{_process:7}],4:[function(require,module,exports){module.exports=function(random,alphabet,size){var mask=(2<<Math.log(alphabet.length-1)/Math.LN2)-1;var step=Math.ceil(1.6*mask*size/alphabet.length);var id="";while(true){var bytes=random(step);for(var i=0;i<step;i++){var byte=bytes[i]&mask;if(alphabet[byte]){id+=alphabet[byte];if(id.length===size)return id}}}}},{}],5:[function(require,module,exports){!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define("nipplejs",[],i):"object"==typeof exports?exports.nipplejs=i():t.nipplejs=i()}(window,function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){"use strict";e.r(i);var o,n=function(t,i){var e=i.x-t.x,o=i.y-t.y;return Math.sqrt(e*e+o*o)},s=function(t){return t*(Math.PI/180)},r=function(t){return t*(180/Math.PI)},d=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.addEventListener?t.addEventListener(o,e,!1):t.attachEvent&&t.attachEvent(o,e)},p=function(t,i,e){for(var o,n=i.split(/[ ,]+/g),s=0;s<n.length;s+=1)o=n[s],t.removeEventListener?t.removeEventListener(o,e):t.detachEvent&&t.detachEvent(o,e)},a=function(t){return t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},c=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},h=function(t,i){i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+"px",t.style.top=i.y+"px")},l=function(t,i,e){var o=u(t);for(var n in o)if(o.hasOwnProperty(n))if("string"==typeof i)o[n]=i+" "+e;else{for(var s="",r=0,d=i.length;r<d;r+=1)s+=i[r]+" "+e+", ";o[n]=s.slice(0,-2)}return o},u=function(t){var i={};i[t]="";return["webkit","Moz","o"].forEach(function(e){i[e+t.charAt(0).toUpperCase()+t.slice(1)]=""}),i},f=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},y=function(t,i){if(t.length)for(var e=0,o=t.length;e<o;e+=1)i(t[e]);else i(t)},m=!!("ontouchstart"in window),v=!!window.PointerEvent,g=!!window.MSPointerEvent,b={start:"mousedown",move:"mousemove",end:"mouseup"},x={};function O(){}v?o={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:g?o={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:m?(o={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},x=b):o=b,O.prototype.on=function(t,i){var e,o=t.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var n=0;n<o.length;n+=1)e=o[n],this._handlers_[e]=this._handlers_[e]||[],this._handlers_[e].push(i);return this},O.prototype.off=function(t,i){return this._handlers_=this._handlers_||{},void 0===t?this._handlers_={}:void 0===i?this._handlers_[t]=null:this._handlers_[t]&&this._handlers_[t].indexOf(i)>=0&&this._handlers_[t].splice(this._handlers_[t].indexOf(i),1),this},O.prototype.trigger=function(t,i){var e,o=this,n=t.split(/[ ,]+/g);o._handlers_=o._handlers_||{};for(var s=0;s<n.length;s+=1)e=n[s],o._handlers_[e]&&o._handlers_[e].length&&o._handlers_[e].forEach(function(t){t.call(o,{type:e,target:o},i)})},O.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=function(t,i){var e={};for(var o in t)t.hasOwnProperty(o)&&i.hasOwnProperty(o)?e[o]=i[o]:t.hasOwnProperty(o)&&(e[o]=t[o]);return e}(this.options,t))},O.prototype.bindEvt=function(t,i){var e=this;return e._domHandlers_=e._domHandlers_||{},e._domHandlers_[i]=function(){"function"==typeof e["on"+i]?e["on"+i].apply(e,arguments):console.warn('[WARNING] : Missing "on'+i+'" handler.')},d(t,o[i],e._domHandlers_[i]),x[i]&&d(t,x[i],e._domHandlers_[i]),e},O.prototype.unbindEvt=function(t,i){return this._domHandlers_=this._domHandlers_||{},p(t,o[i],this._domHandlers_[i]),x[i]&&p(t,x[i],this._domHandlers_[i]),delete this._domHandlers_[i],this};var _=O;function w(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1},this.config(i),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=w.id,w.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}w.prototype=new _,w.constructor=w,w.id=0,w.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},w.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",i=function(t,i){var e=u(t);for(var o in e)e.hasOwnProperty(o)&&(e[o]=i);return e}("borderRadius","50%"),e=l("transition","opacity",t),o={};return o.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},o.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},o.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},f(o.el,e),f(o.back,i),f(o.front,i),this.applyStyles(o),this},w.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var e in t[i])this.ui[i].style[e]=t[i][e];return this},w.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},w.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},w.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},w.prototype.show=function(t){var i=this;return i.options.dataOnly?i:(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger("shown",i.instance),"function"==typeof t&&t.call(this)},i.options.fadeTime),i)},w.prototype.hide=function(t){var i=this;return i.options.dataOnly?i:(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var e="dynamic"===i.options.mode?"none":"block";i.ui.el.style.display=e,"function"==typeof t&&t.call(i),i.trigger("hidden",i.instance)},i.options.fadeTime),i.options.restJoystick&&i.restPosition(),i)},w.prototype.restPosition=function(t){var i=this;i.frontPosition={x:0,y:0};var e=i.options.fadeTime+"ms",o={};o.front=l("transition",["top","left"],e);var n={front:{}};n.front={left:i.frontPosition.x+"px",top:i.frontPosition.y+"px"},i.applyStyles(o),i.applyStyles(n),i.restTimeout=setTimeout(function(){"function"==typeof t&&t.call(i),i.restCallback()},i.options.fadeTime)},w.prototype.restCallback=function(){var t={};t.front=l("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},w.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},w.prototype.computeDirection=function(t){var i,e,o,n=t.angle.radian,s=Math.PI/4,r=Math.PI/2;if(n>s&&n<3*s&&!t.lockX?i="up":n>-s&&n<=s&&!t.lockY?i="left":n>3*-s&&n<=-s&&!t.lockX?i="down":t.lockY||(i="right"),t.lockY||(e=n>-r&&n<r?"left":"right"),t.lockX||(o=n>0?"up":"down"),t.force>this.options.threshold){var d,p={};for(d in this.direction)this.direction.hasOwnProperty(d)&&(p[d]=this.direction[d]);var a={};for(d in this.direction={x:e,y:o,angle:i},t.direction=this.direction,p)p[d]===this.direction[d]&&(a[d]=!0);if(a.x&&a.y&&a.angle)return t;a.x&&a.y||this.trigger("plain",t),a.x||this.trigger("plain:"+e,t),a.y||this.trigger("plain:"+o,t),a.angle||this.trigger("dir dir:"+i,t)}return t};var T=w;function k(t,i){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=t,this.id=k.id,k.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1},this.config(i),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}k.prototype=new _,k.constructor=k,k.id=0,k.prototype.prepareNipples=function(){var t=this.nipples;t.on=this.on.bind(this),t.off=this.off.bind(this),t.options=this.options,t.destroy=this.destroy.bind(this),t.ids=this.ids,t.id=this.id,t.processOnMove=this.processOnMove.bind(this),t.processOnEnd=this.processOnEnd.bind(this),t.get=function(i){if(void 0===i)return t[0];for(var e=0,o=t.length;e<o;e+=1)if(t[e].identifier===i)return t[e];return!1}},k.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},k.prototype.begin=function(){var t=this.options;if("static"===t.mode){var i=this.createNipple(t.position,this.manager.getIdentifier());i.add(),this.idles.push(i)}},k.prototype.createNipple=function(t,i){var e=c(),o={},n=this.options;if(t.x&&t.y)o={x:t.x-(e.x+this.box.left),y:t.y-(e.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var s=document.createElement("DIV");s.style.display="hidden",s.style.top=t.top,s.style.right=t.right,s.style.bottom=t.bottom,s.style.left=t.left,s.style.position="absolute",n.zone.appendChild(s);var r=s.getBoundingClientRect();n.zone.removeChild(s),o=t,t={x:r.left+e.x,y:r.top+e.y}}var d=new T(this,{color:n.color,size:n.size,threshold:n.threshold,fadeTime:n.fadeTime,dataOnly:n.dataOnly,restJoystick:n.restJoystick,restOpacity:n.restOpacity,mode:n.mode,identifier:i,position:t,zone:n.zone,frontPosition:{x:0,y:0}});return n.dataOnly||(h(d.ui.el,o),h(d.ui.front,d.frontPosition)),this.nipples.push(d),this.trigger("added "+d.identifier+":added",d),this.manager.trigger("added "+d.identifier+":added",d),this.bindNipple(d),d},k.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},k.prototype.bindNipple=function(t){var i,e=this,o=function(t,o){i=t.type+" "+o.id+":"+t.type,e.trigger(i,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},k.prototype.pressureFn=function(t,i,e){var o=this,n=0;clearInterval(o.pressureIntervals[e]),o.pressureIntervals[e]=setInterval(function(){var e=t.force||t.pressure||t.webkitForce||0;e!==n&&(i.trigger("pressure",e),o.trigger("pressure "+i.identifier+":pressure",e),n=e)}.bind(o),100)},k.prototype.onstart=function(t){var i=this,e=i.options;t=a(t),i.updateBox();return y(t,function(t){i.actives.length<e.maxNumberOfNipples&&i.processOnStart(t)}),i.manager.bindDocument(),!1},k.prototype.processOnStart=function(t){var i,e=this,o=e.options,s=e.manager.getIdentifier(t),r=t.force||t.pressure||t.webkitForce||0,d={x:t.pageX,y:t.pageY},p=e.getOrCreate(s,d);p.identifier!==s&&e.manager.removeIdentifier(p.identifier),p.identifier=s;var a=function(i){i.trigger("start",i),e.trigger("start "+i.id+":start",i),i.show(),r>0&&e.pressureFn(t,i,i.identifier),e.processOnMove(t)};if((i=e.idles.indexOf(p))>=0&&e.idles.splice(i,1),e.actives.push(p),e.ids.push(p.identifier),"semi"!==o.mode)a(p);else{if(!(n(d,p.position)<=o.catchDistance))return p.destroy(),void e.processOnStart(t);a(p)}return p},k.prototype.getOrCreate=function(t,i){var e,o=this.options;return/(semi|static)/.test(o.mode)?(e=this.idles[0])?(this.idles.splice(0,1),e):"semi"===o.mode?this.createNipple(i,t):(console.warn("Coudln't find the needed nipple."),!1):e=this.createNipple(i,t)},k.prototype.processOnMove=function(t){var i=this.options,e=this.manager.getIdentifier(t),o=this.nipples.get(e);if(!o)return console.error("Found zombie joystick with ID "+e),void this.manager.removeIdentifier(e);o.identifier=e;var d,p,a,c,l,u,f,y,m=o.options.size/2,v={x:t.pageX,y:t.pageY},g=n(v,o.position),b=(d=v,p=o.position,a=p.x-d.x,c=p.y-d.y,r(Math.atan2(c,a))),x=s(b),O=g/m;g>m&&(g=m,l=o.position,u=g,y={x:0,y:0},f=s(f=b),y.x=l.x-u*Math.cos(f),y.y=l.y-u*Math.sin(f),v=y);var _=v.x-o.position.x,w=v.y-o.position.y;i.lockX&&(w=0),i.lockY&&(_=0),o.frontPosition={x:_,y:w},i.dataOnly||h(o.ui.front,o.frontPosition);var T={identifier:o.identifier,position:v,force:O,pressure:t.force||t.pressure||t.webkitForce||0,distance:g,angle:{radian:x,degree:b},instance:o,lockX:i.lockX,lockY:i.lockY};(T=o.computeDirection(T)).angle={radian:s(180-b),degree:180-b},o.trigger("move",T),this.trigger("move "+o.id+":move",T)},k.prototype.processOnEnd=function(t){var i=this,e=i.options,o=i.manager.getIdentifier(t),n=i.nipples.get(o),s=i.manager.removeIdentifier(n.identifier);n&&(e.dataOnly||n.hide(function(){"dynamic"===e.mode&&(n.trigger("removed",n),i.trigger("removed "+n.id+":removed",n),i.manager.trigger("removed "+n.id+":removed",n),n.destroy())}),clearInterval(i.pressureIntervals[n.identifier]),n.resetDirection(),n.trigger("end",n),i.trigger("end "+n.id+":end",n),i.ids.indexOf(n.identifier)>=0&&i.ids.splice(i.ids.indexOf(n.identifier),1),i.actives.indexOf(n)>=0&&i.actives.splice(i.actives.indexOf(n),1),/(semi|static)/.test(e.mode)?i.idles.push(n):i.nipples.indexOf(n)>=0&&i.nipples.splice(i.nipples.indexOf(n),1),i.manager.unbindDocument(),/(semi|static)/.test(e.mode)&&(i.manager.ids[s.id]=s.identifier))},k.prototype.onDestroyed=function(t,i){this.nipples.indexOf(i)>=0&&this.nipples.splice(this.nipples.indexOf(i),1),this.actives.indexOf(i)>=0&&this.actives.splice(this.actives.indexOf(i),1),this.idles.indexOf(i)>=0&&this.idles.splice(this.idles.indexOf(i),1),this.ids.indexOf(i.identifier)>=0&&this.ids.splice(this.ids.indexOf(i.identifier),1),this.manager.removeIdentifier(i.identifier),this.manager.unbindDocument()},k.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()};var P=k;function E(t){var i,e=this;return e.ids={},e.index=0,e.collections=[],e.config(t),e.prepareCollections(),d(window,"resize",function(t){clearTimeout(i),i=setTimeout(function(){var t,i=c();e.collections.forEach(function(e){e.forEach(function(e){t=e.el.getBoundingClientRect(),e.position={x:i.x+t.left,y:i.y+t.top}})})},100)}),e.collections}E.prototype=new _,E.constructor=E,E.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var e;return t.collections.every(function(t){return!(e=t.get(i))}),e}},E.prototype.create=function(t){return this.createCollection(t)},E.prototype.createCollection=function(t){var i=new P(this,t);return this.bindCollection(i),this.collections.push(i),i},E.prototype.bindCollection=function(t){var i,e=this,o=function(t,o){i=t.type+" "+o.id+":"+t.type,e.trigger(i,o)};t.on("destroyed",e.onDestroyed.bind(e)),t.on("shown hidden rested dir plain",o),t.on("dir:up dir:right dir:down dir:left",o),t.on("plain:up plain:right plain:down plain:left",o)},E.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},E.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},E.prototype.getIdentifier=function(t){var i;return t?void 0===(i=void 0===t.identifier?t.pointerId:t.identifier)&&(i=this.latest||0):i=this.index,void 0===this.ids[i]&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},E.prototype.removeIdentifier=function(t){var i={};for(var e in this.ids)if(this.ids[e]===t){i.id=e,i.identifier=this.ids[e],delete this.ids[e];break}return i},E.prototype.onmove=function(t){return this.onAny("move",t),!1},E.prototype.onend=function(t){return this.onAny("end",t),!1},E.prototype.oncancel=function(t){return this.onAny("end",t),!1},E.prototype.onAny=function(t,i){var e,o=this,n="processOn"+t.charAt(0).toUpperCase()+t.slice(1);i=a(i);return y(i,function(t){e=o.getIdentifier(t),y(o.collections,function(t,i,e){e.ids.indexOf(i)>=0&&(e[n](t),t._found_=!0)}.bind(null,t,e)),t._found_||o.removeIdentifier(e)}),!1},E.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},E.prototype.onDestroyed=function(t,i){if(this.collections.indexOf(i)<0)return!1;this.collections.splice(this.collections.indexOf(i),1)};var z=new E;i.default={create:function(t){return z.create(t)},factory:z}}]).default})},{}],6:[function(require,module,exports){!function(){"use strict";function h(nodeName,attributes){var lastSimple,child,simple,i,children=EMPTY_CHILDREN;for(i=arguments.length;i-- >2;)stack.push(arguments[i]);if(attributes&&null!=attributes.children){if(!stack.length)stack.push(attributes.children);delete attributes.children}while(stack.length)if((child=stack.pop())&&void 0!==child.pop)for(i=child.length;i--;)stack.push(child[i]);else{if("boolean"==typeof child)child=null;if(simple="function"!=typeof nodeName)if(null==child)child="";else if("number"==typeof child)child=String(child);else if("string"!=typeof child)simple=!1;if(simple&&lastSimple)children[children.length-1]+=child;else if(children===EMPTY_CHILDREN)children=[child];else children.push(child);lastSimple=simple}var p=new VNode;p.nodeName=nodeName;p.children=children;p.attributes=null==attributes?void 0:attributes;p.key=null==attributes?void 0:attributes.key;if(void 0!==options.vnode)options.vnode(p);return p}function extend(obj,props){for(var i in props)obj[i]=props[i];return obj}function applyRef(ref,value){if(null!=ref)if("function"==typeof ref)ref(value);else ref.current=value}function cloneElement(vnode,props){return h(vnode.nodeName,extend(extend({},vnode.attributes),props),arguments.length>2?[].slice.call(arguments,2):vnode.children)}function enqueueRender(component){if(!component.__d&&(component.__d=!0)&&1==items.push(component))(options.debounceRendering||defer)(rerender)}function rerender(){var p;while(p=items.pop())if(p.__d)renderComponent(p)}function isSameNodeType(node,vnode,hydrating){if("string"==typeof vnode||"number"==typeof vnode)return void 0!==node.splitText;if("string"==typeof vnode.nodeName)return!node._componentConstructor&&isNamedNode(node,vnode.nodeName);else return hydrating||node._componentConstructor===vnode.nodeName}function isNamedNode(node,nodeName){return node.__n===nodeName||node.nodeName.toLowerCase()===nodeName.toLowerCase()}function getNodeProps(vnode){var props=extend({},vnode.attributes);props.children=vnode.children;var defaultProps=vnode.nodeName.defaultProps;if(void 0!==defaultProps)for(var i in defaultProps)if(void 0===props[i])props[i]=defaultProps[i];return props}function createNode(nodeName,isSvg){var node=isSvg?document.createElementNS("http://www.w3.org/2000/svg",nodeName):document.createElement(nodeName);node.__n=nodeName;return node}function removeNode(node){var parentNode=node.parentNode;if(parentNode)parentNode.removeChild(node)}function setAccessor(node,name,old,value,isSvg){if("className"===name)name="class";if("key"===name);else if("ref"===name){applyRef(old,null);applyRef(value,node)}else if("class"===name&&!isSvg)node.className=value||"";else if("style"===name){if(!value||"string"==typeof value||"string"==typeof old)node.style.cssText=value||"";if(value&&"object"==typeof value){if("string"!=typeof old)for(var i in old)if(!(i in value))node.style[i]="";for(var i in value)node.style[i]="number"==typeof value[i]&&!1===IS_NON_DIMENSIONAL.test(i)?value[i]+"px":value[i]}}else if("dangerouslySetInnerHTML"===name){if(value)node.innerHTML=value.__html||""}else if("o"==name[0]&&"n"==name[1]){var useCapture=name!==(name=name.replace(/Capture$/,""));name=name.toLowerCase().substring(2);if(value){if(!old)node.addEventListener(name,eventProxy,useCapture)}else node.removeEventListener(name,eventProxy,useCapture);(node.__l||(node.__l={}))[name]=value}else if("list"!==name&&"type"!==name&&!isSvg&&name in node){try{node[name]=null==value?"":value}catch(e){}if((null==value||!1===value)&&"spellcheck"!=name)node.removeAttribute(name)}else{var ns=isSvg&&name!==(name=name.replace(/^xlink:?/,""));if(null==value||!1===value)if(ns)node.removeAttributeNS("http://www.w3.org/1999/xlink",name.toLowerCase());else node.removeAttribute(name);else if("function"!=typeof value)if(ns)node.setAttributeNS("http://www.w3.org/1999/xlink",name.toLowerCase(),value);else node.setAttribute(name,value)}}function eventProxy(e){return this.__l[e.type](options.event&&options.event(e)||e)}function flushMounts(){var c;while(c=mounts.shift()){if(options.afterMount)options.afterMount(c);if(c.componentDidMount)c.componentDidMount()}}function diff(dom,vnode,context,mountAll,parent,componentRoot){if(!diffLevel++){isSvgMode=null!=parent&&void 0!==parent.ownerSVGElement;hydrating=null!=dom&&!("__preactattr_"in dom)}var ret=idiff(dom,vnode,context,mountAll,componentRoot);if(parent&&ret.parentNode!==parent)parent.appendChild(ret);if(!--diffLevel){hydrating=!1;if(!componentRoot)flushMounts()}return ret}function idiff(dom,vnode,context,mountAll,componentRoot){var out=dom,prevSvgMode=isSvgMode;if(null==vnode||"boolean"==typeof vnode)vnode="";if("string"==typeof vnode||"number"==typeof vnode){if(dom&&void 0!==dom.splitText&&dom.parentNode&&(!dom._component||componentRoot)){if(dom.nodeValue!=vnode)dom.nodeValue=vnode}else{out=document.createTextNode(vnode);if(dom){if(dom.parentNode)dom.parentNode.replaceChild(out,dom);recollectNodeTree(dom,!0)}}out.__preactattr_=!0;return out}var vnodeName=vnode.nodeName;if("function"==typeof vnodeName)return buildComponentFromVNode(dom,vnode,context,mountAll);isSvgMode="svg"===vnodeName?!0:"foreignObject"===vnodeName?!1:isSvgMode;vnodeName=String(vnodeName);if(!dom||!isNamedNode(dom,vnodeName)){out=createNode(vnodeName,isSvgMode);if(dom){while(dom.firstChild)out.appendChild(dom.firstChild);if(dom.parentNode)dom.parentNode.replaceChild(out,dom);recollectNodeTree(dom,!0)}}var fc=out.firstChild,props=out.__preactattr_,vchildren=vnode.children;if(null==props){props=out.__preactattr_={};for(var a=out.attributes,i=a.length;i--;)props[a[i].name]=a[i].value}if(!hydrating&&vchildren&&1===vchildren.length&&"string"==typeof vchildren[0]&&null!=fc&&void 0!==fc.splitText&&null==fc.nextSibling){if(fc.nodeValue!=vchildren[0])fc.nodeValue=vchildren[0]}else if(vchildren&&vchildren.length||null!=fc)innerDiffNode(out,vchildren,context,mountAll,hydrating||null!=props.dangerouslySetInnerHTML);diffAttributes(out,vnode.attributes,props);isSvgMode=prevSvgMode;return out}function innerDiffNode(dom,vchildren,context,mountAll,isHydrating){var j,c,f,vchild,child,originalChildren=dom.childNodes,children=[],keyed={},keyedLen=0,min=0,len=originalChildren.length,childrenLen=0,vlen=vchildren?vchildren.length:0;if(0!==len)for(var i=0;i<len;i++){var _child=originalChildren[i],props=_child.__preactattr_,key=vlen&&props?_child._component?_child._component.__k:props.key:null;if(null!=key){keyedLen++;keyed[key]=_child}else if(props||(void 0!==_child.splitText?isHydrating?_child.nodeValue.trim():!0:isHydrating))children[childrenLen++]=_child}if(0!==vlen)for(var i=0;i<vlen;i++){vchild=vchildren[i];child=null;var key=vchild.key;if(null!=key){if(keyedLen&&void 0!==keyed[key]){child=keyed[key];keyed[key]=void 0;keyedLen--}}else if(min<childrenLen)for(j=min;j<childrenLen;j++)if(void 0!==children[j]&&isSameNodeType(c=children[j],vchild,isHydrating)){child=c;children[j]=void 0;if(j===childrenLen-1)childrenLen--;if(j===min)min++;break}child=idiff(child,vchild,context,mountAll);f=originalChildren[i];if(child&&child!==dom&&child!==f)if(null==f)dom.appendChild(child);else if(child===f.nextSibling)removeNode(f);else dom.insertBefore(child,f)}if(keyedLen)for(var i in keyed)if(void 0!==keyed[i])recollectNodeTree(keyed[i],!1);while(min<=childrenLen)if(void 0!==(child=children[childrenLen--]))recollectNodeTree(child,!1)}function recollectNodeTree(node,unmountOnly){var component=node._component;if(component)unmountComponent(component);else{if(null!=node.__preactattr_)applyRef(node.__preactattr_.ref,null);if(!1===unmountOnly||null==node.__preactattr_)removeNode(node);removeChildren(node)}}function removeChildren(node){node=node.lastChild;while(node){var next=node.previousSibling;recollectNodeTree(node,!0);node=next}}function diffAttributes(dom,attrs,old){var name;for(name in old)if((!attrs||null==attrs[name])&&null!=old[name])setAccessor(dom,name,old[name],old[name]=void 0,isSvgMode);for(name in attrs)if(!("children"===name||"innerHTML"===name||name in old&&attrs[name]===("value"===name||"checked"===name?dom[name]:old[name])))setAccessor(dom,name,old[name],old[name]=attrs[name],isSvgMode)}function createComponent(Ctor,props,context){var inst,i=recyclerComponents.length;if(Ctor.prototype&&Ctor.prototype.render){inst=new Ctor(props,context);Component.call(inst,props,context)}else{inst=new Component(props,context);inst.constructor=Ctor;inst.render=doRender}while(i--)if(recyclerComponents[i].constructor===Ctor){inst.__b=recyclerComponents[i].__b;recyclerComponents.splice(i,1);return inst}return inst}function doRender(props,state,context){return this.constructor(props,context)}function setComponentProps(component,props,renderMode,context,mountAll){if(!component.__x){component.__x=!0;component.__r=props.ref;component.__k=props.key;delete props.ref;delete props.key;if(void 0===component.constructor.getDerivedStateFromProps)if(!component.base||mountAll){if(component.componentWillMount)component.componentWillMount()}else if(component.componentWillReceiveProps)component.componentWillReceiveProps(props,context);if(context&&context!==component.context){if(!component.__c)component.__c=component.context;component.context=context}if(!component.__p)component.__p=component.props;component.props=props;component.__x=!1;if(0!==renderMode)if(1===renderMode||!1!==options.syncComponentUpdates||!component.base)renderComponent(component,1,mountAll);else enqueueRender(component);applyRef(component.__r,component)}}function renderComponent(component,renderMode,mountAll,isChild){if(!component.__x){var rendered,inst,cbase,props=component.props,state=component.state,context=component.context,previousProps=component.__p||props,previousState=component.__s||state,previousContext=component.__c||context,isUpdate=component.base,nextBase=component.__b,initialBase=isUpdate||nextBase,initialChildComponent=component._component,skip=!1,snapshot=previousContext;if(component.constructor.getDerivedStateFromProps){state=extend(extend({},state),component.constructor.getDerivedStateFromProps(props,state));component.state=state}if(isUpdate){component.props=previousProps;component.state=previousState;component.context=previousContext;if(2!==renderMode&&component.shouldComponentUpdate&&!1===component.shouldComponentUpdate(props,state,context))skip=!0;else if(component.componentWillUpdate)component.componentWillUpdate(props,state,context);component.props=props;component.state=state;component.context=context}component.__p=component.__s=component.__c=component.__b=null;component.__d=!1;if(!skip){rendered=component.render(props,state,context);if(component.getChildContext)context=extend(extend({},context),component.getChildContext());if(isUpdate&&component.getSnapshotBeforeUpdate)snapshot=component.getSnapshotBeforeUpdate(previousProps,previousState);var toUnmount,base,childComponent=rendered&&rendered.nodeName;if("function"==typeof childComponent){var childProps=getNodeProps(rendered);inst=initialChildComponent;if(inst&&inst.constructor===childComponent&&childProps.key==inst.__k)setComponentProps(inst,childProps,1,context,!1);else{toUnmount=inst;component._component=inst=createComponent(childComponent,childProps,context);inst.__b=inst.__b||nextBase;inst.__u=component;setComponentProps(inst,childProps,0,context,!1);renderComponent(inst,1,mountAll,!0)}base=inst.base}else{cbase=initialBase;toUnmount=initialChildComponent;if(toUnmount)cbase=component._component=null;if(initialBase||1===renderMode){if(cbase)cbase._component=null;base=diff(cbase,rendered,context,mountAll||!isUpdate,initialBase&&initialBase.parentNode,!0)}}if(initialBase&&base!==initialBase&&inst!==initialChildComponent){var baseParent=initialBase.parentNode;if(baseParent&&base!==baseParent){baseParent.replaceChild(base,initialBase);if(!toUnmount){initialBase._component=null;recollectNodeTree(initialBase,!1)}}}if(toUnmount)unmountComponent(toUnmount);component.base=base;if(base&&!isChild){var componentRef=component,t=component;while(t=t.__u)(componentRef=t).base=base;base._component=componentRef;base._componentConstructor=componentRef.constructor}}if(!isUpdate||mountAll)mounts.push(component);else if(!skip){if(component.componentDidUpdate)component.componentDidUpdate(previousProps,previousState,snapshot);if(options.afterUpdate)options.afterUpdate(component)}while(component.__h.length)component.__h.pop().call(component);if(!diffLevel&&!isChild)flushMounts()}}function buildComponentFromVNode(dom,vnode,context,mountAll){var c=dom&&dom._component,originalComponent=c,oldDom=dom,isDirectOwner=c&&dom._componentConstructor===vnode.nodeName,isOwner=isDirectOwner,props=getNodeProps(vnode);while(c&&!isOwner&&(c=c.__u))isOwner=c.constructor===vnode.nodeName;if(c&&isOwner&&(!mountAll||c._component)){setComponentProps(c,props,3,context,mountAll);dom=c.base}else{if(originalComponent&&!isDirectOwner){unmountComponent(originalComponent);dom=oldDom=null}c=createComponent(vnode.nodeName,props,context);if(dom&&!c.__b){c.__b=dom;oldDom=null}setComponentProps(c,props,1,context,mountAll);dom=c.base;if(oldDom&&dom!==oldDom){oldDom._component=null;recollectNodeTree(oldDom,!1)}}return dom}function unmountComponent(component){if(options.beforeUnmount)options.beforeUnmount(component);var base=component.base;component.__x=!0;if(component.componentWillUnmount)component.componentWillUnmount();component.base=null;var inner=component._component;if(inner)unmountComponent(inner);else if(base){if(null!=base.__preactattr_)applyRef(base.__preactattr_.ref,null);component.__b=base;removeNode(base);recyclerComponents.push(component);removeChildren(base)}applyRef(component.__r,null)}function Component(props,context){this.__d=!0;this.context=context;this.props=props;this.state=this.state||{};this.__h=[]}function render(vnode,parent,merge){return diff(merge,vnode,{},!1,parent,!1)}function createRef(){return{}}var VNode=function(){};var options={};var stack=[];var EMPTY_CHILDREN=[];var defer="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var IS_NON_DIMENSIONAL=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i;var items=[];var mounts=[];var diffLevel=0;var isSvgMode=!1;var hydrating=!1;var recyclerComponents=[];extend(Component.prototype,{setState:function(state,callback){if(!this.__s)this.__s=this.state;this.state=extend(extend({},this.state),"function"==typeof state?state(this.state,this.props):state);if(callback)this.__h.push(callback);enqueueRender(this)},forceUpdate:function(callback){if(callback)this.__h.push(callback);renderComponent(this,2)},render:function(){}});var preact={h:h,createElement:h,cloneElement:cloneElement,createRef:createRef,Component:Component,render:render,rerender:rerender,options:options};if("undefined"!=typeof module)module.exports=preact;else self.preact=preact}()},{}],7:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],8:[function(require,module,exports){"use strict";module.exports=require("./lib/index")},{"./lib/index":12}],9:[function(require,module,exports){"use strict";var randomFromSeed=require("./random/random-from-seed");var ORIGINAL="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";var alphabet;var previousSeed;var shuffled;function reset(){shuffled=false}function setCharacters(_alphabet_){if(!_alphabet_){if(alphabet!==ORIGINAL){alphabet=ORIGINAL;reset()}return}if(_alphabet_===alphabet){return}if(_alphabet_.length!==ORIGINAL.length){throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. You submitted "+_alphabet_.length+" characters: "+_alphabet_)}var unique=_alphabet_.split("").filter(function(item,ind,arr){return ind!==arr.lastIndexOf(item)});if(unique.length){throw new Error("Custom alphabet for shortid must be "+ORIGINAL.length+" unique characters. These characters were not unique: "+unique.join(", "))}alphabet=_alphabet_;reset()}function characters(_alphabet_){setCharacters(_alphabet_);return alphabet}function setSeed(seed){randomFromSeed.seed(seed);if(previousSeed!==seed){reset();previousSeed=seed}}function shuffle(){if(!alphabet){setCharacters(ORIGINAL)}var sourceArray=alphabet.split("");var targetArray=[];var r=randomFromSeed.nextValue();var characterIndex;while(sourceArray.length>0){r=randomFromSeed.nextValue();characterIndex=Math.floor(r*sourceArray.length);targetArray.push(sourceArray.splice(characterIndex,1)[0])}return targetArray.join("")}function getShuffled(){if(shuffled){return shuffled}shuffled=shuffle();return shuffled}function lookup(index){var alphabetShuffled=getShuffled();return alphabetShuffled[index]}function get(){return alphabet||ORIGINAL}module.exports={get:get,characters:characters,seed:setSeed,lookup:lookup,shuffled:getShuffled}},{"./random/random-from-seed":15}],10:[function(require,module,exports){"use strict";var generate=require("./generate");var alphabet=require("./alphabet");var REDUCE_TIME=1459707606518;var version=6;var counter;var previousSeconds;function build(clusterWorkerId){var str="";var seconds=Math.floor((Date.now()-REDUCE_TIME)*.001);if(seconds===previousSeconds){counter++}else{counter=0;previousSeconds=seconds}str=str+generate(version);str=str+generate(clusterWorkerId);if(counter>0){str=str+generate(counter)}str=str+generate(seconds);return str}module.exports=build},{"./alphabet":9,"./generate":11}],11:[function(require,module,exports){"use strict";var alphabet=require("./alphabet");var random=require("./random/random-byte");var format=require("nanoid/format");function generate(number){var loopCounter=0;var done;var str="";while(!done){str=str+format(random,alphabet.get(),1);done=number<Math.pow(16,loopCounter+1);loopCounter++}return str}module.exports=generate},{"./alphabet":9,"./random/random-byte":14,"nanoid/format":4}],12:[function(require,module,exports){"use strict";var alphabet=require("./alphabet");var build=require("./build");var isValid=require("./is-valid");var clusterWorkerId=require("./util/cluster-worker-id")||0;function seed(seedValue){alphabet.seed(seedValue);return module.exports}function worker(workerId){clusterWorkerId=workerId;return module.exports}function characters(newCharacters){if(newCharacters!==undefined){alphabet.characters(newCharacters)}return alphabet.shuffled()}function generate(){return build(clusterWorkerId)}module.exports=generate;module.exports.generate=generate;module.exports.seed=seed;module.exports.worker=worker;module.exports.characters=characters;module.exports.isValid=isValid},{"./alphabet":9,"./build":10,"./is-valid":13,"./util/cluster-worker-id":16}],13:[function(require,module,exports){"use strict";var alphabet=require("./alphabet");function isShortId(id){if(!id||typeof id!=="string"||id.length<6){return false}var nonAlphabetic=new RegExp("[^"+alphabet.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]");return!nonAlphabetic.test(id)}module.exports=isShortId},{"./alphabet":9}],14:[function(require,module,exports){"use strict";var crypto=typeof window==="object"&&(window.crypto||window.msCrypto);var randomByte;if(!crypto||!crypto.getRandomValues){randomByte=function(size){var bytes=[];for(var i=0;i<size;i++){bytes.push(Math.floor(Math.random()*256))}return bytes}}else{randomByte=function(size){return crypto.getRandomValues(new Uint8Array(size))}}module.exports=randomByte},{}],15:[function(require,module,exports){"use strict";var seed=1;function getNextValue(){seed=(seed*9301+49297)%233280;return seed/233280}function setSeed(_seed_){seed=_seed_}module.exports={nextValue:getNextValue,seed:setSeed}},{}],16:[function(require,module,exports){"use strict";module.exports=0},{}],17:[function(require,module,exports){(function(){"use strict";var F2=.5*(Math.sqrt(3)-1);var G2=(3-Math.sqrt(3))/6;var F3=1/3;var G3=1/6;var F4=(Math.sqrt(5)-1)/4;var G4=(5-Math.sqrt(5))/20;function SimplexNoise(randomOrSeed){var random;if(typeof randomOrSeed=="function"){random=randomOrSeed}else if(randomOrSeed){random=alea(randomOrSeed)}else{random=Math.random}this.p=buildPermutationTable(random);this.perm=new Uint8Array(512);this.permMod12=new Uint8Array(512);for(var i=0;i<512;i++){this.perm[i]=this.p[i&255];this.permMod12[i]=this.perm[i]%12}}SimplexNoise.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(xin,yin){var permMod12=this.permMod12;var perm=this.perm;var grad3=this.grad3;var n0=0;var n1=0;var n2=0;var s=(xin+yin)*F2;var i=Math.floor(xin+s);var j=Math.floor(yin+s);var t=(i+j)*G2;var X0=i-t;var Y0=j-t;var x0=xin-X0;var y0=yin-Y0;var i1,j1;if(x0>y0){i1=1;j1=0}else{i1=0;j1=1}var x1=x0-i1+G2;var y1=y0-j1+G2;var x2=x0-1+2*G2;var y2=y0-1+2*G2;var ii=i&255;var jj=j&255;var t0=.5-x0*x0-y0*y0;if(t0>=0){var gi0=permMod12[ii+perm[jj]]*3;t0*=t0;n0=t0*t0*(grad3[gi0]*x0+grad3[gi0+1]*y0)}var t1=.5-x1*x1-y1*y1;if(t1>=0){var gi1=permMod12[ii+i1+perm[jj+j1]]*3;t1*=t1;n1=t1*t1*(grad3[gi1]*x1+grad3[gi1+1]*y1)}var t2=.5-x2*x2-y2*y2;if(t2>=0){var gi2=permMod12[ii+1+perm[jj+1]]*3;t2*=t2;n2=t2*t2*(grad3[gi2]*x2+grad3[gi2+1]*y2)}return 70*(n0+n1+n2)},noise3D:function(xin,yin,zin){var permMod12=this.permMod12;var perm=this.perm;var grad3=this.grad3;var n0,n1,n2,n3;var s=(xin+yin+zin)*F3;var i=Math.floor(xin+s);var j=Math.floor(yin+s);var k=Math.floor(zin+s);var t=(i+j+k)*G3;var X0=i-t;var Y0=j-t;var Z0=k-t;var x0=xin-X0;var y0=yin-Y0;var z0=zin-Z0;var i1,j1,k1;var i2,j2,k2;if(x0>=y0){if(y0>=z0){i1=1;j1=0;k1=0;i2=1;j2=1;k2=0}else if(x0>=z0){i1=1;j1=0;k1=0;i2=1;j2=0;k2=1}else{i1=0;j1=0;k1=1;i2=1;j2=0;k2=1}}else{if(y0<z0){i1=0;j1=0;k1=1;i2=0;j2=1;k2=1}else if(x0<z0){i1=0;j1=1;k1=0;i2=0;j2=1;k2=1}else{i1=0;j1=1;k1=0;i2=1;j2=1;k2=0}}var x1=x0-i1+G3;var y1=y0-j1+G3;var z1=z0-k1+G3;var x2=x0-i2+2*G3;var y2=y0-j2+2*G3;var z2=z0-k2+2*G3;var x3=x0-1+3*G3;var y3=y0-1+3*G3;var z3=z0-1+3*G3;var ii=i&255;var jj=j&255;var kk=k&255;var t0=.6-x0*x0-y0*y0-z0*z0;if(t0<0)n0=0;else{var gi0=permMod12[ii+perm[jj+perm[kk]]]*3;t0*=t0;n0=t0*t0*(grad3[gi0]*x0+grad3[gi0+1]*y0+grad3[gi0+2]*z0)}var t1=.6-x1*x1-y1*y1-z1*z1;if(t1<0)n1=0;else{var gi1=permMod12[ii+i1+perm[jj+j1+perm[kk+k1]]]*3;t1*=t1;n1=t1*t1*(grad3[gi1]*x1+grad3[gi1+1]*y1+grad3[gi1+2]*z1)}var t2=.6-x2*x2-y2*y2-z2*z2;if(t2<0)n2=0;else{var gi2=permMod12[ii+i2+perm[jj+j2+perm[kk+k2]]]*3;t2*=t2;n2=t2*t2*(grad3[gi2]*x2+grad3[gi2+1]*y2+grad3[gi2+2]*z2)}var t3=.6-x3*x3-y3*y3-z3*z3;if(t3<0)n3=0;else{var gi3=permMod12[ii+1+perm[jj+1+perm[kk+1]]]*3;t3*=t3;n3=t3*t3*(grad3[gi3]*x3+grad3[gi3+1]*y3+grad3[gi3+2]*z3)}return 32*(n0+n1+n2+n3)},noise4D:function(x,y,z,w){var perm=this.perm;var grad4=this.grad4;var n0,n1,n2,n3,n4;var s=(x+y+z+w)*F4;var i=Math.floor(x+s);var j=Math.floor(y+s);var k=Math.floor(z+s);var l=Math.floor(w+s);var t=(i+j+k+l)*G4;var X0=i-t;var Y0=j-t;var Z0=k-t;var W0=l-t;var x0=x-X0;var y0=y-Y0;var z0=z-Z0;var w0=w-W0;var rankx=0;var ranky=0;var rankz=0;var rankw=0;if(x0>y0)rankx++;else ranky++;if(x0>z0)rankx++;else rankz++;if(x0>w0)rankx++;else rankw++;if(y0>z0)ranky++;else rankz++;if(y0>w0)ranky++;else rankw++;if(z0>w0)rankz++;else rankw++;var i1,j1,k1,l1;var i2,j2,k2,l2;var i3,j3,k3,l3;i1=rankx>=3?1:0;j1=ranky>=3?1:0;k1=rankz>=3?1:0;l1=rankw>=3?1:0;i2=rankx>=2?1:0;j2=ranky>=2?1:0;k2=rankz>=2?1:0;l2=rankw>=2?1:0;i3=rankx>=1?1:0;j3=ranky>=1?1:0;k3=rankz>=1?1:0;l3=rankw>=1?1:0;var x1=x0-i1+G4;var y1=y0-j1+G4;var z1=z0-k1+G4;var w1=w0-l1+G4;var x2=x0-i2+2*G4;var y2=y0-j2+2*G4;var z2=z0-k2+2*G4;var w2=w0-l2+2*G4;var x3=x0-i3+3*G4;var y3=y0-j3+3*G4;var z3=z0-k3+3*G4;var w3=w0-l3+3*G4;var x4=x0-1+4*G4;var y4=y0-1+4*G4;var z4=z0-1+4*G4;var w4=w0-1+4*G4;var ii=i&255;var jj=j&255;var kk=k&255;var ll=l&255;var t0=.6-x0*x0-y0*y0-z0*z0-w0*w0;if(t0<0)n0=0;else{var gi0=perm[ii+perm[jj+perm[kk+perm[ll]]]]%32*4;t0*=t0;n0=t0*t0*(grad4[gi0]*x0+grad4[gi0+1]*y0+grad4[gi0+2]*z0+grad4[gi0+3]*w0)}var t1=.6-x1*x1-y1*y1-z1*z1-w1*w1;if(t1<0)n1=0;else{var gi1=perm[ii+i1+perm[jj+j1+perm[kk+k1+perm[ll+l1]]]]%32*4;t1*=t1;n1=t1*t1*(grad4[gi1]*x1+grad4[gi1+1]*y1+grad4[gi1+2]*z1+grad4[gi1+3]*w1)}var t2=.6-x2*x2-y2*y2-z2*z2-w2*w2;if(t2<0)n2=0;else{var gi2=perm[ii+i2+perm[jj+j2+perm[kk+k2+perm[ll+l2]]]]%32*4;t2*=t2;n2=t2*t2*(grad4[gi2]*x2+grad4[gi2+1]*y2+grad4[gi2+2]*z2+grad4[gi2+3]*w2)}var t3=.6-x3*x3-y3*y3-z3*z3-w3*w3;if(t3<0)n3=0;else{var gi3=perm[ii+i3+perm[jj+j3+perm[kk+k3+perm[ll+l3]]]]%32*4;t3*=t3;n3=t3*t3*(grad4[gi3]*x3+grad4[gi3+1]*y3+grad4[gi3+2]*z3+grad4[gi3+3]*w3)}var t4=.6-x4*x4-y4*y4-z4*z4-w4*w4;if(t4<0)n4=0;else{var gi4=perm[ii+1+perm[jj+1+perm[kk+1+perm[ll+1]]]]%32*4;t4*=t4;n4=t4*t4*(grad4[gi4]*x4+grad4[gi4+1]*y4+grad4[gi4+2]*z4+grad4[gi4+3]*w4)}return 27*(n0+n1+n2+n3+n4)}};function buildPermutationTable(random){var i;var p=new Uint8Array(256);for(i=0;i<256;i++){p[i]=i}for(i=0;i<255;i++){var r=i+~~(random()*(256-i));var aux=p[i];p[i]=p[r];p[r]=aux}return p}SimplexNoise._buildPermutationTable=buildPermutationTable;function alea(){var s0=0;var s1=0;var s2=0;var c=1;var mash=masher();s0=mash(" ");s1=mash(" ");s2=mash(" ");for(var i=0;i<arguments.length;i++){s0-=mash(arguments[i]);if(s0<0){s0+=1}s1-=mash(arguments[i]);if(s1<0){s1+=1}s2-=mash(arguments[i]);if(s2<0){s2+=1}}mash=null;return function(){var t=2091639*s0+c*2.3283064365386963e-10;s0=s1;s1=s2;return s2=t-(c=t|0)}}function masher(){var n=4022871197;return function(data){data=data.toString();for(var i=0;i<data.length;i++){n+=data.charCodeAt(i);var h=.02519603282416938*n;n=h>>>0;h-=n;h*=n;n=h>>>0;h-=n;n+=h*4294967296}return(n>>>0)*2.3283064365386963e-10}}if(typeof define!=="undefined"&&define.amd)define(function(){return SimplexNoise});if(typeof exports!=="undefined")exports.SimplexNoise=SimplexNoise;else if(typeof window!=="undefined")window.SimplexNoise=SimplexNoise;if(typeof module!=="undefined"){module.exports=SimplexNoise}})()},{}],18:[function(require,module,exports){var byteToHex=[];for(var i=0;i<256;++i){byteToHex[i]=(i+256).toString(16).substr(1)}function bytesToUuid(buf,offset){var i=offset||0;var bth=byteToHex;return[bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],"-",bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]],bth[buf[i++]]].join("")}module.exports=bytesToUuid},{}],19:[function(require,module,exports){var getRandomValues=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues){var rnds8=new Uint8Array(16);module.exports=function whatwgRNG(){getRandomValues(rnds8);return rnds8}}else{var rnds=new Array(16);module.exports=function mathRNG(){for(var i=0,r;i<16;i++){if((i&3)===0)r=Math.random()*4294967296;rnds[i]=r>>>((i&3)<<3)&255}return rnds}}},{}],20:[function(require,module,exports){var rng=require("./lib/rng");var bytesToUuid=require("./lib/bytesToUuid");function v4(options,buf,offset){var i=buf&&offset||0;if(typeof options=="string"){buf=options==="binary"?new Array(16):null;options=null}options=options||{};var rnds=options.random||(options.rng||rng)();rnds[6]=rnds[6]&15|64;rnds[8]=rnds[8]&63|128;if(buf){for(var ii=0;ii<16;++ii){buf[i+ii]=rnds[ii]}}return buf||bytesToUuid(rnds)}module.exports=v4},{"./lib/bytesToUuid":18,"./lib/rng":19}],21:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=BABYLON})},{}],22:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","./manager","./replicate","./network/loopback-network","./interfaces"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const manager_1=require("./manager");const replicate_1=require("./replicate");const loopback_network_1=require("./network/loopback-network");const interfaces_1=require("./interfaces");class Conductor{constructor({entityClasses:entityClasses,context:moreContext={}}){const state=mobx_1.observable({entries:new Map});const entities=this.entities=new Map;const manager=new manager_1.Manager({state:state,entities:entities});const mode=interfaces_1.ModeOfConduct.Alone;const network=new loopback_network_1.LoopbackNetwork({mode:mode,state:state,handleMessages:messages=>{for(const message of messages){const entity=entities.get(message.to);if(entity)entity.inbox.unshift(message);else console.warn(`message undeliverable: to entity id "${message.to}"`,message)}}});const context=Object.assign({},moreContext,{mode:mode,manager:manager,network:network});mobx_1.autorun(()=>replicate_1.replicate({context:context,state:state,entities:entities,entityClasses:entityClasses}));this.manager=manager}logicTick(tickInfo){for(const[id,entity]of this.entities)entity.logicTick(tickInfo)}hyperTick(tickInfo){for(const[id,entity]of this.entities)entity.hyperTick(tickInfo)}slowTick(tickInfo){for(const[id,entity]of this.entities)entity.slowTick(tickInfo)}}exports.Conductor=Conductor})},{"./interfaces":24,"./manager":25,"./network/loopback-network":26,"./replicate":38,mobx:3}],23:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","deep-freeze","./toolbox/copy"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const deepFreeze=require("deep-freeze");const copy_1=require("./toolbox/copy");class Entity{constructor(options){this.inbox=[];Object.assign(this,options)}get entry(){const raw=this.state.entries.get(this.id);return raw?deepFreeze(copy_1.copy(raw)):raw}logicTick(tick){}hyperTick(tick){}slowTick(tick){}}__decorate([mobx_1.observable],Entity.prototype,"inbox",void 0);exports.Entity=Entity;class GenericEntity extends Entity{initialize(){return __awaiter(this,void 0,void 0,function*(){})}deconstruct(){return __awaiter(this,void 0,void 0,function*(){})}}exports.GenericEntity=GenericEntity})},{"./toolbox/copy":42,"deep-freeze":1,mobx:3}],24:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ModeOfConduct;(function(ModeOfConduct){ModeOfConduct[ModeOfConduct["Alone"]=0]="Alone";ModeOfConduct[ModeOfConduct["Host"]=1]="Host";ModeOfConduct[ModeOfConduct["Client"]=2]="Client"})(ModeOfConduct=exports.ModeOfConduct||(exports.ModeOfConduct={}));exports.VectorZero=[0,0,0];exports.QuaternionZero=[0,0,0,0]})},{}],25:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","uuid/v4"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const uuid=require("uuid/v4");class Manager{constructor({state:state,entities:entities}){Object.assign(this,{state:state,entities:entities})}getEntities(){return Array.from(this.entities).map(([id,entity])=>entity)}addEntry(entry){const id=uuid();this.state.entries.set(id,entry);return id}removeEntry(id){this.state.entries.delete(id)}}exports.Manager=Manager})},{"uuid/v4":20}],26:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","./network"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const network_1=require("./network");class LoopbackNetwork extends network_1.Network{send(update){this.applyUpdate(update)}}exports.LoopbackNetwork=LoopbackNetwork})},{"./network":27}],27:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","../toolbox/copy","../toolbox/assign-props-onto-map"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const copy_1=require("../toolbox/copy");const assign_props_onto_map_1=require("../toolbox/assign-props-onto-map");class Network{constructor({state:state,mode:mode,handleMessages:handleMessages}){Object.assign(this,{state:state,mode:mode,handleMessages:handleMessages})}applyUpdate(update){const{state:state}=this;const{allEntries:allEntries,someEntries:someEntries}=update;if(allEntries){state.entries.clear();assign_props_onto_map_1.assignPropsOntoMap(copy_1.copy(allEntries),state.entries)}if(someEntries){Object.keys(someEntries).forEach(key=>{const entry=state.entries.get(key);if(entry){const fresh=copy_1.copy(someEntries[key]);state.entries.set(key,fresh)}})}this.handleMessages(update.messages)}}__decorate([mobx_1.action],Network.prototype,"applyUpdate",null);exports.Network=Network})},{"../toolbox/assign-props-onto-map":40,"../toolbox/copy":42,mobx:3}],28:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","preact","mobx-preact"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const preact_1=require("preact");const mobx_preact_1=require("mobx-preact");let MainMenu=class MainMenu extends preact_1.Component{constructor(){super(...arguments);this.handleLookSensitivityChange=(event=>{this.props.store.setLookSensitivity(event.target.value)})}render(){const{statisticsStore:statisticsStore}=this.props.store;return preact_1.h("div",{className:"main-menu"},this.renderLookSensitivitySetting(),preact_1.h(Statistics,Object.assign({},{statisticsStore:statisticsStore})))}renderLookSensitivitySetting(){const{store:store}=this.props;const std={min:1,max:100,value:store.lookSensitivity};return preact_1.h("div",{class:"setting look-sensitivity"},preact_1.h("label",null,"Look sensitivity"),preact_1.h("div",{class:"input-wrapper"},preact_1.h("input",Object.assign({className:"look-sensitivity-range",type:"range"},std,{onChange:this.handleLookSensitivityChange,onMouseMove:this.handleLookSensitivityChange}))),preact_1.h("div",{class:"input-wrapper"},preact_1.h("input",Object.assign({className:"look-sensitivity-number",type:"number"},std,{onChange:this.handleLookSensitivityChange,onKeyDown:this.handleLookSensitivityChange}))))}};MainMenu=__decorate([mobx_preact_1.observer],MainMenu);exports.MainMenu=MainMenu;let Statistics=class Statistics extends preact_1.Component{render(){const{statisticsStore:statisticsStore}=this.props;return preact_1.h("div",{className:"stats"},preact_1.h("div",{"data-stat":"hyper"},preact_1.h("label",null,"Hyper"),preact_1.h("output",null,statisticsStore.hyperTickRate.toFixed(0))),preact_1.h("div",{"data-stat":"logic"},preact_1.h("label",null,"Logic"),preact_1.h("output",null,statisticsStore.logicTickRate.toFixed(0))),preact_1.h("div",{"data-stat":"slow"},preact_1.h("label",null,"Slow"),preact_1.h("output",null,statisticsStore.slowTickRate.toFixed(0))),preact_1.h("div",{"data-stat":"render"},preact_1.h("label",null,"Render"),preact_1.h("output",null,statisticsStore.renderFrameRate.toFixed(0))),preact_1.h("div",{"data-stat":"timeline"},preact_1.h("label",null,"Time"),preact_1.h("output",null,(statisticsStore.timeline/1e3).toFixed(1))))}};Statistics=__decorate([mobx_preact_1.observer],Statistics)})},{"mobx-preact":2,preact:6}],29:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","preact","mobx-preact"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const preact_1=require("preact");const mobx_preact_1=require("mobx-preact");let MenuBar=class MenuBar extends preact_1.Component{render(){const{store:barStore}=this.props;return preact_1.h("div",{className:"menu-bar"},barStore.menus.map(({store:menuStore,Component:MenuComponent,open:open,setOpen:setOpen})=>preact_1.h("div",{className:"menu","data-open":open?"true":"false"},preact_1.h("div",{className:"menu-button",onClick:()=>setOpen()},menuStore.label),open?preact_1.h("div",{className:"menu-panel"},preact_1.h(MenuComponent,{store:menuStore})):null)))}};MenuBar=__decorate([mobx_preact_1.observer],MenuBar);exports.MenuBar=MenuBar})},{"mobx-preact":2,preact:6}],30:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","preact","mobx-preact","./stick","./menu-bar"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const preact_1=require("preact");const mobx_preact_1=require("mobx-preact");const stick_1=require("./stick");const menu_bar_1=require("./menu-bar");let Overlay=class Overlay extends preact_1.Component{render(){const{overlayStore:overlayStore}=this.props;return preact_1.h("div",{className:"overlay"},preact_1.h(menu_bar_1.MenuBar,{store:overlayStore.menuBar}),overlayStore.sticksEngaged?preact_1.h("div",{className:"thumbsticks"},preact_1.h(stick_1.Stick,{stickStore:overlayStore.stick1}),preact_1.h(stick_1.Stick,{stickStore:overlayStore.stick2})):null)}};Overlay=__decorate([mobx_preact_1.observer],Overlay);exports.Overlay=Overlay})},{"./menu-bar":29,"./stick":31,"mobx-preact":2,preact:6}],31:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","preact","mobx-preact","../../../game/tools/thumbstick"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const preact_1=require("preact");const mobx_preact_1=require("mobx-preact");const thumbstick_1=require("../../../game/tools/thumbstick");let Stick=class Stick extends preact_1.Component{componentDidMount(){this.thumbstick=new thumbstick_1.Thumbstick({zone:this.base,onMove:info=>{const{stickStore:stickStore}=this.props;stickStore.setInfo(info)}})}componentWillUnmount(){this.thumbstick.destructor();this.thumbstick=null}render(){const{stickStore:stickStore}=this.props;return preact_1.h("div",{className:"stick",style:{display:stickStore.active?"block":"none"}})}};Stick=__decorate([mobx_preact_1.observer],Stick);exports.Stick=Stick})},{"../../../game/tools/thumbstick":76,"mobx-preact":2,preact:6}],32:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","./menu-store"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const menu_store_1=require("./menu-store");const storageKeyLookSensitivity="monarch-look-sensitivity";const getStorageLookSensitivity=()=>{const value=localStorage.getItem(storageKeyLookSensitivity);return value?JSON.parse(value):50};const saveStorageLookSensitivity=value=>{localStorage.setItem(storageKeyLookSensitivity,JSON.stringify(value))};class MainMenuStore extends menu_store_1.MenuStore{constructor({statisticsStore:statisticsStore}){super();this.label="Menu";this.lookSensitivity=getStorageLookSensitivity();this.statisticsStore=statisticsStore}setLookSensitivity(value){this.lookSensitivity=value;saveStorageLookSensitivity(value)}}__decorate([mobx_1.observable],MainMenuStore.prototype,"label",void 0);__decorate([mobx_1.observable],MainMenuStore.prototype,"lookSensitivity",void 0);__decorate([mobx_1.observable],MainMenuStore.prototype,"statisticsStore",void 0);__decorate([mobx_1.action],MainMenuStore.prototype,"setLookSensitivity",null);exports.MainMenuStore=MainMenuStore})},{"./menu-store":34,mobx:3}],33:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");class MenuBarStore{constructor(){this.menus=[]}addMenu(store,Component){this.menus.push({store:store,Component:Component,open:false,setOpen:open=>this.setOpen(store,open)})}removeMenu(obsolete){this.menus=this.menus.filter(({store:store})=>store!==obsolete)}setOpen(store,open){const menu=this.menus.find(m=>m.store===store);const lastOpen=menu.open;for(const menu of this.menus)menu.open=false;menu.open=open===undefined||open===null?!lastOpen:open}}__decorate([mobx_1.observable],MenuBarStore.prototype,"menus",void 0);__decorate([mobx_1.action],MenuBarStore.prototype,"addMenu",null);__decorate([mobx_1.action],MenuBarStore.prototype,"removeMenu",null);__decorate([mobx_1.action],MenuBarStore.prototype,"setOpen",null);exports.MenuBarStore=MenuBarStore})},{mobx:3}],34:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");class MenuStore{}__decorate([mobx_1.observable],MenuStore.prototype,"label",void 0);exports.MenuStore=MenuStore})},{mobx:3}],35:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","../components/main-menu","./stick-store","./menu-bar-store","./main-menu-store"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const main_menu_1=require("../components/main-menu");const stick_store_1=require("./stick-store");const menu_bar_store_1=require("./menu-bar-store");const main_menu_store_1=require("./main-menu-store");class OverlayStore{constructor({statisticsStore:statisticsStore}){this.stick1=new stick_store_1.StickStore;this.stick2=new stick_store_1.StickStore;this.stickSubscribers=0;const mainMenuStore=this.mainMenuStore=new main_menu_store_1.MainMenuStore({statisticsStore:statisticsStore});const menuBar=this.menuBar=new menu_bar_store_1.MenuBarStore;menuBar.addMenu(mainMenuStore,main_menu_1.MainMenu)}get sticksEngaged(){return this.stickSubscribers>0}addStickSubscriber(){this.stickSubscribers+=1}subtractStickSubscriber(){this.stickSubscribers-=1}}__decorate([mobx_1.observable],OverlayStore.prototype,"stickSubscribers",void 0);__decorate([mobx_1.computed],OverlayStore.prototype,"sticksEngaged",null);__decorate([mobx_1.action],OverlayStore.prototype,"addStickSubscriber",null);__decorate([mobx_1.action],OverlayStore.prototype,"subtractStickSubscriber",null);exports.OverlayStore=OverlayStore})},{"../components/main-menu":28,"./main-menu-store":32,"./menu-bar-store":33,"./stick-store":37,mobx:3}],36:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");class StatisticsStore{constructor(){this.timeline=0;this.slowTickRate=0;this.logicTickRate=0;this.hyperTickRate=0;this.renderFrameRate=0}recordTickerStats({timeline:timeline,slowTickRate:slowTickRate,logicTickRate:logicTickRate,hyperTickRate:hyperTickRate,renderFrameRate:renderFrameRate}){this.timeline=timeline;this.slowTickRate=slowTickRate;this.logicTickRate=logicTickRate;this.hyperTickRate=hyperTickRate;this.renderFrameRate=renderFrameRate}recordViewportStats({renderFrameRate:renderFrameRate}){this.renderFrameRate=renderFrameRate}}__decorate([mobx_1.observable],StatisticsStore.prototype,"timeline",void 0);__decorate([mobx_1.observable],StatisticsStore.prototype,"slowTickRate",void 0);__decorate([mobx_1.observable],StatisticsStore.prototype,"logicTickRate",void 0);__decorate([mobx_1.observable],StatisticsStore.prototype,"hyperTickRate",void 0);__decorate([mobx_1.observable],StatisticsStore.prototype,"renderFrameRate",void 0);__decorate([mobx_1.action],StatisticsStore.prototype,"recordTickerStats",null);__decorate([mobx_1.action],StatisticsStore.prototype,"recordViewportStats",null);exports.StatisticsStore=StatisticsStore})},{mobx:3}],37:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");class StickStore{constructor(){this.active=true}setInfo({angle:angle,force:force}){this.angle=angle;this.force=force}setActive(active){this.active=active}}__decorate([mobx_1.observable],StickStore.prototype,"angle",void 0);__decorate([mobx_1.observable],StickStore.prototype,"force",void 0);__decorate([mobx_1.observable],StickStore.prototype,"active",void 0);__decorate([mobx_1.action],StickStore.prototype,"setInfo",null);__decorate([mobx_1.action],StickStore.prototype,"setActive",null);exports.StickStore=StickStore})},{mobx:3}],38:[function(require,module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","./toolbox/get-entity-class"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const get_entity_class_1=require("./toolbox/get-entity-class");function replicate({context:context,state:state,entities:entities,entityClasses:entityClasses}){return __awaiter(this,void 0,void 0,function*(){const initiates=[];const degenerates=[];for(const[id,entry]of Array.from(state.entries)){if(!entities.has(id)){const Entity=get_entity_class_1.getEntityClass(entry.type,entityClasses);const entity=new Entity({id:id,context:context,state:state});entities.set(id,entity);initiates.push(entity.initialize())}}for(const id of entities.keys()){if(!state.entries.has(id)){const entity=entities.get(id);degenerates.push(entity.deconstruct());entities.delete(id)}}yield Promise.all([...initiates,...degenerates])})}exports.replicate=replicate})},{"./toolbox/get-entity-class":46}],39:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","./toolbox/get-time"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const get_time_1=require("./toolbox/get-time");const defaultTickerOptions={start:true,period:10};class Ticker{constructor(opts){this.tickRate=0;this.timeline=0;this.active=false;this.lastTime=get_time_1.getTime();this.records=[];const options=Object.assign({},defaultTickerOptions,opts);this.tickAction=options.tickAction;this.period=options.period;if(options.start)this.start()}deconstruct(){this.tickAction=null;this.records=[];this.stop()}start(){if(this.active)return;else{this.active=true;this.lastTime=get_time_1.getTime();console.log(this.period);this.interval=setInterval(()=>this.loop(),this.period)}}stop(){clearInterval(this.interval);this.interval=undefined;this.active=false}loop(){if(!this.active)return;const currentTime=get_time_1.getTime();const timeSinceLastTick=currentTime-this.lastTime;this.timeline+=timeSinceLastTick;this.tickRate=this.calculateTickRate(timeSinceLastTick);this.tickAction({timeSinceLastTick:timeSinceLastTick,timeline:this.timeline});this.lastTime=currentTime}calculateTickRate(timeSinceLastTick){this.records.unshift(timeSinceLastTick);while(this.records.length>20)this.records.pop();const sum=this.records.reduce((a,b)=>a+b,0);const averageTimePerTick=sum/this.records.length;return 1e3/averageTimePerTick}}exports.Ticker=Ticker})},{"./toolbox/get-time":47}],40:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function assignPropsOntoMap(obj,map){Object.keys(obj).forEach(key=>map.set(key,obj[key]))}exports.assignPropsOntoMap=assignPropsOntoMap})},{}],41:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function cap(value,min,max){return value<min?min:value>max?max:value}exports.cap=cap})},{}],42:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function copy(o){return JSON.parse(JSON.stringify(o))}exports.copy=copy})},{}],43:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../babylon"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../babylon");exports.createRoundCameraRig=(({scene:scene,canvas:canvas,targetPosition:targetPosition,radius:radius,active:active})=>{const targetVector=babylon_1.default.Vector3.FromArray(targetPosition);const name="camera";const alpha=0;const beta=0;const camera=new babylon_1.default.ArcRotateCamera(name,alpha,beta,radius,targetVector,scene);camera.attachControl(canvas);if(active)scene.activeCamera=camera;return camera})})},{"../../babylon":21}],44:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.environment=new Function("try{return this===window}catch(e){return false}")()?"browser":"node"})},{}],45:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","shortid"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const shortid=require("shortid");exports.generateId=(()=>shortid.generate())})},{shortid:8}],46:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getEntityClass=((type,entityClasses)=>{const Class=entityClasses[type];if(!Class)throw new Error(`Unknown entity class "${type}"`);return Class})})},{}],47:[function(require,module,exports){(function(process){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","./environment"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const environment_1=require("./environment");function getTime(){if(environment_1.environment==="browser")return performance.now();else{const t=process.hrtime();return Math.round(t[0]*1e3+t[1]/1e6)}}exports.getTime=getTime})}).call(this,require("_process"))},{"./environment":44,_process:7}],48:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function getVectorMagnitude(vector){return Math.sqrt(Math.pow(vector.x,2)+Math.pow(vector.y,2)+Math.pow(vector.z,2))}exports.getVectorMagnitude=getVectorMagnitude})},{}],49:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.identical=((a,b)=>JSON.stringify(a)===JSON.stringify(b))})},{}],50:[function(require,module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../babylon"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../babylon");function loadBabylonAssets({path:path,scene:scene,onProgress:onProgress=(event=>{})}){return __awaiter(this,void 0,void 0,function*(){babylon_1.default.SceneLoader.ShowLoadingScreen=false;return babylon_1.default.SceneLoader.LoadAssetContainerAsync(path,null,scene,onProgress)})}exports.loadBabylonAssets=loadBabylonAssets})},{"../../babylon":21}],51:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.mixin=((...sources)=>target=>{for(const source of sources){for(const name of Object.getOwnPropertyNames(source.prototype))target.prototype[name]=source.prototype[name]}})})},{}],52:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});function pathBreakdown(path){let dirpath="";let filename="";if(path.includes("/")){const parts=path.split("/");filename=parts.pop();dirpath=parts.join("/")+"/"}else{filename=path}return{dirpath:dirpath,filename:filename}}exports.pathBreakdown=pathBreakdown})},{}],53:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class ServiceMaster{deconstruct(){for(const service of this.services)service.deconstruct()}start(){for(const service of this.services)service.start()}stop(){for(const service of this.services)service.stop()}}exports.ServiceMaster=ServiceMaster})},{}],54:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.sleep=(milliseconds=>new Promise((resolve,reject)=>setTimeout(resolve,milliseconds)))})},{}],55:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../babylon","./toolbox/get-time"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../babylon");const get_time_1=require("./toolbox/get-time");class Viewport{constructor({engine:engine,scene:scene,window:window,canvas:canvas,start:start=true}){this.active=false;this.pick=new babylon_1.default.PickingInfo;this.lastFrameTime=get_time_1.getTime();this.locked=false;this.renderFrameRate=0;this.listeners={resize:()=>{this.engine.resize()},mousemove:()=>{this.pick=this.scene.pick(this.scene.pointerX,this.scene.pointerY)},pointerlockchange:()=>{if(this.scene.activeCamera){const locked=this.window.document.pointerLockElement===this.canvas;this.locked=locked}}};canvas.onclick=(()=>canvas.requestPointerLock());const fallbackCamera=new babylon_1.default.Camera("viewport.fallback.camera",new babylon_1.default.Vector3(0,1,-15),scene);if(!scene.activeCamera)scene.activeCamera=fallbackCamera;Object.assign(this,{engine:engine,scene:scene,window:window,canvas:canvas,fallbackCamera:fallbackCamera});if(start)this.start()}start(){const{window:window,listeners:listeners,engine:engine,scene:scene}=this;this.active=true;window.addEventListener("resize",listeners.resize);window.addEventListener("mousemove",listeners.mousemove);window.document.addEventListener("pointerlockchange",listeners.pointerlockchange);engine.runRenderLoop(()=>{if(!this.active)return null;const since=get_time_1.getTime()-this.lastFrameTime;scene.render();this.lastFrameTime=get_time_1.getTime();this.renderFrameRate=engine.getFps()})}stop(){const{window:window,listeners:listeners,engine:engine}=this;this.active=false;this.renderFrameRate=0;window.removeEventListener("resize",listeners.resize);window.removeEventListener("mousemove",listeners.mousemove);window.document.removeEventListener("pointerlockchange",listeners.pointerlockchange);engine.stopRenderLoop()}deconstruct(){}}exports.Viewport=Viewport})},{"../babylon":21,"./toolbox/get-time":47}],56:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","./input"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const input_1=require("./input");exports.inputKeycodeRelations=[{input:input_1.Input.W,code:87},{input:input_1.Input.A,code:65},{input:input_1.Input.S,code:83},{input:input_1.Input.D,code:68},{input:input_1.Input.Q,code:81},{input:input_1.Input.E,code:69},{input:input_1.Input.Z,code:90},{input:input_1.Input.X,code:88},{input:input_1.Input.C,code:67},{input:input_1.Input.R,code:82},{input:input_1.Input.F,code:70},{input:input_1.Input.V,code:86},{input:input_1.Input.Shift,code:16},{input:input_1.Input.Ctrl,code:17},{input:input_1.Input.Alt,code:18},{input:input_1.Input.Space,code:32},{input:input_1.Input.ArrowLeft,code:37},{input:input_1.Input.ArrowUp,code:38},{input:input_1.Input.ArrowRight,code:39},{input:input_1.Input.ArrowDown,code:40},{input:input_1.Input.One,code:49},{input:input_1.Input.Two,code:50},{input:input_1.Input.Three,code:51},{input:input_1.Input.Four,code:52},{input:input_1.Input.Five,code:53},{input:input_1.Input.Six,code:54},{input:input_1.Input.Seven,code:55},{input:input_1.Input.Eight,code:56},{input:input_1.Input.Nine,code:57},{input:input_1.Input.Zero,code:48},{input:input_1.Input.Backspace,code:8},{input:input_1.Input.Delete,code:46}]})},{"./input":57}],57:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Input;(function(Input){Input[Input["MouseLeft"]=0]="MouseLeft";Input[Input["MouseRight"]=1]="MouseRight";Input[Input["MouseMiddle"]=2]="MouseMiddle";Input[Input["Esc"]=3]="Esc";Input[Input["Backtick"]=4]="Backtick";Input[Input["One"]=5]="One";Input[Input["Two"]=6]="Two";Input[Input["Three"]=7]="Three";Input[Input["Four"]=8]="Four";Input[Input["Five"]=9]="Five";Input[Input["Six"]=10]="Six";Input[Input["Seven"]=11]="Seven";Input[Input["Eight"]=12]="Eight";Input[Input["Nine"]=13]="Nine";Input[Input["Zero"]=14]="Zero";Input[Input["Minus"]=15]="Minus";Input[Input["Plus"]=16]="Plus";Input[Input["Backspace"]=17]="Backspace";Input[Input["Tab"]=18]="Tab";Input[Input["Q"]=19]="Q";Input[Input["W"]=20]="W";Input[Input["E"]=21]="E";Input[Input["R"]=22]="R";Input[Input["T"]=23]="T";Input[Input["Y"]=24]="Y";Input[Input["U"]=25]="U";Input[Input["I"]=26]="I";Input[Input["O"]=27]="O";Input[Input["P"]=28]="P";Input[Input["BracketLeft"]=29]="BracketLeft";Input[Input["BracketRight"]=30]="BracketRight";Input[Input["Backslash"]=31]="Backslash";Input[Input["CapsLock"]=32]="CapsLock";Input[Input["A"]=33]="A";Input[Input["S"]=34]="S";Input[Input["D"]=35]="D";Input[Input["F"]=36]="F";Input[Input["G"]=37]="G";Input[Input["H"]=38]="H";Input[Input["J"]=39]="J";Input[Input["K"]=40]="K";Input[Input["L"]=41]="L";Input[Input["Semicolon"]=42]="Semicolon";Input[Input["Quote"]=43]="Quote";Input[Input["Enter"]=44]="Enter";Input[Input["Shift"]=45]="Shift";Input[Input["Z"]=46]="Z";Input[Input["X"]=47]="X";Input[Input["C"]=48]="C";Input[Input["V"]=49]="V";Input[Input["B"]=50]="B";Input[Input["N"]=51]="N";Input[Input["M"]=52]="M";Input[Input["Comma"]=53]="Comma";Input[Input["Period"]=54]="Period";Input[Input["Slash"]=55]="Slash";Input[Input["ShiftRight"]=56]="ShiftRight";Input[Input["Ctrl"]=57]="Ctrl";Input[Input["Super"]=58]="Super";Input[Input["Alt"]=59]="Alt";Input[Input["Space"]=60]="Space";Input[Input["AltRight"]=61]="AltRight";Input[Input["SuperRight"]=62]="SuperRight";Input[Input["CtrlRight"]=63]="CtrlRight";Input[Input["Insert"]=64]="Insert";Input[Input["Home"]=65]="Home";Input[Input["PageUp"]=66]="PageUp";Input[Input["Delete"]=67]="Delete";Input[Input["End"]=68]="End";Input[Input["PageDown"]=69]="PageDown";Input[Input["ArrowUp"]=70]="ArrowUp";Input[Input["ArrowDown"]=71]="ArrowDown";Input[Input["ArrowLeft"]=72]="ArrowLeft";Input[Input["ArrowRight"]=73]="ArrowRight"})(Input=exports.Input||(exports.Input={}))})},{}],58:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","./input"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const input_1=require("./input");exports.otherwiseSupportedInputs=[input_1.Input.MouseLeft,input_1.Input.MouseMiddle,input_1.Input.MouseRight]})},{"./input":57}],59:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","./input","./input-keycode-relations","./otherwise-supported-inputs"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const input_1=require("./input");const input_keycode_relations_1=require("./input-keycode-relations");const otherwise_supported_inputs_1=require("./otherwise-supported-inputs");class Watcher{constructor({eventTarget:eventTarget=window,bindings:bindings}){this.listeners={keydown:event=>{const struckInput=this.getInputByKeycode(event.keyCode);if(struckInput===null)return;for(const struckAlias of this.getAliasesForInput(struckInput))this.status[struckAlias]=true},keyup:event=>{const releasedInput=this.getInputByKeycode(event.keyCode);if(releasedInput===null)return;for(const releasedAlias of this.getAliasesForInput(releasedInput))this.status[releasedAlias]=false},mousedown:event=>{for(const struckAlias of this.getAliasesForInput(input_1.Input.MouseLeft))this.status[struckAlias]=true},mouseup:event=>{for(const releasedAlias of this.getAliasesForInput(input_1.Input.MouseLeft))this.status[releasedAlias]=false}};this.eventTarget=eventTarget;this.bindings=bindings;const status={};for(const alias of Object.keys(bindings)){const inputs=bindings[alias];for(const input of inputs)if(input_keycode_relations_1.inputKeycodeRelations.find(relation=>relation.input===input)!==undefined&&otherwise_supported_inputs_1.otherwiseSupportedInputs.find(supported=>supported===input)!==undefined)throw`unknown input: ${input}`;status[alias]=null}this.status=status;this.start()}start(){for(const eventType of Object.keys(this.listeners)){const listener=this.listeners[eventType];this.eventTarget.addEventListener(eventType,listener)}}stop(){for(const eventType of Object.keys(this.listeners)){const listener=this.listeners[eventType];this.eventTarget.removeEventListener(eventType,listener)}}destructor(){this.stop()}getInputByKeycode(code){const relation=input_keycode_relations_1.inputKeycodeRelations.find(relationship=>relationship.code===code);return relation?relation.input:null}getAliasesForInput(input){return Object.keys(this.bindings).filter(alias=>this.bindings[alias].some(i=>i===input))}}__decorate([mobx_1.observable],Watcher.prototype,"status",void 0);exports.Watcher=Watcher})},{"./input":57,"./input-keycode-relations":56,"./otherwise-supported-inputs":58,mobx:3}],60:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../../babylon"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../../babylon");exports.createCubeGhostMesh=(scene=>{const material=new babylon_1.default.StandardMaterial("cube-ghost-material",scene);material.emissiveColor=new babylon_1.default.Color3(1,1,1);material.wireframe=true;material.alpha=.1;const mesh=babylon_1.default.Mesh.CreateBox("cube-ghost-mesh",1,scene);mesh.material=material;mesh.isPickable=false;return mesh})})},{"../../../babylon":21}],61:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../../babylon"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../../babylon");exports.createCubeMesh=(scene=>{const material=new babylon_1.default.StandardMaterial("cube-material",scene);material.emissiveColor=new babylon_1.default.Color3(.1,.6,.9);const mesh=babylon_1.default.Mesh.CreateBox("cube-mesh",1,scene);mesh.material=material;return mesh})})},{"../../../babylon":21}],62:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../../babylon"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../../babylon");exports.createCubeProposalMesh=(scene=>{const material=new babylon_1.default.StandardMaterial("cube-proposal-material",scene);const color=new babylon_1.default.Color3(.4,.8,1);material.alpha=.75;material.wireframe=true;material.emissiveColor=material.diffuseColor=material.ambientColor=material.specularColor=color;const mesh=babylon_1.default.Mesh.CreateBox("cube-proposal-mesh",1,scene);mesh.material=material;mesh.isPickable=false;return mesh})})},{"../../../babylon":21}],63:[function(require,module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","../../../babylon","../../../core/entity","../../../core/toolbox/copy","./create-cube-mesh","./create-cube-ghost-mesh"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const babylon_1=require("../../../babylon");const entity_1=require("../../../core/entity");const copy_1=require("../../../core/toolbox/copy");const create_cube_mesh_1=require("./create-cube-mesh");const create_cube_ghost_mesh_1=require("./create-cube-ghost-mesh");class Cube extends entity_1.Entity{constructor(){super(...arguments);this.last=0}initialize(){return __awaiter(this,void 0,void 0,function*(){if(!Cube.assets)Cube.assets=yield this.loadAssets();this.meshes=this.instanceAssets();this.establishReactions()})}logicTick(tickInfo){if(this.isTooSoon(tickInfo.timeline,200))return;const{position:babylonPosition,rotationQuaternion:babylonRotation}=this.meshes.mesh;const position=babylonPosition.asArray();const rotation=babylonRotation.asArray();this.updateState({position:position,rotation:rotation})}deconstruct(){return __awaiter(this,void 0,void 0,function*(){const{mesh:mesh,ghostMesh:ghostMesh}=yield this.meshes;for(const dispose of this.reactions)dispose();mesh.dispose();ghostMesh.dispose()})}loadAssets(){return __awaiter(this,void 0,void 0,function*(){const{scene:scene}=this.context;const meshBase=create_cube_mesh_1.createCubeMesh(scene);meshBase.isVisible=false;const ghostMeshBase=create_cube_ghost_mesh_1.createCubeGhostMesh(scene);ghostMeshBase.isVisible=false;return{meshBase:meshBase,ghostMeshBase:ghostMeshBase}})}instanceAssets(){const{entry:entry,context:context,id:id}=this;const{scene:scene}=context;const{size:size,mass:mass,restitution:restitution,friction:friction}=entry.physique;const{position:position}=entry.bearings;const{meshBase:meshBase,ghostMeshBase:ghostMeshBase}=Cube.assets;const mesh=meshBase.createInstance("cube-instance");mesh.scaling=babylon_1.default.Vector3.FromArray(size);mesh.position=babylon_1.default.Vector3.FromArray(position);mesh.physicsImpostor=new babylon_1.default.PhysicsImpostor(mesh,babylon_1.default.PhysicsImpostor.BoxImpostor,{mass:mass,restitution:restitution,friction:friction},scene);mesh.physicsImpostor.physicsBody.allowSleep=true;mesh["entryId"]=id;const ghostMesh=ghostMeshBase.createInstance("cube-ghost-instance");ghostMesh.scaling=babylon_1.default.Vector3.FromArray(size);ghostMesh.position=babylon_1.default.Vector3.FromArray(position);ghostMesh.isPickable=false;return{mesh:mesh,ghostMesh:ghostMesh}}establishReactions(){this.reactions=[mobx_1.autorun(()=>{if(!this.entry)return;const{position:position,rotation:rotation}=this.entry.bearings;const{ghostMesh:ghostMesh}=this.meshes;ghostMesh.position=babylon_1.default.Vector3.FromArray(position);ghostMesh.rotationQuaternion=babylon_1.default.Quaternion.FromArray(rotation)})]}isTooSoon(timeline,threshold){const since=timeline-this.last;if(since<threshold){return true}else{this.last=timeline;return false}}updateState({position:position,rotation:rotation}){const{id:id}=this;const{network:network}=this.context;const entry=copy_1.copy(this.entry);entry.bearings.position=position;entry.bearings.rotation=rotation;const delay=100;setTimeout(()=>{network.send({messages:[],someEntries:{[id]:entry}})},delay)}}exports.Cube=Cube})},{"../../../babylon":21,"../../../core/entity":23,"../../../core/toolbox/copy":42,"./create-cube-ghost-mesh":60,"./create-cube-mesh":61,mobx:3}],64:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../../babylon"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../../babylon");function createLaserDot({scene:scene}){const material=new babylon_1.default.StandardMaterial("laser-dot-mat",scene);const red=new babylon_1.default.Color3(255,0,0);material.alpha=.5;material.emissiveColor=material.diffuseColor=material.ambientColor=material.specularColor=red;const mesh=babylon_1.default.Mesh.CreateIcoSphere("laser-dot",{radius:.1,flat:false,subdivisions:2},scene);mesh.material=material;mesh.isPickable=false;return mesh}exports.createLaserDot=createLaserDot})},{"../../../babylon":21}],65:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","../../../core/overlay/stores/menu-store"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const menu_store_1=require("../../../core/overlay/stores/menu-store");class AdditionTool{constructor(){this.label="Add";this.tooltip="Addition tool, insert props into the world"}}exports.AdditionTool=AdditionTool;class SelectionTool{constructor(){this.label="Select";this.tooltip="Selection tool, edit or remove props"}}exports.SelectionTool=SelectionTool;class EditorMenuStore extends menu_store_1.MenuStore{constructor(){super(...arguments);this.label="Editing";this.activeTool=null;this.tools=[new AdditionTool,new SelectionTool]}setActiveTool(tool){this.activeTool=tool}}__decorate([mobx_1.observable],EditorMenuStore.prototype,"label",void 0);__decorate([mobx_1.observable],EditorMenuStore.prototype,"activeTool",void 0);__decorate([mobx_1.observable],EditorMenuStore.prototype,"tools",void 0);__decorate([mobx_1.action],EditorMenuStore.prototype,"setActiveTool",null);exports.EditorMenuStore=EditorMenuStore})},{"../../../core/overlay/stores/menu-store":34,mobx:3}],66:[function(require,module,exports){var __decorate=this&&this.__decorate||function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","preact","mobx-preact"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const preact_1=require("preact");const mobx_preact_1=require("mobx-preact");let EditorMenu=class EditorMenu extends preact_1.Component{constructor(){super(...arguments);this.handleToolClick=(event=>{const{store:store}=this.props;const label=event.srcElement.textContent.trim();const tool=store.tools.find(t=>t.label.toLowerCase()===label.toLowerCase());store.setActiveTool(store.activeTool===tool?null:tool);event.preventDefault();return false})}renderToolbar(){const{store:store}=this.props;return preact_1.h("div",{class:"tools"},store.tools.map(tool=>preact_1.h("button",{className:"tool",title:tool.tooltip,onClick:this.handleToolClick,"data-active":store.activeTool===tool?"true":"false"},tool.label)))}render(){return preact_1.h("div",{class:"editor-menu"},this.renderToolbar())}};EditorMenu=__decorate([mobx_preact_1.observer],EditorMenu);exports.EditorMenu=EditorMenu})},{"mobx-preact":2,preact:6}],67:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});class EditorPropBoss{constructor(){this.props=new Map}register(PropEntityClass,details){this.props.set(PropEntityClass,details)}}exports.EditorPropBoss=EditorPropBoss})},{}],68:[function(require,module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","../../../core/entity","../../plugins/look-plugin","../../plugins/move-plugin","../../plugins/prop-plugin","../../tools/camtools","./editor-menu","./create-laser-dot","./editor-menu-store"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx_1=require("mobx");const entity_1=require("../../../core/entity");const look_plugin_1=require("../../plugins/look-plugin");const move_plugin_1=require("../../plugins/move-plugin");const prop_plugin_1=require("../../plugins/prop-plugin");const camtools_1=require("../../tools/camtools");const editor_menu_1=require("./editor-menu");const create_laser_dot_1=require("./create-laser-dot");const editor_menu_store_1=require("./editor-menu-store");class Editor extends entity_1.Entity{constructor(){super(...arguments);this.camera=camtools_1.makeBasicCamera({scene:this.context.scene,bearings:this.entry.bearings});this.plugins=[new move_plugin_1.MovePlugin({node:this.camera,stickStore:this.context.overlayStore.stick1}),new prop_plugin_1.PropPlugin({scene:this.context.scene,canvas:this.context.canvas,manager:this.context.manager})];this.hyperPlugins=[new look_plugin_1.LookPlugin({node:this.camera,engine:this.context.engine,mainMenuStore:this.context.mainMenuStore,stickStore:this.context.overlayStore.stick2})];this.menu=new editor_menu_store_1.EditorMenuStore;this.reactions=[mobx_1.autorun(()=>{const{scene:scene}=this.context;const{activeTool:activeTool}=this.menu;const toolRequiresLaserDot=activeTool instanceof editor_menu_store_1.SelectionTool||activeTool instanceof editor_menu_store_1.AdditionTool;if(toolRequiresLaserDot){if(!this.laserDot)this.laserDot=create_laser_dot_1.createLaserDot({scene:scene})}else if(this.laserDot){this.laserDot.material.dispose();this.laserDot.dispose();this.laserDot=null}})]}initialize(){return __awaiter(this,void 0,void 0,function*(){const{overlayStore:overlayStore}=this.context;const{menuBar:menuBar}=overlayStore;menuBar.addMenu(this.menu,editor_menu_1.EditorMenu);overlayStore.addStickSubscriber()})}logicTick(tickInfo){const{laserDot:laserDot}=this;for(const plugin of this.plugins)plugin.logic(tickInfo);if(laserDot){const pick=this.middlePick();if(pick&&pick.hit){laserDot.position=pick.pickedPoint.clone();laserDot.setEnabled(true)}else{laserDot.position.set(0,0,0);laserDot.setEnabled(false)}}}hyperTick(tickInfo){for(const plugin of this.hyperPlugins)plugin.logic(tickInfo)}deconstruct(){return __awaiter(this,void 0,void 0,function*(){const{overlayStore:overlayStore}=this.context;const{menuBar:menuBar}=overlayStore;menuBar.removeMenu(this.menu);overlayStore.subtractStickSubscriber();this.camera.dispose();for(const plugin of this.plugins)plugin.destructor();for(const dispose of this.reactions)dispose()})}middlePick(){const{scene:scene,canvas:canvas}=this.context;const{width:width,height:height}=canvas;return scene.pick(width/2,height/2)}}exports.Editor=Editor})},{"../../../core/entity":23,"../../plugins/look-plugin":72,"../../plugins/move-plugin":73,"../../plugins/prop-plugin":74,"../../tools/camtools":75,"./create-laser-dot":64,"./editor-menu":66,"./editor-menu-store":65,mobx:3}],69:[function(require,module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../babylon","../../core/entity"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../babylon");const entity_1=require("../../core/entity");class Ground extends entity_1.Entity{constructor(o){super(o);const{scene:scene}=this.context;this.loadGround(scene)}initialize(){return __awaiter(this,void 0,void 0,function*(){})}loadGround(scene){return __awaiter(this,void 0,void 0,function*(){const light1=new babylon_1.default.HemisphericLight("light1",new babylon_1.default.Vector3(5,5,0),scene);const light2=new babylon_1.default.PointLight("light2",new babylon_1.default.Vector3(0,5,-5),scene);light1.intensity=.4;light2.intensity=.4;const mesh=babylon_1.default.MeshBuilder.CreateGround("ground",{width:50,height:50,subdivisions:2},scene);mesh.physicsImpostor=new babylon_1.default.PhysicsImpostor(mesh,babylon_1.default.PhysicsImpostor.BoxImpostor,{mass:0,restitution:.1},scene);mesh.translate(new babylon_1.default.Vector3(0,-1,0),10)})}deconstruct(){return __awaiter(this,void 0,void 0,function*(){})}}exports.Ground=Ground})},{"../../babylon":21,"../../core/entity":23}],70:[function(require,module,exports){var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value)}).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","simplex-noise","../../babylon","../../core/entity","../../core/toolbox/load-babylon-assets"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const SimplexNoise=require("simplex-noise");const babylon_1=require("../../babylon");const entity_1=require("../../core/entity");const load_babylon_assets_1=require("../../core/toolbox/load-babylon-assets");class Terrain extends entity_1.Entity{initialize(){return __awaiter(this,void 0,void 0,function*(){return this.load(this.context.scene)})}deconstruct(){return __awaiter(this,void 0,void 0,function*(){})}load(scene){return __awaiter(this,void 0,void 0,function*(){yield this.generateLighting(scene);yield this.generateTerrain(scene)})}generateLighting(scene){return __awaiter(this,void 0,void 0,function*(){const light1=new babylon_1.default.HemisphericLight("light1",new babylon_1.default.Vector3(5,5,0),scene);const light2=new babylon_1.default.PointLight("light2",new babylon_1.default.Vector3(0,5,-5),scene);light1.intensity=.4;light2.intensity=.7})}generateTerrain(scene){return __awaiter(this,void 0,void 0,function*(){const simplexNoise=new SimplexNoise;function updateVertices(mesh,vertexHandler){mesh.updateMeshPositions(vertexData=>{for(let index=0;index<vertexData.length;index+=3){const vertex=[vertexData[index],vertexData[index+1],vertexData[index+2]];const[x,y,z]=vertexHandler(vertex);vertexData[index]=x;vertexData[index+1]=y;vertexData[index+2]=z}})}function applyNoise({mesh:mesh,scale:scale,magnitude:magnitude}){updateVertices(mesh,([x,y,z])=>[x,y+simplexNoise.noise2D(x/scale,z/scale)*magnitude-magnitude/2,z])}function createTerrain({size:size,subdivisions:subdivisions,scene:scene,meshName:meshName="terrain-"+Math.floor(Math.random()*1e3)}){const terrainMeshPhysical=babylon_1.default.Mesh.CreateGround(meshName,size,size,subdivisions,scene,true);terrainMeshPhysical.isVisible=false;const terrainMeshVisual=babylon_1.default.Mesh.CreateGround(meshName,size,size,subdivisions*4,scene,true);terrainMeshVisual.isVisible=true;terrainMeshVisual.material=new babylon_1.default.StandardMaterial("terrainmaterial",scene);terrainMeshVisual.material.wireframe=true;const broadNoisePasses=[{scale:20,magnitude:2},{scale:5,magnitude:.2},{scale:.5,magnitude:.02}];for(const noiseOptions of broadNoisePasses){applyNoise(Object.assign({mesh:terrainMeshPhysical},noiseOptions));applyNoise(Object.assign({mesh:terrainMeshVisual},noiseOptions))}const subtleNoisePasses=[{scale:.3,magnitude:.02},{scale:.1,magnitude:.01}];for(const noiseOptions of subtleNoisePasses){applyNoise(Object.assign({mesh:terrainMeshPhysical},noiseOptions));applyNoise(Object.assign({mesh:terrainMeshVisual},noiseOptions))}terrainMeshVisual.physicsImpostor=new babylon_1.default.PhysicsImpostor(terrainMeshPhysical,babylon_1.default.PhysicsImpostor.MeshImpostor,{mass:0,restitution:.1,friction:1});return{terrainMeshPhysical:terrainMeshPhysical,terrainMeshVisual:terrainMeshVisual}}createTerrain({size:100,subdivisions:50,scene:scene})})}loadTerrainObjectFile(scene){return __awaiter(this,void 0,void 0,function*(){const container=yield load_babylon_assets_1.loadBabylonAssets({path:"assets/testterrains.obj",scene:scene,onProgress:()=>{}});const lowPolyMesh=container.meshes.find(mesh=>mesh.name.includes("7.5k"));const highPolyMesh=container.meshes.find(mesh=>mesh.name.includes("131k"));for(const mesh of container.meshes){mesh.isVisible=false}for(const mesh of[lowPolyMesh,highPolyMesh])mesh.scaling=new babylon_1.default.Vector3(10,10,10);highPolyMesh.physicsImpostor=new babylon_1.default.PhysicsImpostor(lowPolyMesh,babylon_1.default.PhysicsImpostor.MeshImpostor,{mass:0,restitution:.1,friction:.5});highPolyMesh.isVisible=true;container.addAllToScene()})}}exports.Terrain=Terrain})},{"../../babylon":21,"../../core/entity":23,"../../core/toolbox/load-babylon-assets":50,"simplex-noise":17}],71:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","preact","preact","../babylon","../core/ticker","../core/viewport","../core/conductor","../core/overlay/components/overlay","../core/toolbox/service-master","../core/overlay/stores/overlay-store","../core/overlay/stores/statistics-store"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const preact_1=require("preact");const preact=require("preact");const babylon_1=require("../babylon");const ticker_1=require("../core/ticker");const viewport_1=require("../core/viewport");const conductor_1=require("../core/conductor");const overlay_1=require("../core/overlay/components/overlay");const service_master_1=require("../core/toolbox/service-master");const overlay_store_1=require("../core/overlay/stores/overlay-store");const statistics_store_1=require("../core/overlay/stores/statistics-store");class Game extends service_master_1.ServiceMaster{constructor(options){super();const{mode:mode,canvas:canvas,gravity:gravity,entityClasses:entityClasses,overlayElement:overlayElement,maxSlowTickRate:maxSlowTickRate,maxLogicTickRate:maxLogicTickRate,maxHyperTickRate:maxHyperTickRate}=options;const engine=new babylon_1.default.Engine(canvas,true,undefined,true);const scene=new babylon_1.default.Scene(engine);const gravityVector=babylon_1.default.Vector3.FromArray(gravity);const physicsPlugin=new babylon_1.default.AmmoJSPlugin;const physicsWorld=physicsPlugin.world;scene.enablePhysics(gravityVector,physicsPlugin);const viewport=new viewport_1.Viewport({window:window,canvas:canvas,scene:scene,engine:engine});const statisticsStore=new statistics_store_1.StatisticsStore;const overlayStore=new overlay_store_1.OverlayStore({statisticsStore:statisticsStore});const{mainMenuStore:mainMenuStore}=overlayStore;preact.render(preact_1.h(overlay_1.Overlay,Object.assign({},{overlayStore:overlayStore})),undefined,overlayElement);const conductor=new conductor_1.Conductor({mode:mode,entityClasses:entityClasses,context:{scene:scene,window:window,canvas:canvas,engine:engine,physicsWorld:physicsWorld,overlayStore:overlayStore,mainMenuStore:mainMenuStore}});const{logicTicker:logicTicker,hyperTicker:hyperTicker,slowTicker:slowTicker}=this.makeTickers({maxLogicTickRate:maxLogicTickRate,maxHyperTickRate:maxHyperTickRate,maxSlowTickRate:maxSlowTickRate,viewport:viewport,conductor:conductor,statisticsStore:statisticsStore});this.services=[viewport,logicTicker,hyperTicker,slowTicker];this.manager=conductor.manager}makeTickers({maxLogicTickRate:maxLogicTickRate,maxHyperTickRate:maxHyperTickRate,maxSlowTickRate:maxSlowTickRate,viewport:viewport,conductor:conductor,statisticsStore:statisticsStore}){const logicTicker=new ticker_1.Ticker({period:1e3/maxLogicTickRate,tickAction:tickInfo=>conductor.logicTick(tickInfo)});const hyperTicker=new ticker_1.Ticker({period:1e3/maxHyperTickRate,tickAction:tickInfo=>conductor.hyperTick(tickInfo)});const slowTicker=new ticker_1.Ticker({period:1e3/maxSlowTickRate,tickAction:tickInfo=>{conductor.hyperTick(tickInfo);statisticsStore.recordTickerStats({timeline:logicTicker.timeline,slowTickRate:slowTicker.tickRate,logicTickRate:logicTicker.tickRate,hyperTickRate:hyperTicker.tickRate,renderFrameRate:viewport.renderFrameRate})}});return{logicTicker:logicTicker,hyperTicker:hyperTicker,slowTicker:slowTicker}}}exports.Game=Game})},{"../babylon":21,"../core/conductor":22,"../core/overlay/components/overlay":30,"../core/overlay/stores/overlay-store":35,"../core/overlay/stores/statistics-store":36,"../core/ticker":39,"../core/toolbox/service-master":53,"../core/viewport":55,preact:6}],72:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../babylon","../../core/toolbox/cap"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../babylon");const cap_1=require("../../core/toolbox/cap");class Freelook{constructor(){this.horizontal=0;this.vertical=0}add(horizontal,vertical){this.horizontal+=horizontal;this.vertical+=vertical;this.vertical=cap_1.cap(this.vertical,-(Math.PI/2),Math.PI/2)}}class LookPlugin{constructor({engine:engine,node:node,stickStore:stickStore,mainMenuStore:mainMenuStore}){this.freelook=new Freelook;this.eventHandlers={mousemove:event=>{const{movementX:movementX,movementY:movementY}=event;if(this.engine.isPointerLock&&!isNaN(movementX)&&!isNaN(movementY)){const{freelook:freelook}=this;const sensitivity=this.getSensitivity();freelook.add(movementX*sensitivity,movementY*sensitivity)}}};this.node=node;this.engine=engine;this.stickStore=stickStore;this.mainMenuStore=mainMenuStore;for(const eventName of Object.keys(this.eventHandlers)){window.addEventListener(eventName,this.eventHandlers[eventName],false)}}logic(tick){this.ascertainThumblook();this.enactLook()}destructor(){const{eventHandlers:eventHandlers}=this;for(const eventName of Object.keys(eventHandlers)){window.removeEventListener(eventName,eventHandlers[eventName])}}getSensitivity(){return this.mainMenuStore.lookSensitivity/1e4}ascertainThumblook(){const{stickStore:stickStore,freelook:freelook}=this;const{angle:angle,force:force}=stickStore;if(force>0){const x=Math.cos(angle);const y=-Math.sin(angle);const factor=force*(this.getSensitivity()*10);freelook.add(x*factor,y*factor)}}enactLook(){const{freelook:freelook,node:node}=this;if(!freelook)return;const{horizontal:horizontal,vertical:vertical}=freelook;const quaternion=babylon_1.default.Quaternion.RotationYawPitchRoll(horizontal,vertical,0);node.rotationQuaternion=quaternion}}exports.LookPlugin=LookPlugin})},{"../../babylon":21,"../../core/toolbox/cap":41}],73:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../core/watcher/watcher","../tools/traversal"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const watcher_1=require("../../core/watcher/watcher");const traversal_1=require("../tools/traversal");class MovePlugin{constructor({node:node,stickStore:stickStore}){this.watcher=new watcher_1.Watcher({bindings:traversal_1.traversiveBindings});this.node=node;this.stickStore=stickStore}logic(tick){const{node:node,stickStore:stickStore,watcher:watcher}=this;const{angle:angle,force:force}=stickStore;traversal_1.enactMovement({node:node,move:traversal_1.ascertainMovement({watcher:watcher,stickInfo:{angle:angle,force:force},timeFactor:tick.timeSinceLastTick/50})})}destructor(){this.watcher.destructor()}}exports.MovePlugin=MovePlugin})},{"../../core/watcher/watcher":59,"../tools/traversal":77}],74:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","mobx","../../babylon","../../core/watcher/input","../../core/watcher/watcher","../entities/cube/create-cube-proposal-mesh"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const mobx=require("mobx");const babylon_1=require("../../babylon");const input_1=require("../../core/watcher/input");const watcher_1=require("../../core/watcher/watcher");const create_cube_proposal_mesh_1=require("../entities/cube/create-cube-proposal-mesh");exports.bindings={propose:[input_1.Input.E],place:[input_1.Input.MouseLeft],remove:[input_1.Input.X,input_1.Input.Backspace,input_1.Input.Delete]};class PropPlugin{constructor(options){this.watcher=new watcher_1.Watcher({bindings:exports.bindings});this.propSpawnHeight=.2;this.proposedSize=1;this.proposalMesh=null;this.reactions=[mobx.reaction(()=>this.watcher.status.propose,propose=>{if(propose){if(!this.proposalMesh){const{scene:scene}=this;const{aimpoint:aimpoint}=this;const position=aimpoint?aimpoint.asArray():[0,0,0];const s=this.proposedSize=this.getRandomSize();const physique={mass:s,size:[s,s,s]};const bearings={position:position,rotation:[0,0,0,0]};const mesh=create_cube_proposal_mesh_1.createCubeProposalMesh(scene);mesh.scaling=babylon_1.default.Vector3.FromArray(physique.size);mesh.position=babylon_1.default.Vector3.FromArray(bearings.position);mesh.position.y+=this.proposedSize+this.propSpawnHeight;this.proposalMesh=mesh}}else{if(this.proposalMesh){this.proposalMesh.dispose();this.proposalMesh=null}}}),mobx.reaction(()=>this.watcher.status.place,place=>{const{manager:manager,proposalMesh:proposalMesh}=this;if(place&&proposalMesh){const s=this.proposedSize;manager.addEntry({type:"Cube",physique:{mass:s,size:[s,s,s],friction:1},bearings:{position:proposalMesh.position.asArray(),rotation:proposalMesh.rotation.asArray()}})}}),mobx.reaction(()=>this.watcher.status.remove,remove=>{const{manager:manager}=this;if(remove){const pick=this.middlePick();if(pick&&pick.pickedMesh){const mesh=pick.pickedMesh;if(mesh["entryId"])manager.removeEntry(mesh["entryId"])}}})];this.manager=options.manager;this.scene=options.scene;this.canvas=options.canvas}get aimpoint(){const{scene:scene,canvas:canvas}=this;const{pickedPoint:aimpoint}=scene.pick(canvas.width/2,canvas.height/2);return aimpoint}logic(tick){const{aimpoint:aimpoint,proposalMesh:proposalMesh}=this;if(aimpoint)aimpoint.y+=this.proposedSize+this.propSpawnHeight;if(proposalMesh)proposalMesh.position=aimpoint||babylon_1.default.Vector3.Zero()}destructor(){this.watcher.destructor();for(const dispose of this.reactions)dispose()}middlePick(){const{scene:scene,canvas:canvas}=this;return scene.pick(canvas.width/2,canvas.height/2)}getRandomSize(){return.1+Math.random()*1.5}}exports.PropPlugin=PropPlugin})},{"../../babylon":21,"../../core/watcher/input":57,"../../core/watcher/watcher":59,"../entities/cube/create-cube-proposal-mesh":62,mobx:3}],75:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../babylon"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../babylon");exports.makeCamera=(({scene:scene,bearings:bearings,speed:speed})=>{const camera=new babylon_1.default.FreeCamera("Spectator Camera",babylon_1.default.Vector3.FromArray(bearings.position),scene);camera.position=babylon_1.default.Vector3.FromArray(bearings.position);camera.setTarget(babylon_1.default.Vector3.Zero());camera.speed=speed;camera.inputs.removeByType("FreeCameraKeyboardMoveInput");if(!camera._localDirection)camera._localDirection=babylon_1.default.Vector3.Zero();if(!camera._transformedDirection)camera._transformedDirection=babylon_1.default.Vector3.Zero();scene.activeCamera=camera;return camera});function makeBasicCamera({scene:scene,bearings:bearings}){const camera=new babylon_1.default.TargetCamera("basic-camera",babylon_1.default.Vector3.FromArray(bearings.position),scene);scene.activeCamera=camera;return camera}exports.makeBasicCamera=makeBasicCamera;exports.makeActiveCamera=(({scene:scene,position:position,speed:speed})=>{const camera=new babylon_1.default.FreeCamera("camera",babylon_1.default.Vector3.FromArray(position),scene);camera.position=babylon_1.default.Vector3.FromArray(position);camera.setTarget(babylon_1.default.Vector3.Zero());camera.speed=speed;camera.inputs.removeByType("FreeCameraKeyboardMoveInput");if(!camera._localDirection)camera._localDirection=babylon_1.default.Vector3.Zero();if(!camera._transformedDirection)camera._transformedDirection=babylon_1.default.Vector3.Zero();scene.activeCamera=camera;return camera})})},{"../../babylon":21}],76:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","nipplejs"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const nipplejs=require("nipplejs");const defaultThumbstickInfo={angle:0,force:0};class Thumbstick{constructor({zone:zone,onMove:onMove=(()=>{})}){this.info=Object.assign({},defaultThumbstickInfo);const move=info=>{this.info=info;onMove(info)};const manager=this.manager=nipplejs.create({zone:zone,size:120,color:"rgba(255,255,255, 0.5)",mode:"static",position:{bottom:"50%",left:"50%"}});manager.on("start end",(event,instance)=>move(defaultThumbstickInfo));manager.on("move",(event,data)=>move({angle:data.angle.radian,force:data.force}))}destructor(){this.manager.destroy();this.manager=null}}exports.Thumbstick=Thumbstick})},{nipplejs:5}],77:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","../../babylon","../../core/watcher/input","../../core/toolbox/get-vector-magnitude"],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const babylon_1=require("../../babylon");const input_1=require("../../core/watcher/input");const get_vector_magnitude_1=require("../../core/toolbox/get-vector-magnitude");exports.traversiveBindings={forward:[input_1.Input.W,input_1.Input.ArrowUp],backward:[input_1.Input.S,input_1.Input.ArrowDown],left:[input_1.Input.A,input_1.Input.ArrowLeft],right:[input_1.Input.D,input_1.Input.ArrowRight],raise:[input_1.Input.Space],lower:[input_1.Input.Z,input_1.Input.C],sprint:[input_1.Input.Shift]};function ascertainMovement({watcher:watcher,stickInfo:stickInfo,maxSpeed:maxSpeed=1,timeFactor:timeFactor=1,sprintFactor:sprintFactor=3}){let speed=maxSpeed*timeFactor;const control=Object.assign({},watcher.status);const move=babylon_1.default.Vector3.Zero();if(stickInfo&&stickInfo.force>0){const{angle:angle,force:force}=stickInfo;const x=Math.cos(angle);const z=Math.sin(angle);const appliedForce=force<1?force:1;move.x+=x*speed*appliedForce;move.z+=z*speed*appliedForce}else{if(!control.sprint)speed/=sprintFactor;if(control.forward)move.z+=speed;if(control.backward)move.z-=speed;if(control.left)move.x-=speed;if(control.right)move.x+=speed;if(control.raise)move.y+=speed;if(control.lower)move.y-=speed}if(get_vector_magnitude_1.getVectorMagnitude(move)>1)move.normalize();return move}exports.ascertainMovement=ascertainMovement;function enactMovement({node:node,move:move}){node.position=babylon_1.default.Vector3.TransformCoordinates(move,node.getWorldMatrix())}exports.enactMovement=enactMovement;function ascertainLook(params){return babylon_1.default.Quaternion.Zero()}exports.ascertainLook=ascertainLook})},{"../../babylon":21,"../../core/toolbox/get-vector-magnitude":48,"../../core/watcher/input":57}],78:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","./babylon","./core/conductor","./core/entity","./core/interfaces","./core/manager","./core/replicate","./core/ticker","./core/viewport","./core/network/loopback-network","./core/network/network","./core/overlay/components/main-menu","./core/overlay/components/menu-bar","./core/overlay/components/overlay","./core/overlay/components/stick","./core/overlay/stores/main-menu-store","./core/overlay/stores/menu-bar-store","./core/overlay/stores/menu-store","./core/overlay/stores/overlay-store","./core/overlay/stores/statistics-store","./core/overlay/stores/stick-store","./core/toolbox/assign-props-onto-map","./core/toolbox/cap","./core/toolbox/copy","./core/toolbox/create-round-camera-rig","./core/toolbox/environment","./core/toolbox/generate-id","./core/toolbox/get-entity-class","./core/toolbox/get-time","./core/toolbox/get-vector-magnitude","./core/toolbox/identical","./core/toolbox/load-babylon-assets","./core/toolbox/mixin","./core/toolbox/path-breakdown","./core/toolbox/service-master","./core/toolbox/sleep","./core/watcher/input-keycode-relations","./core/watcher/input","./core/watcher/otherwise-supported-inputs","./core/watcher/watcher","./game/game","./game/entities/ground","./game/entities/terrain","./game/entities/cube/create-cube-ghost-mesh","./game/entities/cube/create-cube-mesh","./game/entities/cube/create-cube-proposal-mesh","./game/entities/cube/cube","./game/entities/editor/create-laser-dot","./game/entities/editor/editor-menu-store","./game/entities/editor/editor-menu","./game/entities/editor/editor-prop-boss","./game/entities/editor/editor","./game/plugins/look-plugin","./game/plugins/move-plugin","./game/plugins/prop-plugin","./game/tools/camtools","./game/tools/thumbstick","./game/tools/traversal"],factory)}})(function(require,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p]}Object.defineProperty(exports,"__esModule",{value:true});__export(require("./babylon"));__export(require("./core/conductor"));__export(require("./core/entity"));__export(require("./core/interfaces"));__export(require("./core/manager"));__export(require("./core/replicate"));__export(require("./core/ticker"));__export(require("./core/viewport"));__export(require("./core/network/loopback-network"));__export(require("./core/network/network"));__export(require("./core/overlay/components/main-menu"));__export(require("./core/overlay/components/menu-bar"));__export(require("./core/overlay/components/overlay"));__export(require("./core/overlay/components/stick"));__export(require("./core/overlay/stores/main-menu-store"));__export(require("./core/overlay/stores/menu-bar-store"));__export(require("./core/overlay/stores/menu-store"));__export(require("./core/overlay/stores/overlay-store"));__export(require("./core/overlay/stores/statistics-store"));__export(require("./core/overlay/stores/stick-store"));__export(require("./core/toolbox/assign-props-onto-map"));__export(require("./core/toolbox/cap"));__export(require("./core/toolbox/copy"));__export(require("./core/toolbox/create-round-camera-rig"));__export(require("./core/toolbox/environment"));__export(require("./core/toolbox/generate-id"));__export(require("./core/toolbox/get-entity-class"));__export(require("./core/toolbox/get-time"));__export(require("./core/toolbox/get-vector-magnitude"));__export(require("./core/toolbox/identical"));__export(require("./core/toolbox/load-babylon-assets"));__export(require("./core/toolbox/mixin"));__export(require("./core/toolbox/path-breakdown"));__export(require("./core/toolbox/service-master"));__export(require("./core/toolbox/sleep"));__export(require("./core/watcher/input-keycode-relations"));__export(require("./core/watcher/input"));__export(require("./core/watcher/otherwise-supported-inputs"));__export(require("./core/watcher/watcher"));__export(require("./game/game"));__export(require("./game/entities/ground"));__export(require("./game/entities/terrain"));__export(require("./game/entities/cube/create-cube-ghost-mesh"));__export(require("./game/entities/cube/create-cube-mesh"));__export(require("./game/entities/cube/create-cube-proposal-mesh"));__export(require("./game/entities/cube/cube"));__export(require("./game/entities/editor/create-laser-dot"));__export(require("./game/entities/editor/editor-menu-store"));__export(require("./game/entities/editor/editor-menu"));__export(require("./game/entities/editor/editor-prop-boss"));__export(require("./game/entities/editor/editor"));__export(require("./game/plugins/look-plugin"));__export(require("./game/plugins/move-plugin"));__export(require("./game/plugins/prop-plugin"));__export(require("./game/tools/camtools"));__export(require("./game/tools/thumbstick"));__export(require("./game/tools/traversal"))})},{"./babylon":21,"./core/conductor":22,"./core/entity":23,"./core/interfaces":24,"./core/manager":25,"./core/network/loopback-network":26,"./core/network/network":27,"./core/overlay/components/main-menu":28,"./core/overlay/components/menu-bar":29,"./core/overlay/components/overlay":30,"./core/overlay/components/stick":31,"./core/overlay/stores/main-menu-store":32,"./core/overlay/stores/menu-bar-store":33,"./core/overlay/stores/menu-store":34,"./core/overlay/stores/overlay-store":35,"./core/overlay/stores/statistics-store":36,"./core/overlay/stores/stick-store":37,"./core/replicate":38,"./core/ticker":39,"./core/toolbox/assign-props-onto-map":40,"./core/toolbox/cap":41,"./core/toolbox/copy":42,"./core/toolbox/create-round-camera-rig":43,"./core/toolbox/environment":44,"./core/toolbox/generate-id":45,"./core/toolbox/get-entity-class":46,"./core/toolbox/get-time":47,"./core/toolbox/get-vector-magnitude":48,"./core/toolbox/identical":49,"./core/toolbox/load-babylon-assets":50,"./core/toolbox/mixin":51,"./core/toolbox/path-breakdown":52,"./core/toolbox/service-master":53,"./core/toolbox/sleep":54,"./core/viewport":55,"./core/watcher/input":57,"./core/watcher/input-keycode-relations":56,"./core/watcher/otherwise-supported-inputs":58,"./core/watcher/watcher":59,"./game/entities/cube/create-cube-ghost-mesh":60,"./game/entities/cube/create-cube-mesh":61,"./game/entities/cube/create-cube-proposal-mesh":62,"./game/entities/cube/cube":63,"./game/entities/editor/create-laser-dot":64,"./game/entities/editor/editor":68,"./game/entities/editor/editor-menu":66,"./game/entities/editor/editor-menu-store":65,"./game/entities/editor/editor-prop-boss":67,"./game/entities/ground":69,"./game/entities/terrain":70,"./game/game":71,"./game/plugins/look-plugin":72,"./game/plugins/move-plugin":73,"./game/plugins/prop-plugin":74,"./game/tools/camtools":75,"./game/tools/thumbstick":76,"./game/tools/traversal":77}],79:[function(require,module,exports){(function(factory){if(typeof module==="object"&&typeof module.exports==="object"){var v=factory(require,exports);if(v!==undefined)module.exports=v}else if(typeof define==="function"&&define.amd){define(["require","exports","."],factory)}})(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});const _1=require(".");monarchDemo();function monarchDemo(){const game=new _1.Game({maxSlowTickRate:10,maxLogicTickRate:60,maxHyperTickRate:1e3,mode:_1.ModeOfConduct.Alone,canvas:document.querySelector("canvas"),overlayElement:document.querySelector(".overlay"),gravity:[0,-9.8,0],entityClasses:{Cube:_1.Cube,Editor:_1.Editor,Terrain:_1.Terrain}});game.manager.addEntry({type:"Terrain"});game.manager.addEntry({type:"Editor",bearings:{position:[0,10,-5],rotation:[0,0,0,0]}});window.scrollTo(0,1)}exports.monarchDemo=monarchDemo})},{".":78}]},{},[79]);
